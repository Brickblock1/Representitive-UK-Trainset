# 1 "rukts.pnml"
disable_item(FEAT_TRAINS);
# 1 "src/CODE/header.pnml" 1
grf{
	grfid: "RUKT" ;
	name: string(STR_GRF_NAME) ;
	desc: string(STR_GRF_DESC) ;
	version: 21 ;
	min_compatible_version: 0 ;
	param 0{
		colour_scheme_1{
			type    : bool ;
			name    : string(STR_PARAM_COLOURSCHEME_NAME) ;
			desc    : string(STR_PARAM_COLOURSCHEME_DESC) ;
			bit     : 1 ;
			def_value : 1 ;
		}
		coaches_take_mail{
			type : bool ;
			name : string(STR_PARAM_COACHMAIL_NAME) ;
			desc : string(STR_PARAM_COACHMAIL_DESC) ;
			bit  : 2 ;
		}
		livery_choice{
			type : bool ;
			name : string(STR_PARAM_LIVERY_CHOICE_NAME) ;
			desc : string(STR_PARAM_LIVERY_CHOICE_DESC) ;
			bit  : 3 ;
		}
	}
	param 1{
		vehicle_selection{
			type      : int ;
			name      : string(STR_PARAM_VEH_SELEC_NAME) ;
			desc      : string(STR_PARAM_VEH_SELEC_DESC) ;
			min_value : 0 ;
			max_value : 3 ;
			def_value : 2 ;
			names     : {
				0 : string(STR_PARAM_VEH_SELEC_CHOICE_ONE  ) ;
				1 : string(STR_PARAM_VEH_SELEC_CHOICE_TWO  ) ;
				2 : string(STR_PARAM_VEH_SELEC_CHOICE_THREE) ;
				3 : string(STR_PARAM_VEH_SELEC_CHOICE_FOUR ) ;
			} ;
		}
	} 
	param 2{
		alt_names{
			type      : bool ;
			name      : string(STR_PARAM_ALT_NAMES_NAME) ;
			desc      : string(STR_PARAM_ALT_NAMES_DESC) ;
			bit		  : 1 ;
			}
		}
	}


train_width_32_px  = 1 ;
traininfo_y_offset = 2 ;
// Tractive Effort Coefficient = Actual Tractive effort / Weight / 10

//Modifying base costs

basecost{
	PR_BUILD_VEHICLE_TRAIN    : -1 ;
	PR_BUILD_VEHICLE_WAGON    :  3 ;
	PR_RUNNING_TRAIN_STEAM    :  2 ;
	PR_RUNNING_TRAIN_DIESEL   :  2 ;
	PR_RUNNING_TRAIN_ELECTRIC :  2 ;
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/cargo_table.pnml" 1
cargotable {
//Default cargos
   PASS, MAIL, COAL, FOOD, GOLD, GOOD, GRAI, IORE, LVST, OIL_, PAPR, STEL, VALU, WHEA, WOOD,

//Tropical cargos
   CORE, DIAM, FRUT, MAIZ, RUBR, WATR, 

//ECS
   AORE, BDMT, BRCK, CERA, CERE, CMNT, DYES, FERT, FICR, FISH, GLAS, LIME, OLSD, PETR, PLAS, POTA, RFPR, SAND, SULP, TOUR, VEHI, WDPR, WOOL, 
   
//FIRS
   BEER, CLAY, ENSP, FMSP, FRVG, GRVL, MILK, MNSP, PHOS, PORE, RCYC, SCMT, SGBT, SGCN, JAVA, COPR, SUGR,
   
//Nuclear stuff
	URAN, NWST
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/railtype_table.pnml" 1
railtypetable {
    RAIL, 
	ELRL,
	SAA3: ["3RDR", ELRL],
	SAAZ: ["3RDC", ELRL],
	SAA4: [SAA3, ELRL],
	NAAN: [NAAN, NRGL, RAIL]
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/alignments.pnml" 1
//template_x_y where x is length and y is no. views

template template_purchase(x,y){
	[ x, y, 79, 12, -39, -8]
}

template template_purchase_short(x,y){
	[ x, y, 55, 12, -39, -8]
}

template base_32bpp(){
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South East
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //South West
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //West
	[0,0,1,1,0,0,"gfx/TEMPLATES/blank.png"] //North West
}

spriteset(gfx_blank){base_32bpp()}

template template_narrow_4_4(x, y){
	[x+000, y  ,  8 , 14 , -3 , -12] //North
	[x+010, y  , 12 , 13 , -5 , -10] //North East
	[x+024, y  , 17 , 13 , -1 , -10] //East
	[x+043, y  , 12 , 13 ,  3 , -5 ] //South East
	[x+000, y  ,  8 , 14 , -3 , -4 ] //South
	[x+010, y  , 12 , 13 , -13, -6 ] //South West
	[x+024, y  , 17 , 13 , -17, -10] //West
	[x+043, y  , 12 , 13 , -5 , -10] //North West
}

template template_narrow_4_8(x, y){
	[x+000, y  ,  8 , 14 , -3 , -12] //North
	[x+010, y  , 12 , 13 , -5 , -10] //North East
	[x+024, y  , 17 , 13 , -1 , -10] //East
	[x+043, y  , 12 , 13 ,  3 , -5 ] //South East
	[x+057, y  ,  8 , 14 , -3 , -4 ] //South
	[x+067, y  , 12 , 13 , -13, -6 ] //South West
	[x+081, y  , 17 , 13 , -17, -10] //West
	[x+100, y  , 12 , 13 , -5 , -10] //North West
}

template template_narrow_6_4(x, y){
	[x+000, y  ,  8 , 18 , -3 , -12] //North
	[x+010, y  , 16 , 15 , -9 , -10] //North East
	[x+028, y  , 25 , 13 , -9 , -10] //East
	[x+055, y  , 16 , 15 , -1 , -8 ] //South East
	[x+000, y  ,  8 , 18 , -3 , -8 ] //South
	[x+010, y  , 16 , 15 , -13, -8 ] //South West
	[x+028, y  , 25 , 13 , -17, -10] //West
	[x+055, y  , 16 , 15 , -5 , -10] //North West
}

template template_narrow_6_8(x, y){
	[x+000, y  ,  8 , 18 , -3 , -12] //North
	[x+010, y  , 16 , 15 , -9 , -10] //North East
	[x+028, y  , 25 , 13 , -9 , -10] //East
	[x+055, y  , 16 , 15 , -1 , -8 ] //South East
	[x+073, y  ,  8 , 18 , -3 , -8 ] //South
	[x+083, y  , 16 , 15 , -13, -8 ] //South West
	[x+101, y  , 25 , 13 , -17, -10] //West
	[x+128, y  , 16 , 15 , -5 , -10] //North West
}


template template_dualhead_purchase(x,y){
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x, y, 78, 12, -54, -8]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
	[ x+77, y+11, 1, 1, 0, 0]
}


template template_uklight(x,y){
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-14,-8] //North East
	[x+32,y,32,13,-16,-9] //East
	[x+66,y,20,16,-4,-8] //South East
	[x+88,y,8,24,-3,-11] //South
	[x+98,y,20,16,-14,-8] //South West
	[x+120,y,32,13,-16,-9] //West
	[x+154,y,20,16,-4,-8] //North West
}

template template_uklight_reverse(x,y){
	[x+88,y,8,24,-3,-11] //South
	[x+98,y,20,16,-14,-8] //South West
	[x+120,y,32,13,-16,-9] //West
	[x+154,y,20,16,-4,-8] //North West
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-14,-8] //North East
	[x+32,y,32,13,-16,-9] //East
	[x+66,y,20,16,-4,-8] //South East
}


template template_5_4(x,y){
	[x+000,  y ,  8 , 16 , -3 , -7 ] //North
	[x+010,  y , 14 , 14 , -14, -5 ] //North East
	[x+026,  y , 21 , 13 , -18, -8 ] //East
	[x+049,  y , 14 , 14 , -7 , -10] //South East
	[x+000,  y ,  8 , 16 , -3 , -7 ] //North
	[x+010,  y , 14 , 14 , -14, -5 ] //North East
	[x+026,  y , 21 , 13 , -18, -8 ] //East
	[x+049,  y , 14 , 14 , -7 , -10] //South East
}

template template_5_8(x,y){
	[x+000,  y ,  8 , 16 , -3 , -11] //North
	[x+010,  y , 14 , 14 , -7 , -9 ] //North East
	[x+026,  y , 21 , 13 , -5 , -9 ] //East
	[x+049,  y , 14 , 14 ,  1 , -6 ] //South East
	[x+065,  y ,  8 , 16 , -3 , -5 ] //South     
	[x+075,  y , 14 , 14 , -13, -6 ] //South West
	[x+091,  y , 21 , 13 , -17, -9 ] //West      
	[x+114,  y , 14 , 14 , -5 , -9 ] //North West
}

template template_5_8_rev(x,y){
	[x+065,  y ,  8 , 16 , -3 , -11] //South     
	[x+075,  y , 14 , 14 , -7 , -9 ] //South West
	[x+091,  y , 21 , 13 , -5 , -9 ] //West      
	[x+114,  y , 14 , 14 ,  1 , -6 ] //North West
	[x+000,  y ,  8 , 16 , -3 , -5 ] //North
	[x+010,  y , 14 , 14 , -13, -6 ] //North East
	[x+026,  y , 21 , 13 , -17, -9 ] //East
	[x+049,  y , 14 , 14 , -5 , -9 ] //South East
}


template template_8_8(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 17, -12, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 17, -5, -10]
    [ x+90, y, 8, 24, -3, -12]
    [ x+100, y, 21, 17, -12, -10]
    [ x+123, y, 32, 12, -16, -8]
    [ x+157, y, 21, 17, -5, -10]
}

template template_8_4(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 17, -12, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 17, -5, -10]
}



template template_7_8(x,y){
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
    [ x+82, y, 8, 22, -3, -11]
    [ x+92, y, 19, 17, -11, -10]
    [ x+113, y, 28, 12, -14, -8]
    [ x+143, y, 19, 17, -4, -9]
}

template template_7_8_rev(x,y){
    [ x+82, y, 8, 22, -3, -11]
    [ x+92, y, 19, 17, -11, -10]
    [ x+113, y, 28, 12, -14, -8]
    [ x+143, y, 19, 17, -4, -9]
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
}

template template_7_4(x,y){
    [ x, y, 8, 22, -3, -11]
    [ x+10, y, 19, 17, -11, -10]
    [ x+31, y, 28, 12, -14, -8]
    [ x+61, y, 19, 17, -4, -9]
}





template template_7_8_2(x,y){
    [ x, y, 8, 20, -3, -10] //N
    [ x+10, y, 18, 16, -11, -9] //NE
    [ x+30, y, 29, 13, -13, -7] //E
    [ x+61, y, 18, 16, -3, -8] //SE
    [ x+81, y, 8, 20, -3, -8] //S
    [ x+91, y, 18, 16, -11, -9] //SW
    [ x+111, y, 29, 13, -17, -9] //W
    [ x+142, y, 18, 16, -5, -9] //NW
}

template template_7_8_rev_2(x,y){
    [ x+81, y, 8, 20, -3, -8] //S
    [ x+91, y, 18, 16, -11, -9] //SW
    [ x+111, y, 29, 13, -17, -9] //W
    [ x+142, y, 18, 16, -5, -9] //NW
    [ x, y, 8, 20, -3, -10] //N
    [ x+10, y, 18, 16, -11, -9] //NE
    [ x+30, y, 29, 13, -13, -7] //E
    [ x+61, y, 18, 16, -3, -8] //SE
}

template template_7_4_2(x,y){
    [ x, y, 8, 20, -3, -10] //N
    [ x+10, y, 18, 16, -11, -9] //NE
    [ x+30, y, 29, 13, -13, -7] //E
    [ x+61, y, 18, 16, -3, -8] //SE
}



template template_8_8_networker(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
    [ x+90, y, 8, 24, -3, -12]
    [ x+100, y, 21, 18, -13, -10]
    [ x+123, y, 32, 12, -16, -8]
    [ x+157, y, 21, 18, -6, -10]
}

template template_8_8_networker_reverse(x,y){
    [ x+90, y, 8, 24, -3, -12]
    [ x+100, y, 21, 18, -13, -10]
    [ x+123, y, 32, 12, -16, -8]
    [ x+157, y, 21, 18, -6, -10]
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
}

template template_8_4_networker(x,y){
    [ x, y, 8, 24, -3, -12]
    [ x+10, y, 21, 18, -13, -10]
    [ x+33, y, 32, 12, -16, -8]
    [ x+67, y, 21, 18, -6, -10]
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/era_definitions.pnml" 1
# 1 "rukts.pnml" 2
# 1 "src/CODE/visual_effects.pnml" 1
switch (FEAT_TRAINS, SELF, vfx_ohle, [STORE_TEMP(create_effect(EFFECT_SPRITE_ELECTRIC, 0, 0, 10), 0x100)]) {
    return 1;
}

switch (FEAT_TRAINS, SELF, vfx_3rd, [STORE_TEMP(create_effect(EFFECT_SPRITE_ELECTRIC, 0, 0, -7), 0x100)]) {
    return 1;
}

switch (FEAT_TRAINS, SELF, vfx_diesel_default, [STORE_TEMP(create_effect(EFFECT_SPRITE_DIESEL, 0, 0, 10), 0x100)]) {
    return 1;
}

switch(FEAT_TRAINS, SELF, vfx_dual_voltage, current_railtype){
	SAA3: vfx_3rd;
	vfx_ohle;
}

switch(FEAT_TRAINS, SELF, vfx_3rd_only, current_railtype){
	SAA3: vfx_3rd;
	return 0;
}

switch(FEAT_TRAINS, SELF, vfx_ohle_only, current_railtype){
	ELRL: vfx_ohle;
	SAAZ: vfx_ohle;
	return 0;
}

switch(FEAT_TRAINS, SELF, vfx_steam, [STORE_TEMP(create_effect(EFFECT_SPRITE_STEAM, 0, 0, 10), 0x100)]) {
    return 1;
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/sound_effects.pnml" 1
//Sound deciding switches

/*

Rule of thumb: 4.5 m/s = 10 Mph = 16 Km/h
Game will take these numbers in m/s
To work out speed do 4.5 * (Speed in Mph / 10)

*/


switch(FEAT_TRAINS, PARENT, sw_sfx_electric_old_running, current_speed){
	0..17  : sound("sfx/86_coast_2.wav") ;
	18..40 : sound("sfx/86_coast_1.wav") ;
	sound("sfx/86_coast_3.wav") ;
}


switch(FEAT_TRAINS, PARENT, sw_sfx_electric_modern_running, current_speed){
	0..27 : sound("sfx/modern_electric_slow.wav") ;
	sound("sfx/modern_electric_fast.wav") ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_flange){
	1 : sound("sfx/flange_1.wav") ;
	1 : sound("sfx/flange_2.wav") ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_desiro_low_speed){
	2 : sound("sfx/desiro_run_low.wav", 60) ;
	1 : sw_sfx_random_flange;
}

switch(FEAT_TRAINS, PARENT, sw_sfx_desiro_running, current_speed){
	0..16 : sw_sfx_random_desiro_low_speed ;
	17..32 : sound("sfx/desiro_run_medium.wav", 60) ;
	sound("sfx/desiro_run_high.wav", 60) ;
}


random_switch(FEAT_TRAINS, SELF, sw_sfx_random_gec_low_speed){
	2 : sound("sfx/GEC_slow.wav") ;
	1 : sw_sfx_random_flange;
}

switch(FEAT_TRAINS, PARENT, sw_sfx_gec_run, current_speed){
	0..16 : sw_sfx_random_gec_low_speed ;
	17..33 : sound("sfx/GEC_med.wav") ;
	sound("sfx/GEC_fast.wav", 80) ;
}


switch(FEAT_TRAINS, PARENT, sw_ee_coast_decider, current_speed){
	0..18 : sound("sfx/ee_2_coast_low.wav") ;
	sound("sfx/ee_2_coast_high.wav", 90) ;
}


switch(FEAT_TRAINS, PARENT, sw_sfx_modern_diesel_running, current_speed){
	0..18 : sound("sfx/modern_diesel_coast_low.wav") ;
	sound("sfx/modern_diesel_coast_high.wav") ;
}


/*
switch(FEAT_TRAINS, PARENT, sw_sfx_electric_networker_running, current_speed){
	0..13 : sound("sfx/465_coast_1.wav") ;
	14..23 : sound("sfx/465_coast_2.wav") ;
	sound("sfx/465_coast_3.wav") ;
}*/


//Sound effect switches

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_old, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/86_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16       : sw_sfx_electric_old_running ;
	SOUND_EVENT_START         : sound("sfx/86_depart.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_electric_loco_modern, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_electric_modern_running ;
	SOUND_EVENT_START         : sound("sfx/horn_4.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_4.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_modern, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/modern_diesel_idle.wav") ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/modern_diesel_run.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_modern_diesel_running ;
	SOUND_EVENT_START         : sound("sfx/horn_2.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_2.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/ee_idle.wav") ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/ee_run.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/ee_coast.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_3.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_3.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_ee_2, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/ee_2_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/ee_2_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : sw_ee_coast_decider ;
	SOUND_EVENT_START         : sound("sfx/horn_3.wav",90) ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_3.wav",90) ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_small, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/thump_idle.wav",60) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/thump_run.wav",60) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/thump_coast.wav",60) ;
	SOUND_EVENT_START         : sound("sfx/thump_whistle.wav",60) ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/thump_whistle.wav",60) ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_diesel_loco_heritage, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/brush_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/brush_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/brush_coast.wav",90) ;
	SOUND_EVENT_START         : sound("sfx/horn_3.wav",90) ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_3.wav",90) ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_hst, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/hst_idle.wav",90) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/hst_run.wav",90) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/hst_coast.wav",90) ;
	SOUND_EVENT_START         : sound("sfx/horn_1.wav",90) ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav",90) ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_desiro, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_desiro_running ;
	SOUND_EVENT_START         : sound("sfx/horn_4.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_4.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_emu_gec, getbits(extra_callback_info1, 0, 8)){
	//SOUND_EVENT_STOPPED       : sound("sfx/modern_electric_idle.wav") ;
	//SOUND_EVENT_VISUAL_EFFECT : sound("sfx/.wav") ;
	SOUND_EVENT_RUNNING_16    : sw_sfx_gec_run ;
	SOUND_EVENT_START         : sound("sfx/horn_1.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_one, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/dmu_idle.wav",70) ;
	SOUND_EVENT_VISUAL_EFFECT : sound("sfx/dmu_run.wav", 80) ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/dmu_coast.wav", 80) ;
	SOUND_EVENT_START         : sound("sfx/horn_1.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav") ;
}

switch(FEAT_TRAINS, SELF, sw_sfx_dmu_two, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_STOPPED       : sound("sfx/voyager_idle.wav") ;
	SOUND_EVENT_RUNNING_16    : sound("sfx/voyager_run.wav") ;
	SOUND_EVENT_START         : sound("sfx/horn_1.wav") ;
	SOUND_EVENT_BREAKDOWN     : SOUND_TRAIN_BREAKDOWN ;
	SOUND_EVENT_TUNNEL        : sound("sfx/horn_1.wav") ;
}

/*
switch(FEAT_TRAINS, SELF, sw_sfx_electric_networker, getbits(extra_callback_info1, 0, 8)){
 //SOUND_EVENT_STOPPED       : sound("sfx/465_idle.wav") ;
 SOUND_EVENT_VISUAL_EFFECT : sound("sfx/465_shoe_clatter.wav") ;
 SOUND_EVENT_RUNNING_16 : sw_sfx_electric_networker_running ;
 SOUND_EVENT_START : sound("sfx/465_depart.wav") ;
 SOUND_EVENT_BREAKDOWN : SOUND_TRAIN_BREAKDOWN ;
 SOUND_EVENT_TUNNEL : sound("sfx/horn_1.wav") ;
}*/

switch(FEAT_TRAINS, SELF, sw_sfx_steam, getbits(extra_callback_info1, 0, 8)){
	SOUND_EVENT_START : sound("sfx/steam_whistle.wav", 70) ;
	SOUND_EVENT_TUNNEL : sound("sfx/steam_whistle.wav", 70) ;
	SOUND_EVENT_RUNNING_16 : sound("sfx/steam_run.wav", 80) ;
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/coupling_restrictions.pnml" 1
switch(FEAT_TRAINS, SELF, sw_all_but_MU90, vehicle_type_id) {
    item_MU90: return string(STR_MU90_NO_COUPLE);
    return CB_RESULT_ATTACH_ALLOW;
}
# 1 "rukts.pnml" 2
# 1 "src/TRACKS/narrow_gauge.pnml" 1
//Narrow Gauge Tracks

//Graphics

spriteset(gfx_narrow_track, "gfx/TRACKS/narrow_gauge.png"){
	[ 0  , 72 , 40 , 21 , -19,  5  ] //North East
	[ 50 , 72 , 40 , 21 , -19,  5  ] //North West
	[ 100, 72 , 40 , 7  , -19,  4  ] //Horizontal Top
	[ 150, 72 , 40 , 7  , -19, 20  ] //Horizontal Bottom
	[ 200, 72 , 12 , 19 , 11 ,  6  ] //Vertical Right
	[ 224, 72 , 12 , 19 , -21,  6  ] //Vertical Left
	[ 259, 72 , 36 , 27 , -17, -2  ] //Slope NE
	[ 342, 72 , 37 , 12 , -18,  6  ] //Slope SE
	[ 383, 72 , 37 , 12 , -19,  6  ] //Slope SW
	[ 299, 72 , 36 , 27 , -17, -2  ] //Slope NW
}

spriteset(gfx_narrow_trackbed, "gfx/TRACKS/narrow_gauge.png"){
	[ 0  , 72 , 40 , 21 , -19,  5  ] //North East
	[ 50 , 72 , 40 , 21 , -19,  5  ] //North West
	[ 100, 72 , 40 , 7  , -19,  4  ] //Horizontal Top
	[ 150, 72 , 40 , 7  , -19, 20  ] //Horizontal Bottom
	[ 200, 72 , 12 , 19 , 11 ,  6  ] //Vertical Right
	[ 224, 72 , 12 , 19 , -21,  6  ] //Vertical Left
	[ 259, 72 , 36 , 27 , -17, -2  ] //Slope NE
	[ 342, 72 , 37 , 12 , -18,  6  ] //Slope SE
	[ 383, 72 , 37 , 12 , -19,  6  ] //Slope SW
	[ 299, 72 , 36 , 27 , -17, -2  ] //Slope NW
	[ 40 , 98 , 40 , 21 , -19, 5   ] //Cross over
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
}

spriteset(gfx_narrow_bridges, "gfx/TRACKS/narrow_gauge.png"){
	[ 0  , 72 , 40 , 21 , -19,  5  ] //North East
	[ 50 , 72 , 40 , 21 , -19,  5  ] //North West
	[ 259, 72 , 36 , 27 , -17, -2  ] //Slope NE
	[ 342, 72 , 37 , 12 , -18,  6  ] //Slope SE
	[ 383, 72 , 37 , 12 , -19,  6  ] //Slope SW
	[ 299, 72 , 36 , 27 , -17, -2  ] //Slope NW
	[ 40 , 98 , 40 , 21 , -19, 5   ] //Cross over
}

spriteset(gfx_narrow_tunnels, "gfx/TRACKS/narrow_gauge.png"){
	[ 0  , 72 , 40 , 21 , -19,  5  ] //North East
	[ 50 , 72 , 40 , 21 , -19,  5  ] //North West
	[ 0  , 72 , 40 , 21 , -19,  5  ] //North East
	[ 50 , 72 , 40 , 21 , -19,  5  ] //North West
}

spriteset(gfx_narrow_level_crossing, "gfx/TRACKS/narrow_gauge.png"){
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
	[ 0  , 72 , 1  , 1  , 0  , 0   ] 
}

/*
spriteset(gfx_narrow_track_diag_y, "gfx/TRACKS/narrow_gauge.png"){}
spriteset(gfx_narrow_track_hori_s, "gfx/TRACKS/narrow_gauge.png"){}
spriteset(gfx_narrow_track_hori_n, "gfx/TRACKS/narrow_gauge.png"){}
spriteset(gfx_narrow_track_vert_l, "gfx/TRACKS/narrow_gauge.png"){}
spriteset(gfx_narrow_track_vert_r, "gfx/TRACKS/narrow_gauge.png"){}
*/


item(FEAT_RAILTYPES, narrow_rail, 5) {
	property {
		label                     : "NAAN" ;
		name                      : string(STR_NAAN_NAME) ;
		menu_text                 : string(STR_NAAN_NAME) ;
		build_window_caption      : string(STR_NAAN_BUILD_NAME) ;
		autoreplace_text          : string(STR_NAAN_REPLACE_NAME) ;
		new_engine_text           : string(STR_NAAN_NEW_TRAIN) ;
		compatible_railtype_list  : ["NAAN", "NRGL"] ;
		powered_railtype_list     : ["NAAN", "NRGL"] ;
		curve_speed_multiplier    : 1 ;
		station_graphics          : RAILTYPE_STATION_NORMAL ;
		construction_cost         : 40 ;
		speed_limit               : 50 mph ;
		acceleration_model        : ACC_MODEL_RAIL ;
		railtype_flags            : bitmask(RAILTYPE_FLAG_NO_LEVEL_CROSSING) ;
		//introduction_date         : date(1869,1,1) ;
	}
	graphics {
		track_overlay   : gfx_narrow_track ;
		underlay        : gfx_narrow_trackbed ;
		bridge_surfaces : gfx_narrow_bridges ;
		tunnels         : gfx_narrow_tunnels ;
		level_crossings : gfx_narrow_level_crossing ;
		//depots          : 
		//fences          : 
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/Mk1.pnml" 1
spriteset(spriteset_Mk1_lined, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(0, 25)
}

spriteset(spriteset_Mk1_lined_brake, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(179, 25)
}

spriteset(spriteset_Mk1_2_tone, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(0, 50)
}

spriteset(spriteset_Mk1_2_tone_brake, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(179, 50)
}

spriteset(spriteset_Mk1_nse, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(0, 75)
}

spriteset(spriteset_Mk1_nse_brake, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(179, 75)
}

spriteset(spriteset_Mk1_rr, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(0, 100)
}

spriteset(spriteset_Mk1_rr_brake, "gfx/WAGON/mark_1.png") {
	template_8_8_networker(179, 100)
}

//Purchase sprites

spriteset(spriteset_Mk1_lined_purchase, "gfx/WAGON/mark_1.png") {
	template_purchase(0, 138)
}

spriteset(spriteset_Mk1_2_tone_purchase, "gfx/WAGON/mark_1.png") {
	template_purchase(0, 151)
}

spriteset(spriteset_Mk1_nse_purchase, "gfx/WAGON/mark_1.png") {
	template_purchase(0, 164)
}

spriteset(spriteset_Mk1_rr_purchase, "gfx/WAGON/mark_1.png") {
	template_purchase(0, 177)
}

switch(FEAT_TRAINS, SELF, sw_Mk1_lined_brake_f, position_in_consist){
	0: spriteset_Mk1_lined_brake;
	spriteset_Mk1_lined;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_lined_brake, position_in_consist_from_end){
	0: spriteset_Mk1_lined;
	sw_Mk1_lined_brake_f;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_2_tone_brake_f, position_in_consist){
	0: spriteset_Mk1_2_tone_brake;
	spriteset_Mk1_2_tone;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_2_tone_brake, position_in_consist_from_end){
	0: spriteset_Mk1_2_tone;
	sw_Mk1_2_tone_brake_f;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_nse_brake_f, position_in_consist){
	0: spriteset_Mk1_nse_brake;
	spriteset_Mk1_nse;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_nse_brake, position_in_consist_from_end){
	0: spriteset_Mk1_nse;
	sw_Mk1_nse_brake_f;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_rr_brake_f, position_in_consist){
	0: spriteset_Mk1_rr_brake;
	spriteset_Mk1_rr;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_rr_brake, position_in_consist_from_end){
	0: spriteset_Mk1_rr;
	sw_Mk1_rr_brake_f;
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_lined, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_lined_brake;
}
 
random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_crimson_cream, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_2_tone_brake;
}
 
random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_blue_grey, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_2_tone_brake;
}
 
random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_nse, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_nse_brake;
}
 
random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_rr, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_rr_brake;
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_gfx_crest, TRIGGER_VEHICLE_SERVICE){
	1 : sw_Mk1_lined_brake;
	1 : sw_Mk1_2_tone_brake;
}

random_switch(FEAT_TRAINS, PARENT, sw_mk1_gfx_sectorisation){
	1 : sw_Mk1_nse_brake;
	1 : sw_Mk1_rr_brake;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_auto_livery_decider, current_year){
	1948 .. 1960:sw_mk1_gfx_crimson_cream;
	1961 .. 1966:sw_mk1_gfx_crest;
	1967 .. 1970:sw_mk1_gfx_blue_grey;
	1971 .. 1982:sw_mk1_gfx_blue_grey;
	1983 .. 1995:sw_mk1_gfx_sectorisation;
	return sw_mk1_gfx_lined;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_purchase, current_year){
	1948 .. 1960:spriteset_Mk1_2_tone_purchase;
	1961 .. 1966:spriteset_Mk1_lined_purchase;
	1967 .. 1970:spriteset_Mk1_2_tone_purchase;
	1971 .. 1982:spriteset_Mk1_2_tone_purchase;
	1983 .. 1995:spriteset_Mk1_nse_purchase;
	return spriteset_Mk1_lined_purchase;
}

//Selected liveries

switch(FEAT_TRAINS, SELF, sw_Mk1_manual_livery_decider, cargo_subtype){
	0:sw_mk1_gfx_crimson_cream;
	1:sw_mk1_gfx_lined;
	2:sw_mk1_gfx_blue_grey;
	3:sw_mk1_gfx_nse;
	4:sw_mk1_gfx_rr;
	5:sw_mk1_gfx_lined;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_livery_choice_decider, livery_choice){
	1 : sw_Mk1_manual_livery_decider; 
	sw_Mk1_auto_livery_decider;
}

//Sprite stacking
switch(FEAT_TRAINS, SELF, sw_Mk1_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_Mk1_livery_choice_decider;
}

//Cargo refit text
switch(FEAT_TRAINS, SELF, sw_Mk1_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_CRIMSON_CREAM);
	1 : string(STR_LIVERY_MAROON);
	2 : string(STR_LIVERY_BRBLUE);
	3 : string(STR_LIVERY_NSE);
	4 : string(STR_LIVERY_REG_RAILWAYS);
	5 : string(STR_LIVERY_WCRC);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_refit_text_decider, livery_choice){
	1 : sw_Mk1_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_crimson_cream, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_maroon, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_br_blue, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_nse, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_rr, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE);
}

random_switch(FEAT_TRAINS, SELF, sw_mk1_colour_wcrc, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, PARENT, sw_mk1_colour_sectorisation){
	dependent : sw_mk1_gfx_sectorisation;
	1 : sw_mk1_colour_nse;
	1 : sw_mk1_colour_rr;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_auto_colour_decider, current_year){
	1948 .. 1960:sw_mk1_colour_crimson_cream;
	1961 .. 1966:sw_mk1_colour_maroon;
	1967 .. 1970:sw_mk1_colour_br_blue;
	1971 .. 1982:sw_mk1_colour_br_blue;
	1983 .. 1995:sw_mk1_colour_sectorisation;
	return sw_mk1_colour_wcrc;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_manual_colour_decider, cargo_subtype){
	0 : sw_mk1_colour_crimson_cream;
	1 : sw_mk1_colour_maroon;
	2 : sw_mk1_colour_br_blue;
	3 : sw_mk1_colour_nse;
	4 : sw_mk1_colour_rr;
	5 : sw_mk1_colour_wcrc;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_Mk1_livery_choice_colour_decider, livery_choice){
	1 : sw_Mk1_manual_colour_decider; 
	sw_Mk1_auto_colour_decider;
}

/*switch(FEAT_TRAINS, PARENT, sw_Mk1_colour_mapping_by_train, vehicle_id){
	1 : 
	sw_Mk1_livery_choice_colour_decider;
}*/

switch(FEAT_TRAINS, SELF, sw_Mk1_colour_mapping, colour_scheme_1){
	1 : sw_Mk1_livery_choice_colour_decider;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_Mk1, 9010) {
	property {
		name: 							string(STR_NAME_MK1);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1953, 1, 1);
		model_life:						25;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					29;
		cost_factor:					35;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							35 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					CB_RESULT_ATTACH_ALLOW;
	default:							sw_Mk1_default;
	colour_mapping:						sw_Mk1_colour_mapping;
	cargo_subtype_text:					sw_Mk1_refit_text_decider;
	purchase:							sw_Mk1_purchase;
}
}

/*item (FEAT_TRAINS, item_Mk1_mail, 9011) {
	property {
		name: 							string(STR_NAME_MK2_MAIL);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1953, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_MAIL;
		cargo_allow_refit:				[MAIL];
		loading_speed:					29;
		cost_factor:					20;
		running_cost_factor:			0;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							35 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					CB_RESULT_ATTACH_ALLOW;
	colour_mapping:						return 0;
}
}*/
# 1 "rukts.pnml" 2
# 1 "src/WAGON/Mk2.pnml" 1
//Mark 2

/*
	[x+85,y,8,23,-3,-10] //South
	[x+95,y,18,15,-12,-8] //South West
	[x+115,y,33,13,-17,-9] //West
	[x+150,y,18,15,-3,-8] //North West
*/


//Templates

template template_Mk2_single(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}

template template_Mk2_double(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
}

template template_Mk2_double_reverse(x,y){
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}


//Spritesets

spriteset(gfx_mk2_brblue_f_tso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,0)}
spriteset(gfx_mk2_brblue_f_bso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,25)}
spriteset(gfx_mk2_brblue_f_bso_reverse     , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_mk2_brblue_a_tso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,50)}
spriteset(gfx_mk2_brblue_a_bso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,75)}
spriteset(gfx_mk2_brblue_a_bso_reverse     , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_mk2_intercity_f_tso          , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,100)}
spriteset(gfx_mk2_intercity_f_bso          , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,125)}
//spriteset(gfx_mk2_intercity_f_dbso         , "gfx/WAGON/mark_2_dbso.png"){template_Mk2_double(0,0)}
spriteset(gfx_mk2_intercity_f_bso_reverse  , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,125)}
spriteset(gfx_mk2_regional_a_tso           , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,150)}
spriteset(gfx_mk2_regional_a_bso           , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,175)}
spriteset(gfx_mk2_regional_a_bso_reverse   , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,175)}
spriteset(gfx_mk2_nse_a_tso        		   , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,350)}
spriteset(gfx_mk2_nse_a_bso        		   , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,375)}
spriteset(gfx_mk2_nse_a_bso_reverse		   , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,375)}
spriteset(gfx_mk2_virgin_f_tso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,200)}
spriteset(gfx_mk2_virgin_f_bso             , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,225)}
spriteset(gfx_mk2_virgin_f_bso_reverse     , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,225)}
spriteset(gfx_mk2_generic_a_tso            , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,250)}
spriteset(gfx_mk2_generic_a_bso            , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,275)}
spriteset(gfx_mk2_generic_a_bso_reverse    , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,275)}
spriteset(gfx_mk2_directrail_f_tso         , "gfx/WAGON/mark_2_2.png"){template_Mk2_single(0,300)}
spriteset(gfx_mk2_directrail_f_bso         , "gfx/WAGON/mark_2_2.png"){template_Mk2_double(0,325)}
//spriteset(gfx_mk2_directrail_f_dbso        , "gfx/WAGON/mark_2_dbso.png"){template_Mk2_double(0,25)}
spriteset(gfx_mk2_directrail_f_bso_reverse , "gfx/WAGON/mark_2_2.png"){template_Mk2_double_reverse(0,325)}

spriteset(gfx_mk2_purchase_brblue          , "gfx/WAGON/mark_2_2.png"){template_purchase(89,50)}
spriteset(gfx_mk2_purchase_regional        , "gfx/WAGON/mark_2_2.png"){template_purchase(89,150)}
spriteset(gfx_mk2_purchase_virgin          , "gfx/WAGON/mark_2_2.png"){template_purchase(89,200)}
spriteset(gfx_mk2_purchase_directrail      , "gfx/WAGON/mark_2_2.png"){template_purchase(89,300)}


//Switches


//Graphics Switches

//Mark 2a


switch(FEAT_TRAINS, SELF, sw_mk2a_brblue_front, position_in_vehid_chain){ 0 : gfx_mk2_brblue_a_bso ; gfx_mk2_brblue_a_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2a_brblue_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_brblue_a_bso_reverse ; sw_mk2a_brblue_front ;}

switch(FEAT_TRAINS, SELF, sw_mk2a_regional_front, position_in_vehid_chain){ 0 : gfx_mk2_regional_a_bso ; gfx_mk2_regional_a_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2a_regional_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_regional_a_bso_reverse ; sw_mk2a_regional_front ;}

switch(FEAT_TRAINS, SELF, sw_mk2a_nse_front, position_in_vehid_chain){ 0 : gfx_mk2_nse_a_bso ; gfx_mk2_nse_a_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2a_nse_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_nse_a_bso_reverse ; sw_mk2a_nse_front ;}


random_switch(FEAT_TRAINS, SELF, sw_mk2a_brblue    , TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2a_brblue_back ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2a_regional  , TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2a_regional_back ;}

switch(FEAT_TRAINS, SELF, sw_mk2a_livery_decider, current_year){
	1967 .. 1970         : sw_mk2a_brblue ;
	1971 .. 1982     : sw_mk2a_brblue ;
	1983 .. 1995  : sw_mk2a_regional ;
	1996 .. 2004 : sw_mk2a_regional ;
	sw_mk2a_brblue ;
}


//Mark 2f


switch(FEAT_TRAINS, SELF, sw_mk2f_brblue_front, position_in_vehid_chain){ 0 : gfx_mk2_brblue_f_bso_reverse ; gfx_mk2_brblue_f_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2f_brblue_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_brblue_f_bso ; sw_mk2f_brblue_front ;}

switch(FEAT_TRAINS, SELF, sw_mk2f_intercity_front, position_in_vehid_chain){ 0 : gfx_mk2_intercity_f_bso_reverse ; gfx_mk2_intercity_f_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2f_intercity_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_intercity_f_bso ; sw_mk2f_intercity_front ;}
//switch(FEAT_TRAINS, SELF, sw_mk2f_intercity_rear, position_in_consist_from_end){ 0 : gfx_mk2_intercity_f_dbso ; sw_mk2f_intercity_back ; }

switch(FEAT_TRAINS, SELF, sw_mk2f_virgin_front, position_in_vehid_chain){ 0 : gfx_mk2_virgin_f_bso_reverse ; gfx_mk2_virgin_f_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2f_virgin_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_virgin_f_bso ; sw_mk2f_virgin_front ;}

switch(FEAT_TRAINS, SELF, sw_mk2f_directrail_front, position_in_vehid_chain){ 0 : gfx_mk2_directrail_f_bso_reverse ; gfx_mk2_directrail_f_tso ;}
switch(FEAT_TRAINS, SELF, sw_mk2f_directrail_back, (position_in_vehid_chain_from_end == 0 && count_veh_id(9025) == 0)){ 1 : gfx_mk2_directrail_f_bso ; sw_mk2f_directrail_front ;}
//switch(FEAT_TRAINS, SELF, sw_mk2f_directrail_rear, position_in_consist_from_end){ 0 : gfx_mk2_directrail_f_dbso ; sw_mk2f_directrail_back ; }


random_switch(FEAT_TRAINS, SELF, sw_mk2f_brblue    , TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2f_brblue_back ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2f_intercity , TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2f_intercity_back ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2f_virgin    , TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2f_virgin_back ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2f_directrail, TRIGGER_VEHICLE_SERVICE){ 1 : sw_mk2f_directrail_back ;}

switch(FEAT_TRAINS, SELF, sw_mk2f_livery_decider, current_year){
	1967 .. 1970        : sw_mk2f_brblue ;
    1971..1978     : sw_mk2f_brblue ;
	1979..1982     : sw_mk2f_intercity ;
	1983 .. 1995 : sw_mk2f_intercity ;
	1996 .. 2004   : sw_mk2f_virgin ;
	2005 .. 4096   : sw_mk2f_directrail ;
	sw_mk2f_intercity ;
}


switch(FEAT_TRAINS, SELF, sw_mk2_type_decider_2, current_year){
	2005 .. 4096 : sw_mk2f_livery_decider ;
	sw_mk2a_livery_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_mk2_type_decider_1, vehicle_type_id){
	87 : sw_mk2f_livery_decider ;
	sw_mk2_type_decider_2 ;
}


//Manual livery decider

switch(FEAT_TRAINS, SELF, sw_mk2_livery_decider, cargo_subtype){
	0: sw_mk2a_brblue_back ;
	1: sw_mk2f_brblue_back ;
	2..3: sw_mk2f_intercity_back ;
	4: sw_mk2a_regional_back ;
	5: sw_mk2a_nse_back ;
	6: sw_mk2f_virgin_back ;
	7: sw_mk2f_directrail_back ;
	sw_mk2a_brblue_back ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_livery_choice_decider, livery_choice){
	1 : sw_mk2_livery_decider ; 
	sw_mk2_type_decider_1 ;
}


//Sprite stacking
switch(FEAT_TRAINS, SELF, sw_mk2_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_mk2_livery_choice_decider;
}




//Cargo refit text
switch(FEAT_TRAINS, SELF, sw_mk2_refit_text, cargo_subtype){
	0 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2A))) ;
	1 : return(string(STR_LIVERY_BRBLUE_SUBTYPE,string(STR_NAME_MK2F))) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : string(STR_LIVERY_BR_SCOTRAIL) ;
	4 : string(STR_LIVERY_REG_RAILWAYS) ;
	5 : string(STR_LIVERY_NSE) ;
	6 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	7 : string(STR_LIVERY_DRS) ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_refit_text_decider, livery_choice){
	1 : sw_mk2_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_mk2_purchase, current_year){
	1983 .. 1995  : gfx_mk2_purchase_regional ;
	1996 .. 2004 : gfx_mk2_purchase_virgin ;
	2005 .. 4096 : gfx_mk2_purchase_directrail ;
	gfx_mk2_purchase_brblue ;
}


//Colour mapping

random_switch(FEAT_TRAINS, SELF, sw_mk2_brblue_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2_random_sectorised_colourmapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_mk2_random_privatised_colourmapping){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ; 2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ; }

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_auto_a, current_year){
	1967 .. 1970         : sw_mk2_brblue_colour_mapping ;
	1971 .. 1982     : sw_mk2_brblue_colour_mapping ;
	1983 .. 1995  : sw_mk2_random_sectorised_colourmapping ;
	1996 .. 2004 : sw_mk2_random_privatised_colourmapping ;
	sw_mk2_brblue_colour_mapping ;
}


random_switch(FEAT_TRAINS, SELF, sw_mk2_intercity_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; }
random_switch(FEAT_TRAINS, SELF, sw_mk2_virgin_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ; }
random_switch(FEAT_TRAINS, SELF, sw_mk2_directrail_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ; }

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_auto_f, current_year){
	1967 .. 1970         : sw_mk2_brblue_colour_mapping ;
    1971..1978     : sw_mk2_brblue_colour_mapping ;
	1979..1982     : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
    1983 .. 1995  : sw_mk2_intercity_colour_mapping ;
    1996 .. 2004 : sw_mk2_virgin_colour_mapping ;
    2005 .. 4096 : sw_mk2_directrail_colour_mapping ;
	sw_mk2_intercity_colour_mapping ;
}


switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_auto_checker_two, current_year){
	2005 .. 4096 : sw_mk2_colour_mapping_auto_f ;
	sw_mk2_colour_mapping_auto_a ;
}

switch(FEAT_TRAINS, PARENT, sw_mk2_colour_mapping_auto_checker_one, vehicle_type_id){
	87 : sw_mk2_colour_mapping_auto_f ;
	sw_mk2_colour_mapping_auto_checker_two ;
}


switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_manual, cargo_subtype){
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	7 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_manual_check, livery_choice){
	1 : sw_mk2_colour_mapping_manual ;
	sw_mk2_colour_mapping_auto_checker_one ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_colour_mapping_decider, colour_scheme_1){
	1 : sw_mk2_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Purchase menu colour mapping

switch(FEAT_TRAINS, SELF, sw_mk2_purchase_colours, current_year){
	1983 .. 1995  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1996 .. 2004 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	2005 .. 4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk2_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mk2_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item

item (FEAT_TRAINS, item_Mk2, 9020){
	property{
		name						   : string(STR_NAME_MK2) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1963, 1, 1) ;
		model_life                     : 45 ;
		vehicle_life                   : 50 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 38 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 80 ;
		loading_speed                  : 20 ;
		track_type                     : RAIL ;
		speed                          : 100 mph ;
		power                          : 0 hp ;
		weight                         : 34 ton ;
	}
	graphics{
		default                 : sw_mk2_default ;
		purchase                : sw_mk2_purchase ;
		purchase_colour_mapping : sw_mk2_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk2_refit_text_decider ;
		colour_mapping          : sw_mk2_colour_mapping_decider ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/MK3.pnml" 1
//Mark 3 Carriage

/*

Liveries done:
BR Blue
Intercity
Virgin
Midland Mainline (Blue)
EMT
First Fag
First Barbie
FGW
GWR

Liveries to do:
Scotrail
ATW
One
Virgin Pretendolino
Greater Anglia
Network Rail
Chiltern Railways

*/

//Spritesets

spriteset(gfx_mk3_generic             , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,  0) }
spriteset(gfx_mk3_brblue              , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 25) }
spriteset(gfx_mk3_intercity           , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 50) }
spriteset(gfx_mk3_virgin              , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0, 75) }
spriteset(gfx_mk3_first_fag           , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,100) }
spriteset(gfx_mk3_mml                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,125) }
spriteset(gfx_mk3_first_barbie        , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,150) }
spriteset(gfx_mk3_fgw                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,175) }
spriteset(gfx_mk3_gwr                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,200) }
spriteset(gfx_mk3_emt                 , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,225) }
spriteset(gfx_mk3_atw_exec            , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,250) }
spriteset(gfx_mk3_chiltern            , "gfx/WAGON/mark_3.png"){ template_Mk2_single(  0,275) }
spriteset(gfx_mk3_first_scotrail      , "gfx/WAGON/mark_3.png"){ template_Mk2_single(170,150) }

spriteset(gfx_mk3_purchase_brblue     , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 25) }
spriteset(gfx_mk3_purchase_intercity  , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 50) }
spriteset(gfx_mk3_purchase_virgin     , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89, 75) }
spriteset(gfx_mk3_purchase_mml        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,125) }
spriteset(gfx_mk3_purchase_fgw        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,175) }
spriteset(gfx_mk3_purchase_emt        , "gfx/WAGON/mark_3.png"){ template_purchase  ( 89,225) }

spriteset(gfx_mk3_windows_normal      , "gfx/WAGON/mark_3.png"){ template_Mk2_single(180, 25)         }
spriteset(gfx_mk3_windows_sleeper     , "gfx/WAGON/mark_3.png"){ template_Mk2_double(180, 75)         }
spriteset(gfx_mk3_windows_sleeper_rev , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(180, 75) }
spriteset(gfx_mk3_windows_buffet      , "gfx/WAGON/mark_3.png"){ template_Mk2_double(180, 50)         }
spriteset(gfx_mk3_windows_buffet_rev  , "gfx/WAGON/mark_3.png"){ template_Mk2_double_reverse(180, 50) }

//Graphics switches

//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_auto, current_year){
	1971 .. 1982        : gfx_mk3_brblue ;
	1983 .. 1995 : gfx_mk3_intercity ;
	2005..2009        : gfx_mk3_mml ;
	2010..2016        : gfx_mk3_emt ;
	gfx_mk3_virgin ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_manual, cargo_subtype){
	0      : gfx_mk3_brblue ;
	1      : gfx_mk3_intercity ;
	3      : gfx_mk3_mml ;
	4      : gfx_mk3_emt ;
	5..6   : gfx_mk3_first_fag ;
	7..8   : gfx_mk3_first_barbie ;
	9..10  : gfx_mk3_fgw ;
	11..12 : gfx_mk3_gwr ;
	13     : gfx_mk3_first_scotrail ;
	14     : gfx_mk3_generic ;
	15     : gfx_mk3_atw_exec ;
	16     : gfx_mk3_chiltern ;
	gfx_mk3_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_manual_check, livery_choice){
	1 : sw_mk3_gfx_manual ;
	sw_mk3_gfx_auto ;
}


/*Windows switches

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_pos_check_rev, (position_in_consist - 1) > (num_vehs_in_consist / 2)){
	1 : gfx_mk3_windows_sleeper_rev ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_pos_check, (position_in_consist - 1) <= (num_vehs_in_consist / 2)){
	1 : gfx_mk3_windows_sleeper ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, PARENT, sw_mk3_sleeper_rev_check, vehicle_is_reversed){
	1 : sw_mk3_sleeper_pos_check_rev ;
	sw_mk3_sleeper_pos_check ;
}*/

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_manual, cargo_subtype){
	6      : gfx_mk3_windows_sleeper ;
	8      : gfx_mk3_windows_sleeper ;
	10     : gfx_mk3_windows_sleeper ;
	12..13 : gfx_mk3_windows_sleeper ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_sleeper_manual_check, livery_choice){
	1 : sw_mk3_sleeper_manual ;
	gfx_mk3_windows_normal ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_window, position_in_vehid_chain ){
	2 : gfx_mk3_windows_buffet ;
	sw_mk3_sleeper_manual_check ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_gfx_window_reverse, position_in_vehid_chain_from_end ){
	2 : gfx_mk3_windows_buffet_rev ;
	sw_mk3_sleeper_manual_check ;
}

switch(FEAT_TRAINS, PARENT, sw_mk3_gfx_window_reverse_check, vehicle_is_reversed){
	1 : sw_mk3_gfx_window_reverse ;
	sw_mk3_gfx_window ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_mk3_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_mk3_gfx_manual_check ;
	2 : sw_mk3_gfx_window_reverse_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_mk3_refit_text, cargo_subtype){
	0  : string(STR_LIVERY_BRBLUE) ;
	1  : string(STR_LIVERY_INTERCITY) ;
	2  : string(STR_LIVERY_VIRGIN_TRAINS) ;
	3  : string(STR_LIVERY_MIDLAND_MAINLINE_BLUE) ;
	4  : string(STR_LIVERY_EMT) ;
	5  : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	6  : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_SLEEPER)) ;
	7  : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_EMPTY)) ;
	8  : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_SLEEPER)) ;
	9  : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	10 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_SLEEPER)) ;
	11 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	12 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_SLEEPER)) ;
	13 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_SLEEPER)) ;
	14 : string(STR_LIVERY_NETWORK_RAIL) ;
	15 : string(STR_LIVERY_ATW_EXEC) ;
	16 : string(STR_LIVERY_CHILTERN) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_refit_text_check, livery_choice){
	1 : sw_mk3_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite switches

switch(FEAT_TRAINS, SELF, sw_mk3_purchase, current_year){
	1971 .. 1982        : gfx_mk3_purchase_brblue ;
	1983 .. 1995 : gfx_mk3_purchase_intercity ;
	2005..2016        : gfx_mk3_purchase_mml ;
	gfx_mk3_purchase_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_purchase_colours, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2005..2016        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_mk3_purchase_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}



//Colour mapping


switch(FEAT_TRAINS, SELF, sw_mk3_colours_auto, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	2005..2009        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2010..2016        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_manual, cargo_subtype){
	0      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //BR Blue
	1      : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;          //Intercity
	3      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;     //MML
	4      : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;      //EMT
	5..6   : palette_2cc(COLOUR_PALE_GREEN, COLOUR_YELLOW) ;  //First Fag
	7..8   : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;   //First Barbie
	9..10  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;     //First Great Western
	11..12 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;   //GWR
	13     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //First Barbie
	14     : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;         //Network Rail
	15     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	16     : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;              //Virgin
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_manual_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_mk3_colours_2cc_check, colour_scheme_1){
	1 : sw_mk3_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item (FEAT_TRAINS, item_mk3, 9030) {
	property {
		name: 							string(STR_NAME_Mk3);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1975, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES ;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					29;
		cost_factor:					38;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							125 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					90;
		weight:							33 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
		default                 : sw_mk3_sprite_stack ;
		purchase                : sw_mk3_purchase ;
		purchase_colour_mapping : sw_mk3_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
		colour_mapping          : sw_mk3_colours_2cc_check ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/MU90.pnml" 1
spriteset(spriteset_MU90_worker_nse_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 0)}

spriteset(spriteset_MU90_worker_nse_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 25)}

spriteset(spriteset_MU90_worker_cnx_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 225)}

spriteset(spriteset_MU90_worker_cnx_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 250)}

spriteset(spriteset_MU90_worker_seb_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 225)}

spriteset(spriteset_MU90_worker_seb_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 250)}

spriteset(spriteset_MU90_worker_sey_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_MU90_worker_sey_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 475)}

spriteset(spriteset_MU90_worker_nse_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 500)}

spriteset(spriteset_MU90_worker_cnx_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 525)}

spriteset(spriteset_MU90_worker_sey_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 550)}

spriteset(spriteset_MU90_worker_seb_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_purchase(259, 575)}


switch(FEAT_TRAINS, SELF, sw_MU90_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_MU90_worker_nse_t;
	1996 .. 2005: spriteset_MU90_worker_cnx_t;
	2006 .. 2012: spriteset_MU90_worker_sey_t;
	spriteset_MU90_worker_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_MU90_purchase, current_year){
	1983 .. 1995: spriteset_MU90_worker_nse_purchase;
	1996 .. 2005: spriteset_MU90_worker_cnx_purchase;
	2006 .. 2012: spriteset_MU90_worker_sey_purchase;
	spriteset_MU90_worker_seb_purchase;
}

switch(FEAT_TRAINS, PARENT, sw_MU90_coupling_restrictions, vehicle_type_id) {
	700: return CB_RESULT_ATTACH_ALLOW;
	325: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_MU90_NO_COUPLE);
}

item (FEAT_TRAINS, item_MU90, 9090) {
	property {
		name: 							string(STR_NAME_MU90);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						VEHICLE_NEVER_EXPIRES;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR, MAIL];
		loading_speed:					29;
		cost_factor:					58;
		running_cost_factor:			34;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_TILT);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							40 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							8;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
	}
	graphics {
	can_attach_wagon:					sw_MU90_coupling_restrictions;
	default: 							sw_MU90_passenger_livery_decider_t;
	purchase:							sw_MU90_purchase;
}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/Wagon_a.pnml" 1
//Templates
template template_wagon_a(x,y){
	[x+0,y,8,14,-3,-11]
	[x+10,y,11,12,-4,-9]
	[x+23,y,12,12,3,-8]
	[x+37,y,11,12,4,-4]
	[x+0,y,8,14,-3,-3]
	[x+10,y,11,12,-14,-4]
	[x+23,y,12,12,-16,-8]
	[x+37,y,11,12,-6,-9]
}

spriteset(spriteset_wagon_a, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 0)}
spriteset(spriteset_wagon_a_load_full, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 15)}
spriteset(spriteset_wagon_a_load_med, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 30)}
spriteset(spriteset_wagon_a_load_low, "gfx/WAGON/wagon_a.png") {template_wagon_a(0, 45)}

spriteset(spriteset_wagon_a_purchase, "gfx/WAGON/wagon_a.png") {template_purchase_short(0, 60)}

switch(FEAT_TRAINS,SELF, sw_wagon_a_load,cargo_count){
	0: spriteset_wagon_a;
	1..3: spriteset_wagon_a_load_low;
	4..9: spriteset_wagon_a_load_med;
	10..2000: spriteset_wagon_a_load_full;
}

switch(FEAT_TRAINS, SELF, sw_wagon_a_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : spriteset_wagon_a ;
	1 : sw_wagon_a_load;
}

item (FEAT_TRAINS, item_WAGON_A, 10000) {
	property {
		name: 							string(STR_NAME_WAGON_A);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_BULK;
		non_refittable_cargo_classes:	bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE);
		cargo_allow_refit:				[COAL, GRAI, IORE, WHEA, CORE, FRUT, MAIZ, AORE, CERA, CERE, CMNT, FERT, LIME, OLSD, POTA, SAND, GRVL, MNSP, PHOS, PORE, COPR, SUGR];
		loading_speed:					10;
		cost_factor:					2;
		running_cost_factor:			5;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							70 mph;
		misc_flags:						bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							0 hp;
		running_cost_base:				RUNNING_COST_NONE;
		dual_headed:					0;
		default_cargo_type:				COAL;
		cargo_capacity:					12;
		weight:							5 ton;
		tractive_effort_coefficient:	0.07;
		air_drag_coefficient:			0.08;
		length:							3;
		bitmask_vehicle_info:			0;
	}
	graphics {
	default: 							sw_wagon_a_spritestack;
	purchase:							spriteset_wagon_a_purchase;
}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/Flask.pnml" 1
//Nuclear flask

//Templates

template template_flask(x,y){
	[x+0  , y, 8 , 18, -3 , -10] // NORTH	
	[x+10 , y, 16, 14, -10, -8 ] // NORTH EAST
	[x+28 , y, 25, 10, -9,  -5 ] // EAST
	[x+55 , y, 16, 14, -1,  -6 ] // SOUTH EAST
	[x+0  , y, 8 , 18, -3 , -6 ] // SOUTH
	[x+10 , y, 16, 14, -14, -6 ] // SOUTH WEST
	[x+28 , y, 25, 10, -17, -5 ] // WEST
	[x+55 , y, 16, 14, -5,  -8 ] // NORTH WEST
}

template template_flask_double(x,y){
	[x+0  , y, 8 , 18, -3 , -10] // NORTH	  
	[x+10 , y, 16, 14, -10, -8 ] // NORTH EAST
	[x+28 , y, 25, 10, -9,  -5 ] // EAST
	[x+55 , y, 16, 14, -1,  -6 ] // SOUTH EAST
	[x+73 , y, 8 , 18, -3 , -6 ] // SOUTH
	[x+83 , y, 16, 14, -14, -6 ] // SOUTH WEST
	[x+101, y, 25, 10, -17, -5 ] // WEST
	[x+128, y, 16, 14, -5,  -8 ] // NORTH WEST
}

//Spritesets
spriteset(gfx_flask           , "gfx/WAGON/flask.png"){template_flask(157,20)}
spriteset(gfx_flask_container , "gfx/WAGON/flask.png"){template_flask(157,40)}
spriteset(gfx_flask_light     , "gfx/WAGON/flask.png"){template_flask_double(157,60)}
spriteset(gfx_flask_purchase  , "gfx/WAGON/flask.png"){template_purchase_short(73,0)}

switch(FEAT_TRAINS, SELF, sw_flask_container_decider, cargo_count > 0){
	1 : gfx_flask_container ;
}

switch(FEAT_TRAINS, SELF, sw_flask_light_decider, position_in_consist_from_end){
	0 : gfx_flask_light ;
}


switch(FEAT_TRAINS, SELF, sw_flask_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : gfx_flask ;
	1 : sw_flask_container_decider ;
	2 : sw_flask_light_decider ;
}

switch(FEAT_TRAINS, SELF, sw_flask_colours_auto, current_year){
	1960..1995 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_WHITE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_flask_2cc_check, colour_scheme_1){
	0 : palette_2cc(company_colour1, company_colour2) ;
	sw_flask_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_flask_weight, cargo_count > 0){
	1 : 55 ;
	10 ;
}

item (FEAT_TRAINS, flask_wagon, 10001){
	property{
		name                         : string(STR_NAME_FLASK) ;
		climates_available           : ALL_CLIMATES ;
		introduction_date            : date(1960,1,1) ;
		model_life                   : VEHICLE_NEVER_EXPIRES ;
		refittable_cargo_classes     : bitmask(CC_HAZARDOUS, CC_COVERED) ;
		non_refittable_cargo_classes : bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_BULK, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE) ;
		cargo_allow_refit            : [URAN, NWST, SULP] ;
		loading_speed                : 3 ;
		cost_factor                  : 8 ;
		running_cost_factor          : 15 ;
		running_cost_base            : RUNNING_COST_NONE ;
		sprite_id                    : SPRITE_ID_NEW_TRAIN ;
		speed                        : 75 mph ;
		misc_flags                   : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		refit_cost                   : 0 ;
		track_type                   : RAIL ;
		ai_special_flag              : AI_FLAG_CARGO ;
		power                        : 0 hp ;
		dual_headed                  : 0 ;
		default_cargo_type           : NWST ;
		cargo_capacity               : 10 ;
		weight                       : 20 ton ;
		length                       : 6 ;
	}
	graphics{
		default        : sw_flask_spritestack ;
		purchase       : gfx_flask_purchase ;
		colour_mapping : sw_flask_2cc_check ;
		//weight         : sw_flask_weight ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/intermodal.pnml" 1
//Intermodal container transport

//Spritesets

spriteset(gfx_container_empty          , "gfx/WAGON/intermodal.png"){ template_Mk2_single(  0,125) }
spriteset(gfx_container_double         , "gfx/WAGON/intermodal.png"){ template_Mk2_double(  0,150) }
spriteset(gfx_container_double_rev     , "gfx/WAGON/intermodal.png"){ template_Mk2_double_reverse(  0,150) }
spriteset(gfx_container_double_full    , "gfx/WAGON/intermodal.png"){ template_Mk2_double(  0,175) }
spriteset(gfx_container_double_full_rev, "gfx/WAGON/intermodal.png"){ template_Mk2_double_reverse(  0,175) }
spriteset(gfx_container_single         , "gfx/WAGON/intermodal.png"){ template_Mk2_single( 0,200) }

spriteset(gfx_container_purchase   , "gfx/WAGON/intermodal.png"){ template_purchase( 89,125) }


//Graphics switches

//Cargo count checks

switch(FEAT_TRAINS, PARENT, sw_container_double_rev_check, vehicle_is_reversed){
	1 : gfx_container_double_rev ;
	gfx_container_double ;
}

switch(FEAT_TRAINS, PARENT, sw_container_double_full_rev_check, vehicle_is_reversed){
	1 : gfx_container_double_full_rev ;
	gfx_container_double_full ;
}

switch(FEAT_TRAINS, SELF, sw_container_double_load_check, cargo_count){
	0     : gfx_container_empty ;
	1..15  : sw_container_double_rev_check ;
	gfx_container_double_full ;
}

switch(FEAT_TRAINS, SELF, sw_container_single_load_check, cargo_count){
	0 : gfx_container_empty ;
	gfx_container_single ;
}


//Livery checks

random_switch(FEAT_TRAINS, SELF, sw_container_auto, TRIGGER_VEHICLE_UNLOAD_ALL){
	2 : sw_container_double_load_check ;
	1 : sw_container_single_load_check ;
}

switch(FEAT_TRAINS, SELF, sw_container_manual, cargo_subtype){
	1 : sw_container_single_load_check ;
	2 : sw_container_double_load_check ;
	sw_container_auto ;
}

switch(FEAT_TRAINS, SELF, sw_container_manual_check, livery_choice){
	1 : sw_container_manual ;
	sw_container_auto ;
}


//Colours

random_switch(FEAT_TRAINS, PARENT, sw_container_colours_single){
	2 : palette_1cc(COLOUR_DARK_BLUE) ;
	1 : palette_1cc(COLOUR_RED) ;
	1 : palette_1cc(COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_container_colours_double, TRIGGER_VEHICLE_UNLOAD_ALL){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_ORANGE) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_BLUE) ;
	1 : palette_2cc(COLOUR_WHITE, COLOUR_GREEN) ;
	1 : palette_2cc(COLOUR_GREEN, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_ORANGE, COLOUR_DARK_GREEN) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_GREY) ;
	1 : palette_2cc(COLOUR_CREAM, COLOUR_MAUVE) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_MAUVE, COLOUR_BLUE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

/*
COLOUR_MAUVE
COLOUR_CREAM
COLOUR_YELLOW
COLOUR_BLUE
COLOUR_GREY
*/



random_switch(FEAT_TRAINS, SELF, sw_container_colours_auto, TRIGGER_VEHICLE_UNLOAD_ALL){
	dependent : sw_container_auto ;
	2 : sw_container_colours_double ;
	1 : sw_container_colours_single ;
}

switch(FEAT_TRAINS, SELF, sw_container_colours_manual, cargo_subtype){
	1 : sw_container_colours_single ;
	2 : sw_container_colours_double ;
	sw_container_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_container_colours_manual_check, livery_choice){
	1 : sw_container_colours_manual ;
	sw_container_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_container_colours_2cc_check, colour_scheme_1){
	1 : sw_container_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_container_refit_text, cargo_subtype){
	0 : string(STR_CONTAINER_MIXED) ;
	1 : string(STR_CONTAINER_LARGE) ;
	2 : string(STR_CONTAINER_SMALL) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_container_refit_text_check, livery_choice){
	1 : sw_container_refit_text ;
	CB_RESULT_NO_TEXT ;
}


item (FEAT_TRAINS, item_container, 10002){
	property{
		name                         : string(STR_NAME_INTERMODAL) ;
		climates_available           : ALL_CLIMATES ;
		introduction_date            : date(1968,1,1) ;
		model_life                   : VEHICLE_NEVER_EXPIRES ;
		refittable_cargo_classes     : bitmask(CC_EXPRESS) ;
		non_refittable_cargo_classes : bitmask(CC_PASSENGERS, CC_MAIL, CC_ARMOURED, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_BULK, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE, CC_HAZARDOUS, CC_COVERED) ;
		cargo_allow_refit            : [GOOD, FOOD] ;
		loading_speed                : 5 ;
		cost_factor                  : 8 ;
		running_cost_factor          : 15 ;
		running_cost_base            : RUNNING_COST_NONE ;
		sprite_id                    : SPRITE_ID_NEW_TRAIN ;
		speed                        : 90 mph ;
		misc_flags                   : bitmask(TRAIN_FLAG_2CC) ;
		refit_cost                   : 0 ;
		track_type                   : RAIL ;
		ai_special_flag              : AI_FLAG_CARGO ;
		power                        : 0 hp ;
		dual_headed                  : 0 ;
		default_cargo_type           : GOOD ;
		cargo_capacity               : 30 ;
		weight                       : 25 ton ;
		length                       : 8 ;
	}
	graphics{
		default                 : sw_container_manual_check ;
		purchase                : gfx_container_purchase ;
		colour_mapping          : sw_container_colours_2cc_check ;
		cargo_subtype_text      : sw_container_refit_text_check ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/DBSO.pnml" 1
//DBSO Source


//Spritesets

spriteset(gfx_dbso_scotrail          , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,0)           }
spriteset(gfx_dbso_scotrail_rev      , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,0)   }
spriteset(gfx_dbso_intercity         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,25)          }
spriteset(gfx_dbso_intercity_rev     , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,25)  }
spriteset(gfx_dbso_directrail        , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,50)          }
spriteset(gfx_dbso_directrail_rev    , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,50)  }
spriteset(gfx_dbso_generic           , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,75)          }
spriteset(gfx_dbso_generic_rev       , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,75)  }
spriteset(gfx_dbso_brblue            , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(0,100)         }
spriteset(gfx_dbso_brblue_rev        , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double_reverse(0,100) }

spriteset(gfx_dbso_headlight         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(178,25)       }
spriteset(gfx_dbso_taillight         , "gfx/WAGON/mark_2_dbso.png"){ template_Mk2_double(178,0)        }


//Switches


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_dbso_scotrail_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_scotrail_rev ; gfx_dbso_scotrail ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_intercity_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_intercity_rev ; gfx_dbso_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_directrail_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_directrail_rev ; gfx_dbso_directrail ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_generic_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_generic_rev ; gfx_dbso_generic ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_brblue_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 40 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92)){ 1 : gfx_dbso_brblue_rev ; gfx_dbso_brblue ; }

//Automatic gfx

switch(FEAT_TRAINS, SELF, sw_dbso_auto, current_year){
	1971 .. 1982        : sw_dbso_brblue_rev_check ;
	1983 .. 1995 : sw_dbso_intercity_rev_check ;
	sw_dbso_directrail_rev_check ;
}

//Manual gfx

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_ee3, cargo_subtype){
	0..1 : sw_dbso_brblue_rev_check ;
	4    : sw_dbso_scotrail_rev_check ;
	12   : sw_dbso_generic_rev_check ;
	sw_dbso_directrail_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_br87, cargo_subtype){
	1..2 : sw_dbso_scotrail_rev_check ;
	4 : sw_dbso_generic_rev_check ;
	sw_dbso_brblue_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual_al6, cargo_subtype){
	2..4 : sw_dbso_intercity_rev_check ;
	7 : sw_dbso_generic_rev_check ;
	sw_dbso_brblue_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_manual, vehicle_type_id){
	37 : sw_dbso_manual_ee3 ;
	86 : sw_dbso_manual_al6 ;
	87 : sw_dbso_manual_br87 ;
	sw_dbso_brblue_rev_check ;
}

//Gfx selection decider

switch(FEAT_TRAINS, SELF, sw_dbso_manual_check, livery_choice){
	1 : sw_dbso_manual ;
	sw_dbso_auto ;
}


//Sprite stacking/headlights

switch(FEAT_TRAINS, SELF, sw_dbso_taillight_check, position_in_consist_from_end){
	0 : gfx_dbso_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_headlight_check, position_in_consist){
	0 : gfx_dbso_headlight ;
	sw_dbso_taillight_check ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dbso_manual_check ;
	1 : sw_dbso_headlight_check ;
}


//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_auto, current_year){
	1971 .. 1982        : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_colours_ee3, cargo_subtype){
	0..1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4    : palette_2cc(COLOUR_GREY, COLOUR_DARK_BLUE) ;
	12   : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_br87, cargo_subtype){
	1..2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	4 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_al6, cargo_subtype){
	2..4 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	7 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_manual, vehicle_type_id){
	37 : sw_dbso_colours_ee3 ;
	86 : sw_dbso_colours_al6 ;
	87 : sw_dbso_colours_br87 ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}



switch(FEAT_TRAINS, SELF, sw_dbso_colours_manual_check, livery_choice){
	1 : sw_dbso_colours_manual ;
	sw_dbso_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_colours_2cc_check, colour_scheme_1){
	1 : sw_dbso_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


/*Refit text

switch(FEAT_TRAINS, PARENT, sw_dbso_refit_scotrail   , STORE_TEMP(0, 0)){ string(STR_LIVERY_BR_SCOTRAIL) ;  }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_intercity  , STORE_TEMP(1, 0)){ string(STR_LIVERY_INTERCITY) ;    }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_networkrail, STORE_TEMP(2, 0)){ string(STR_LIVERY_NETWORK_RAIL) ; }
switch(FEAT_TRAINS, PARENT, sw_dbso_refit_drs        , STORE_TEMP(3, 0)){ string(STR_LIVERY_DRS) ;          }

switch(FEAT_TRAINS, PARENT, sw_dbso_refit_text, STORE_TEMP(cargo_subtype, 0)){
	0 : string(STR_LIVERY_BR_SCOTRAIL) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_NETWORK_RAIL) ;
	3 : string(STR_LIVERY_DRS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_refit_text_check, livery_choice){
	1 : sw_dbso_refit_text ;
	CB_RESULT_NO_TEXT ;
}
*/
# 1 "rukts.pnml" 2
# 1 "src/CODE/DVT.pnml" 1
//DVT Source


// | vehicle_type_id == 92)


/*

Liveries needed

Intercity
Virgin Trains
Greater Anglia  - !!
Arriva Trains Wales
Network Rail
Chiltern Railways  - !!

Mark 4

GNER
East Coast
Virgin East Coast

*/


//Spritesets

spriteset(gfx_dvt_generic       , "gfx/WAGON/dvt.png"){ template_Mk2_double(  0,  0)         }
spriteset(gfx_dvt_generic_rev   , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(  0,  0) }
spriteset(gfx_dvt_intercity     , "gfx/WAGON/dvt.png"){ template_Mk2_double(  0, 25)         }
spriteset(gfx_dvt_intercity_rev , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(  0, 25) }
spriteset(gfx_dvt_virgin        , "gfx/WAGON/dvt.png"){ template_Mk2_double(  0, 50)         }
spriteset(gfx_dvt_virgin_rev    , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(  0, 50) }
spriteset(gfx_dvt_atw_exec      , "gfx/WAGON/dvt.png"){ template_Mk2_double(  0, 75)         }
spriteset(gfx_dvt_atw_exec_rev  , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(  0, 75) }
spriteset(gfx_dvt_chiltern      , "gfx/WAGON/dvt.png"){ template_Mk2_double(  0,100)         }
spriteset(gfx_dvt_chiltern_rev  , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(  0,100) }

spriteset(gfx_dvt_taillights    , "gfx/WAGON/dvt.png"){ template_Mk2_double(259,  0)         }
spriteset(gfx_dvt_headlights    , "gfx/WAGON/dvt.png"){ template_Mk2_double_reverse(259, 25) }




//Switches


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_dvt_generic_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92 )){ 1 : gfx_dvt_generic_rev ; gfx_dvt_generic ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_intercity_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92 )){ 1 : gfx_dvt_intercity_rev ; gfx_dvt_intercity ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_virgin_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92 )){ 1 : gfx_dvt_virgin_rev ; gfx_dvt_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_atw_exec_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92 )){ 1 : gfx_dvt_atw_exec_rev ; gfx_dvt_atw_exec ; }
switch(FEAT_TRAINS, PARENT, sw_dvt_chiltern_rev_check, vehicle_is_reversed && (vehicle_type_id == 37 | vehicle_type_id == 68 | vehicle_type_id == 86 | vehicle_type_id == 87 | vehicle_type_id == 88 | vehicle_type_id == 92 )){ 1 : gfx_dvt_chiltern_rev ; gfx_dvt_chiltern ; }



//Automatix GFX

switch(FEAT_TRAINS, SELF, sw_dvt_auto, current_year){
	1983 .. 1995 : sw_dvt_intercity_rev_check ;
	2014..4096 : sw_dvt_chiltern_rev_check ;
	sw_dvt_virgin_rev_check ;
}


//Manual GFX

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_br87, cargo_subtype){
	1 : sw_dvt_intercity_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_al6, cargo_subtype){
	2 : sw_dvt_intercity_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_cl90, cargo_subtype){
	0..1 : sw_dvt_intercity_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_uklight, cargo_subtype){
	1 : sw_dvt_atw_exec_rev_check ;
	3 : sw_dvt_chiltern_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_ee3, cargo_subtype){
	10     : sw_dvt_atw_exec_rev_check ;
	11..12 : sw_dvt_generic_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual_abb92, cargo_subtype){
	0    : sw_dvt_intercity_rev_check ;
	1..2 : sw_dvt_atw_exec_rev_check ;
	3    : sw_dvt_generic_rev_check ;
	sw_dvt_virgin_rev_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_manual, vehicle_type_id){
	37 : sw_dvt_manual_ee3 ;
	68 : sw_dvt_manual_uklight ;
	86 : sw_dvt_manual_al6 ;
	87 : sw_dvt_manual_br87 ;
	90 : sw_dvt_manual_cl90 ;
	92 : sw_dvt_manual_abb92 ;
	sw_dvt_virgin_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_dvt_manual_check, livery_choice){
	1 : sw_dvt_manual ;
	sw_dvt_auto ;
}

//Sprite stacking & lights deciders

switch(FEAT_TRAINS, SELF, sw_dvt_taillight_check, position_in_consist_from_end){ 0 : gfx_dvt_taillights ; }

switch(FEAT_TRAINS, SELF, sw_dvt_headlight_check, position_in_consist){
	0 : gfx_dvt_headlights ;
	sw_dvt_taillight_check ;
}


switch(FEAT_TRAINS, SELF, sw_dvt_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dvt_manual_check ;
	1 : sw_dvt_headlight_check ;
}



//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_auto, current_year){
	1983 .. 1995 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2014..4096 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, PARENT, sw_dvt_colours_br87, cargo_subtype){
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_cl90, cargo_subtype){
	0..1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_al6, cargo_subtype){
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_uklight, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_ee3, cargo_subtype){
	10     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	11..12 : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_abb92, cargo_subtype){
	0    : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	3    : palette_2cc(COLOUR_YELLOW, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_manual, vehicle_type_id){
	37 : sw_dvt_colours_ee3 ;
	68 : sw_dvt_colours_uklight ;
	86 : sw_dvt_colours_al6 ;
	87 : sw_dvt_colours_br87 ;
	90 : sw_dvt_colours_cl90 ;
	92 : sw_dvt_colours_abb92 ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_dvt_colours_manual_check, livery_choice){
	1 : sw_dvt_colours_manual ;
	sw_dvt_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_colours_2cc, current_year){
	2014..4096 : palette_2cc(company_colour2, company_colour1) ; //Inverted company colours so that it works with the rest of the carriages
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_colours_2cc_check, colour_scheme_1){
	1 : sw_dvt_colours_manual_check ;
	sw_dvt_colours_2cc ;
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/Swindon_Type1.pnml" 1
//Swindon Type 1 "Teddy Bear"

//Spritesets

spriteset(gfx_swtype1_standard      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 25) } 
spriteset(gfx_swtype1_standard_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 25) } 
spriteset(gfx_swtype1_brll          , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 50) } 
spriteset(gfx_swtype1_brll_rev      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 50) } 
spriteset(gfx_swtype1_brblue        , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0, 75) } 
spriteset(gfx_swtype1_brblue_rev    , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0, 75) } 
spriteset(gfx_swtype1_brmrn         , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (  0,100) } 
spriteset(gfx_swtype1_brmrn_rev     , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(  0,100) } 

spriteset(gfx_swtype1_purchase, "gfx/DIESEL_LOCO/class_14.png"){ template_purchase_short(130, 25) } 

spriteset(gfx_swtype1_wheels_1      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (187,  0) } 
spriteset(gfx_swtype1_wheels_1_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(187,  0) } 
spriteset(gfx_swtype1_wheels_2      , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8    (187, 25) } 
spriteset(gfx_swtype1_wheels_2_rev  , "gfx/DIESEL_LOCO/class_14.png"){ template_5_8_rev(187, 25) } 


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_swtype1_standard_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_standard_rev ; gfx_swtype1_standard ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brll_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brll_rev ; gfx_swtype1_brll ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brblue_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brblue_rev ; gfx_swtype1_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_brmrn_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_brmrn_rev ; gfx_swtype1_brmrn ; }


switch(FEAT_TRAINS, PARENT, sw_swtype1_wheels_1_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_wheels_1_rev ; gfx_swtype1_wheels_1 ; }
switch(FEAT_TRAINS, PARENT, sw_swtype1_wheels_2_rev_check, vehicle_is_reversed){ 1 : gfx_swtype1_wheels_2_rev ; gfx_swtype1_wheels_2 ; }


//Automatic liveries

random_switch(FEAT_TRAINS, SELF, sw_swtype1_brblue_random, TRIGGER_VEHICLE_SERVICE){
	1 : sw_swtype1_brblue_rev_check ;
	1 : sw_swtype1_standard_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_auto, current_year){
	1967..1982 : sw_swtype1_brblue_random ;
	1983..1995 : sw_swtype1_brll_rev_check ;
	sw_swtype1_standard_rev_check ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_swtype1_manual, cargo_subtype){
	2..3 : sw_swtype1_brll_rev_check ;
	5..6 : sw_swtype1_brmrn_rev_check ;
	sw_swtype1_standard_rev_check ;
}


//Manual check

switch(FEAT_TRAINS, SELF, sw_swtype1_manual_check, livery_choice){
	1 : sw_swtype1_manual ;
	sw_swtype1_auto ;
}


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_swtype1_wheels, motion_counter % 2){
	1 : sw_swtype1_wheels_1_rev_check ;
	sw_swtype1_wheels_2_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_swtype1_manual_check ;
	1 : sw_swtype1_wheels ;
}


/*Purchase switches

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_purchase, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}
*/
//Refit Text

switch(FEAT_TRAINS, SELF, sw_swtype1_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	3 : string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4 : string(STR_LIVERY_NCB) ;
	5 : string(STR_LIVERY_MAROON) ;
	6 : string(STR_LIVERY_BSC) ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_refit_text_check, livery_choice){
	1 : sw_swtype1_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

random_switch(FEAT_TRAINS, SELF, sw_swtype1_sector_colours, TRIGGER_VEHICLE_SERVICE){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_auto, current_year){
	1967..1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1983..1995 : sw_swtype1_sector_colours ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_swtype1_colours_manual, cargo_subtype){
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	3    : palette_2cc(COLOUR_GREY, COLOUR_YELLOW) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	5    : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	6    : palette_2cc(COLOUR_CREAM, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_colours_manual_check, livery_choice){
	1 : sw_swtype1_colours_manual ;
	sw_swtype1_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_swtype1_colours_2cc_check, colour_scheme_1){
	1 : sw_swtype1_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_swtype1, 14){
	property{
		name                           : string(STR_NAME_SWTYPE1) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1964,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 20 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 13 ;
		cost_factor                    : 34 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 80 ;
		speed                          : 40 mph ;
		track_type                     : RAIL ;
		power                          : 500 kW ;
		weight                         : 49 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.31 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 5 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_swtype1_spritestack ;
		colour_mapping                 : sw_swtype1_colours_2cc_check ;
		purchase_colour_mapping        : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
		purchase                       : gfx_swtype1_purchase ;
		sound_effect                   : sw_sfx_diesel_loco_small ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_swtype1_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 20 : 80) ;
		purchase_running_cost_factor   : 80 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_swtype1, 14){
	property{
		name                           : string(STR_NAME_SWTYPE1_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/EE_Type3.pnml" 1
//EE Type 3

//Templates

template template_ee3(x,y){
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
}

template template_ee3_reverse(x,y){
	[x+89,y,8,23,-3,-11] //South
	[x+99,y,20,16,-13,-8] //South West
	[x+121,y,33,13,-17,-9] //West
	[x+156,y,20,16,-5,-8] //North West
	[x+0,y,8,23,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,33,13,-17,-9] //East
	[x+67,y,20,16,-5,-8] //South East
}

template template_ee3_dirt(x,y, filename){
	[x+0,y,16,46,-6,-22, filename] //North
	[x+20,y,40,32,-26,-16, filename] //North East
	[x+64,y,66,26,-34,-18, filename] //East
	[x+134,y,40,32,-11,-16, filename] //South East
	[x+178,y,16,46,-6,-22, filename] //South
	[x+198,y,40,32,-25,-16, filename] //South West
	[x+242,y,66,26,-34,-18, filename] //West
	[x+312,y,40,32,-10,-16, filename] //North West
}

template template_ee3_dirt_reverse(x,y, filename){
	[x+178,y,16,46,-6,-22, filename] //South
	[x+198,y,40,32,-25,-16, filename] //South West
	[x+242,y,66,26,-34,-18, filename] //West
	[x+312,y,40,32,-10,-16, filename] //North West
	[x+0,y,16,46,-6,-22, filename] //North
	[x+20,y,40,32,-26,-16, filename] //North East
	[x+64,y,66,26,-34,-18, filename] //East
	[x+134,y,40,32,-11,-16, filename] //South East
}

//Large logo colour mapping

random_switch(FEAT_TRAINS, SELF, sw_ee3_largelogo_colours, TRIGGER_VEHICLE_SERVICE){
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
}


//Spritesets

spriteset(gfx_ee3_brgreen             , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,0)}
spriteset(gfx_ee3_brgreen_reverse     , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,0)}
spriteset(gfx_ee3_brblue              , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,25)}
spriteset(gfx_ee3_brblue_reverse      , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,25)}
spriteset(gfx_ee3_brlargelogo         , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,50)}
spriteset(gfx_ee3_brlargelogo_reverse , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,50)}
spriteset(gfx_ee3_regional            , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,75)}
spriteset(gfx_ee3_regional_reverse    , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,75)}
spriteset(gfx_ee3_railfreight         , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,100)}
spriteset(gfx_ee3_railfreight_reverse , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,100)}
spriteset(gfx_ee3_drs                 , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,125)}
spriteset(gfx_ee3_drs_reverse         , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,125)}
spriteset(gfx_ee3_ews                 , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,150)}
spriteset(gfx_ee3_ews_reverse         , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,150)}
spriteset(gfx_ee3_rog                 , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,175)}
spriteset(gfx_ee3_rog_reverse         , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,175)}
spriteset(gfx_ee3_drscompass          , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,200)}
spriteset(gfx_ee3_drscompass_reverse  , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,200)}
spriteset(gfx_ee3_colasrail           , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(0,225)}
spriteset(gfx_ee3_colasrail_reverse   , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(0,225)}

spriteset(gfx_ee3_headcode_brgreen_split          , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,0)}
spriteset(gfx_ee3_headcode_brgreen_centre         , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,25)}
spriteset(gfx_ee3_headcode_split                  , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,50)}
spriteset(gfx_ee3_headcode_split_headlight        , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(178,50)}
spriteset(gfx_ee3_headcode_split_taillight        , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(356,50)}
spriteset(gfx_ee3_headcode_centre                 , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,75)}
spriteset(gfx_ee3_headcode_none                   , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,100)}
spriteset(gfx_ee3_headcode_centre_headlight       , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(178,75)}
spriteset(gfx_ee3_headcode_centre_taillight       , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(356,75)}
spriteset(gfx_ee3_headcode_none_newlights         , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,125)}
spriteset(gfx_ee3_headcode_centre_newlights       , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(0,150)}
spriteset(gfx_ee3_headcode_newlights_headlight    , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(178,125)}
spriteset(gfx_ee3_headcode_newlights_taillight    , "gfx/FIXTURES/class_37_headcodes.png"){template_ee3(356,125)}

spriteset(gfx_ee3_railfreight_black       	, "gfx/DIESEL_LOCO/class_37.png"){template_ee3(235,100)}
spriteset(gfx_ee3_railfreight_black_reverse	, "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(235,100)}
spriteset(gfx_ee3_railfreight_blue          , "gfx/DIESEL_LOCO/class_37.png"){template_ee3(413,100)}
spriteset(gfx_ee3_railfreight_blue_reverse  , "gfx/DIESEL_LOCO/class_37.png"){template_ee3_reverse(413,100)}

spriteset(gfx_ee3_purchase_brgreen          , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,0)}
spriteset(gfx_ee3_purchase_brblue           , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,25)}
spriteset(gfx_ee3_purchase_brlargelogo      , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,50)}
spriteset(gfx_ee3_purchase_regional         , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,75)}
spriteset(gfx_ee3_purchase_ews              , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,150)}
spriteset(gfx_ee3_purchase_colasrailfreight , "gfx/DIESEL_LOCO/class_37.png"){template_purchase_short(178,225)}

spriteset(gfx_ee3_dirt_light                , "gfx/FIXTURES/class_37_dirt.png"){base_32bpp()}
spriteset(gfx_ee3_dirt_light_reverse        , "gfx/FIXTURES/class_37_dirt.png"){base_32bpp()}
spriteset(gfx_ee3_dirt_dark                 , "gfx/FIXTURES/class_37_dirt.png"){base_32bpp()}
spriteset(gfx_ee3_dirt_dark_reverse         , "gfx/FIXTURES/class_37_dirt.png"){base_32bpp()}

alternative_sprites(gfx_ee3_dirt_light                , ZOOM_LEVEL_IN_2X, BIT_DEPTH_32BPP, "gfx/FIXTURES/class_37_dirt.png"){template_ee3_dirt(0,0,"gfx/FIXTURES/class_37_dirt.png")}
alternative_sprites(gfx_ee3_dirt_light_reverse        , ZOOM_LEVEL_IN_2X, BIT_DEPTH_32BPP, "gfx/FIXTURES/class_37_dirt.png"){template_ee3_dirt(0,0,"gfx/FIXTURES/class_37_dirt.png")}
alternative_sprites(gfx_ee3_dirt_dark                 , ZOOM_LEVEL_IN_2X, BIT_DEPTH_32BPP, "gfx/FIXTURES/class_37_dirt.png"){template_ee3_dirt(0,48,"gfx/FIXTURES/class_37_dirt.png")}
alternative_sprites(gfx_ee3_dirt_dark_reverse         , ZOOM_LEVEL_IN_2X, BIT_DEPTH_32BPP, "gfx/FIXTURES/class_37_dirt.png"){template_ee3_dirt(0,48,"gfx/FIXTURES/class_37_dirt.png")}



/*
BR Green
BR Blue
BR Large Logo
Regional Railways
Railfreight
DRS
EWS
ROG
DRS Compass
Colas Railfreight
*/

//Reversal checks

switch(FEAT_TRAINS, PARENT, sw_ee3_brgreen_reverse_check		  , vehicle_is_reversed){ 1 : gfx_ee3_brgreen_reverse ; gfx_ee3_brgreen ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_brblue_reverse_check			  , vehicle_is_reversed){ 1 : gfx_ee3_brblue_reverse ; gfx_ee3_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_brlargelogo_reverse_check	  , vehicle_is_reversed){ 1 : gfx_ee3_brlargelogo_reverse ; gfx_ee3_brlargelogo ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_regional_reverse_check         , vehicle_is_reversed){ 1 : gfx_ee3_regional_reverse ; gfx_ee3_regional ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_railfreight_reverse_check      , vehicle_is_reversed){ 1 : gfx_ee3_railfreight_reverse ; gfx_ee3_railfreight ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_drs_reverse_check              , vehicle_is_reversed){ 1 : gfx_ee3_drs_reverse ; gfx_ee3_drs ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_ews_reverse_check              , vehicle_is_reversed){ 1 : gfx_ee3_ews_reverse ; gfx_ee3_ews ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_rog_reverse_check              , vehicle_is_reversed){ 1 : gfx_ee3_rog_reverse ; gfx_ee3_rog ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_drscompass_reverse_check       , vehicle_is_reversed){ 1 : gfx_ee3_drscompass_reverse ; gfx_ee3_drscompass ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_colasrailfreight_reverse_check , vehicle_is_reversed){ 1 : gfx_ee3_colasrail_reverse ; gfx_ee3_colasrail ; }

switch(FEAT_TRAINS, PARENT, sw_ee3_railfreight_black_reverse_check  , vehicle_is_reversed){ 1 : gfx_ee3_railfreight_black_reverse ; gfx_ee3_railfreight_black ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_railfreight_blue_reverse_check   , vehicle_is_reversed){ 1 : gfx_ee3_railfreight_blue_reverse ; gfx_ee3_railfreight_blue ; }

switch(FEAT_TRAINS, PARENT, sw_ee3_dirt_light_reverse_check , vehicle_is_reversed){ 1 : gfx_ee3_dirt_light_reverse ; gfx_ee3_dirt_light ; }
switch(FEAT_TRAINS, PARENT, sw_ee3_dirt_dark_reverse_check  , vehicle_is_reversed){ 1 : gfx_ee3_dirt_dark_reverse  ; gfx_ee3_dirt_dark  ; }

switch(FEAT_TRAINS, SELF, sw_ee3_lights_split_back   , position_in_consist_from_end){ 0 : gfx_ee3_headcode_split_taillight ; }
switch(FEAT_TRAINS, SELF, sw_ee3_lights_split_front  , position_in_consist){          0 : gfx_ee3_headcode_split_headlight ; sw_ee3_lights_split_back ; }
switch(FEAT_TRAINS, SELF, sw_ee3_lights_centre_back  , position_in_consist_from_end){ 0 : gfx_ee3_headcode_centre_taillight ; }
switch(FEAT_TRAINS, SELF, sw_ee3_lights_centre_front , position_in_consist){          0 : gfx_ee3_headcode_centre_headlight ; sw_ee3_lights_centre_back ; }
switch(FEAT_TRAINS, SELF, sw_ee3_lights_new_back     , position_in_consist_from_end){ 0 : gfx_ee3_headcode_newlights_taillight ; }
switch(FEAT_TRAINS, SELF, sw_ee3_lights_new_front    , position_in_consist){          0 : gfx_ee3_headcode_newlights_headlight ; sw_ee3_lights_new_back ; }





//Graphics

//Base



switch(FEAT_TRAINS, SELF, sw_ee3_sector_gfx_decider, most_common_cargo_type){
	PASS : sw_ee3_regional_reverse_check ;
	COAL : sw_ee3_railfreight_black_reverse_check ;
	OIL_ : sw_ee3_railfreight_blue_reverse_check ;
	STEL : sw_ee3_railfreight_blue_reverse_check ;
	PLAS : sw_ee3_railfreight_blue_reverse_check ;
	BRCK : sw_ee3_railfreight_blue_reverse_check ;
	CMNT : sw_ee3_railfreight_blue_reverse_check ;
	GOLD : sw_ee3_railfreight_blue_reverse_check ;
	BDMT : sw_ee3_railfreight_blue_reverse_check ;
	GLAS : sw_ee3_railfreight_blue_reverse_check ;
	PETR : sw_ee3_railfreight_blue_reverse_check ;
	RFPR : sw_ee3_railfreight_blue_reverse_check ;
	SAND : sw_ee3_railfreight_blue_reverse_check ;
	ENSP : sw_ee3_railfreight_blue_reverse_check ;
	GRVL : sw_ee3_railfreight_blue_reverse_check ;
	MNSP : sw_ee3_railfreight_blue_reverse_check ;
	SCMT : sw_ee3_railfreight_blue_reverse_check ;
	COPR : sw_ee3_railfreight_blue_reverse_check ;
	sw_ee3_railfreight_reverse_check ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_privatisation1_random, TRIGGER_VEHICLE_SERVICE){
	2 : sw_ee3_drs_reverse_check ;
	1 : sw_ee3_ews_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_privatisation2_decider, most_common_cargo_type){
	PASS : sw_ee3_drscompass_reverse_check ;
	URAN : sw_ee3_drscompass_reverse_check ;
	NWST : sw_ee3_drscompass_reverse_check ;
	GOOD : sw_ee3_drscompass_reverse_check ;
	MAIL : sw_ee3_drscompass_reverse_check ;
	VALU : sw_ee3_drscompass_reverse_check ;
	GOLD : sw_ee3_drscompass_reverse_check ;
	FOOD : sw_ee3_drscompass_reverse_check ;
	STEL : sw_ee3_colasrailfreight_reverse_check ;
	COAL : sw_ee3_colasrailfreight_reverse_check ;
	IORE : sw_ee3_colasrailfreight_reverse_check ;
	LVST : sw_ee3_colasrailfreight_reverse_check ;
	OIL_ : sw_ee3_colasrailfreight_reverse_check ;
	PAPR : sw_ee3_colasrailfreight_reverse_check ;
	WOOD : sw_ee3_colasrailfreight_reverse_check ;
	CORE : sw_ee3_colasrailfreight_reverse_check ;
	AORE : sw_ee3_colasrailfreight_reverse_check ;
	BDMT : sw_ee3_colasrailfreight_reverse_check ;
	BRCK : sw_ee3_colasrailfreight_reverse_check ;
	CMNT : sw_ee3_colasrailfreight_reverse_check ;
	GLAS : sw_ee3_colasrailfreight_reverse_check ;
	PETR : sw_ee3_colasrailfreight_reverse_check ;
	PLAS : sw_ee3_colasrailfreight_reverse_check ;
	RFPR : sw_ee3_colasrailfreight_reverse_check ;
	SAND : sw_ee3_colasrailfreight_reverse_check ;
	CLAY : sw_ee3_colasrailfreight_reverse_check ;
	GRVL : sw_ee3_colasrailfreight_reverse_check ;
	COPR : sw_ee3_colasrailfreight_reverse_check ;
	sw_ee3_rog_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfx_auto, current_year){
	1948 .. 1966 : sw_ee3_brgreen_reverse_check ;
	1967..1982  : sw_ee3_brblue_reverse_check ;
	1987..1995  : sw_ee3_sector_gfx_decider ;
	1996..2008  : sw_ee3_privatisation1_random ;
	2009..4096  : sw_ee3_privatisation2_decider ;
	sw_ee3_brlargelogo_reverse_check ;
}



//Manual


switch(FEAT_TRAINS, SELF, sw_ee3_gfx_manual, cargo_subtype){
	0  : sw_ee3_brgreen_reverse_check ;
	1  : sw_ee3_brblue_reverse_check ;
	4  : sw_ee3_regional_reverse_check ;
	5  : sw_ee3_railfreight_reverse_check ;
	6  : sw_ee3_railfreight_black_reverse_check ;
	7  : sw_ee3_railfreight_blue_reverse_check ;
	8  : sw_ee3_drs_reverse_check ;
	9  : sw_ee3_drscompass_reverse_check ;
	10 : sw_ee3_ews_reverse_check ;
	11 : sw_ee3_rog_reverse_check ;
	12 : sw_ee3_colasrailfreight_reverse_check ;
	sw_ee3_brlargelogo_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_ee3_gfx_manual_check, livery_choice){
	1 : sw_ee3_gfx_manual ;
	sw_ee3_gfx_auto ;
}






//Headcodes

//Random switches

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_brgreen_random, TRIGGER_VEHICLE_SERVICE){
	2 : gfx_ee3_headcode_brgreen_split ;
	1 : gfx_ee3_headcode_brgreen_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_standard_random, TRIGGER_VEHICLE_SERVICE){
	2 : gfx_ee3_headcode_split ;
	1 : gfx_ee3_headcode_centre ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_standard_3, TRIGGER_VEHICLE_SERVICE){
	1 : gfx_ee3_headcode_none ;
	1 : gfx_ee3_headcode_centre ;
	1 : gfx_ee3_headcode_split ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_standard_any, TRIGGER_VEHICLE_SERVICE){
	1 : gfx_ee3_headcode_split ;
	1 : gfx_ee3_headcode_centre ;
	1 : gfx_ee3_headcode_none ;
	1 : gfx_ee3_headcode_none_newlights ;
	1 : gfx_ee3_headcode_centre_newlights ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_newlights_random, TRIGGER_VEHICLE_SERVICE){
	1 : gfx_ee3_headcode_none_newlights ;
	1 : gfx_ee3_headcode_centre_newlights ;
}



//Auto

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_largelogo, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_largelogo_colours ;
	2 : sw_ee3_gfxhc_standard_random ;
	1 : sw_ee3_gfxhc_standard_3 ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_sector_decider, most_common_cargo_type){
	PASS : gfx_ee3_headcode_centre ;
	sw_ee3_gfxhc_standard_3 ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_privatisation1_decider, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_privatisation1_random ;
	2 : sw_ee3_gfxhc_standard_any ;
	1 : sw_ee3_gfxhc_standard_3 ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_gfxhc_privatisation2_decider, most_common_cargo_type){
	PASS : sw_ee3_gfxhc_standard_any ;
	URAN : sw_ee3_gfxhc_standard_any ;
	NWST : sw_ee3_gfxhc_standard_any ;
	GOOD : sw_ee3_gfxhc_standard_any ;
	MAIL : sw_ee3_gfxhc_standard_any ;
	VALU : sw_ee3_gfxhc_standard_any ;
	GOLD : sw_ee3_gfxhc_standard_any ;
	FOOD : sw_ee3_gfxhc_standard_any ;
	STEL : sw_ee3_gfxhc_standard_3 ;
	COAL : sw_ee3_gfxhc_standard_3 ;
	IORE : sw_ee3_gfxhc_standard_3 ;
	LVST : sw_ee3_gfxhc_standard_3 ;
	OIL_ : sw_ee3_gfxhc_standard_3 ;
	PAPR : sw_ee3_gfxhc_standard_3 ;
	WOOD : sw_ee3_gfxhc_standard_3 ;
	CORE : sw_ee3_gfxhc_standard_3 ;
	AORE : sw_ee3_gfxhc_standard_3 ;
	BDMT : sw_ee3_gfxhc_standard_3 ;
	BRCK : sw_ee3_gfxhc_standard_3 ;
	CMNT : sw_ee3_gfxhc_standard_3 ;
	GLAS : sw_ee3_gfxhc_standard_3 ;
	PETR : sw_ee3_gfxhc_standard_3 ;
	PLAS : sw_ee3_gfxhc_standard_3 ;
	RFPR : sw_ee3_gfxhc_standard_3 ;
	SAND : sw_ee3_gfxhc_standard_3 ;
	CLAY : sw_ee3_gfxhc_standard_3 ;
	GRVL : sw_ee3_gfxhc_standard_3 ;
	COPR : sw_ee3_gfxhc_standard_3 ;
	sw_ee3_gfxhc_newlights_random ;
}


switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_auto, current_year){
	1948 .. 1966 : sw_ee3_gfxhc_brgreen_random ;
	1983..1986  : sw_ee3_gfxhc_largelogo ;
	1987..1995  : sw_ee3_gfxhc_sector_decider ;
	1996..2008  : sw_ee3_gfxhc_privatisation1_decider ;
	2009..4096  : sw_ee3_gfxhc_privatisation2_decider ;
	sw_ee3_gfxhc_standard_random ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_manual, cargo_subtype){
	0    : sw_ee3_gfxhc_brgreen_random ;
	4    : gfx_ee3_headcode_centre ;
	5..7 : sw_ee3_gfxhc_standard_3 ;
	8..9 : sw_ee3_gfxhc_standard_any ;
	10   : sw_ee3_gfxhc_standard_3 ;
	11   : sw_ee3_gfxhc_newlights_random ;
	12   : sw_ee3_gfxhc_standard_3 ;
	sw_ee3_gfxhc_standard_random ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_manual_check, livery_choice){
	1 : sw_ee3_gfxhc_manual ;
	sw_ee3_gfxhc_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfxhc_dbso_check, count_veh_id(9025) > 0){
	1 : gfx_ee3_headcode_centre ;
	sw_ee3_gfxhc_manual_check ;
}


//Lights

//Random switches

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_brgreen_random, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_gfxhc_brgreen_random ;
	2 : sw_ee3_lights_split_front ;
	1 : sw_ee3_lights_centre_front ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_standard_random, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_gfxhc_standard_random ;
	2 : sw_ee3_lights_split_front ;
	1 : sw_ee3_lights_centre_front ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_standard_3, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_gfxhc_standard_3 ;
	1 : sw_ee3_lights_centre_front ;
	1 : sw_ee3_lights_centre_front ;
	1 : sw_ee3_lights_split_front ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_standard_any, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_gfxhc_standard_any ;
	1 : sw_ee3_lights_split_front ;
	1 : sw_ee3_lights_centre_front ;
	1 : sw_ee3_lights_centre_front ;
	1 : sw_ee3_lights_new_front ;
	1 : sw_ee3_lights_new_front ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_newlights, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_gfxhc_newlights_random ;
	1 : sw_ee3_lights_new_front ;
	1 : sw_ee3_lights_new_front ;
}


//Auto

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_largelogo, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_largelogo_colours ;
	2 : sw_ee3_gfxlt_standard_random ;
	1 : sw_ee3_gfxlt_standard_3 ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_sector_decider, most_common_cargo_type){
	PASS : sw_ee3_lights_centre_front ;
	sw_ee3_gfxlt_standard_3 ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_privatisation1_decider, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_privatisation1_random ;
	2 : sw_ee3_gfxlt_standard_any ;
	1 : sw_ee3_gfxlt_standard_3 ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_gfxlt_privatisation2_decider, most_common_cargo_type){
	PASS : sw_ee3_gfxlt_standard_any ;
	URAN : sw_ee3_gfxlt_standard_any ;
	NWST : sw_ee3_gfxlt_standard_any ;
	GOOD : sw_ee3_gfxlt_standard_any ;
	MAIL : sw_ee3_gfxlt_standard_any ;
	VALU : sw_ee3_gfxlt_standard_any ;
	GOLD : sw_ee3_gfxlt_standard_any ;
	FOOD : sw_ee3_gfxlt_standard_any ;
	STEL : sw_ee3_gfxlt_standard_3 ;
	COAL : sw_ee3_gfxlt_standard_3 ;
	IORE : sw_ee3_gfxlt_standard_3 ;
	LVST : sw_ee3_gfxlt_standard_3 ;
	OIL_ : sw_ee3_gfxlt_standard_3 ;
	PAPR : sw_ee3_gfxlt_standard_3 ;
	WOOD : sw_ee3_gfxlt_standard_3 ;
	CORE : sw_ee3_gfxlt_standard_3 ;
	AORE : sw_ee3_gfxlt_standard_3 ;
	BDMT : sw_ee3_gfxlt_standard_3 ;
	BRCK : sw_ee3_gfxlt_standard_3 ;
	CMNT : sw_ee3_gfxlt_standard_3 ;
	GLAS : sw_ee3_gfxlt_standard_3 ;
	PETR : sw_ee3_gfxlt_standard_3 ;
	PLAS : sw_ee3_gfxlt_standard_3 ;
	RFPR : sw_ee3_gfxlt_standard_3 ;
	SAND : sw_ee3_gfxlt_standard_3 ;
	CLAY : sw_ee3_gfxlt_standard_3 ;
	GRVL : sw_ee3_gfxlt_standard_3 ;
	COPR : sw_ee3_gfxlt_standard_3 ;
	sw_ee3_gfxlt_newlights ;
}


switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_auto, current_year){
	1948 .. 1966 : sw_ee3_gfxlt_brgreen_random ;
	1983..1986  : sw_ee3_gfxlt_largelogo ;
	1987..1995  : sw_ee3_gfxlt_sector_decider ;
	1996..2008  : sw_ee3_gfxlt_privatisation1_decider ;
	2009..4096  : sw_ee3_gfxlt_privatisation2_decider ;
	sw_ee3_gfxlt_standard_random ;
}



//Manual

switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_manual, cargo_subtype){
	0    : sw_ee3_gfxlt_brgreen_random ;
	4    : sw_ee3_lights_centre_front ;
	5..7 : sw_ee3_gfxlt_standard_3 ;
	8..9 : sw_ee3_gfxlt_standard_any ;
	10   : sw_ee3_gfxlt_standard_3 ;
	11   : sw_ee3_gfxlt_newlights ;
	12   : sw_ee3_gfxlt_standard_3 ;
	sw_ee3_gfxlt_standard_random ;
}


switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_manual_check, livery_choice){
	1 : sw_ee3_gfxlt_manual ;
	sw_ee3_gfxlt_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_gfxlt_dbso_check, count_veh_id(9025) > 0){
	1 : sw_ee3_lights_centre_front ;
	sw_ee3_gfxlt_manual_check ;
}


//Dirt

switch(FEAT_TRAINS, SELF, sw_ee3_dirt, age_in_days){
	0..3649    : gfx_blank ;
	3650..9124 : sw_ee3_dirt_light_reverse_check ;
	sw_ee3_dirt_dark_reverse_check ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_ee3_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee3_gfx_manual_check ;    //Base
	1 : sw_ee3_gfxhc_dbso_check ;  //Headcodes
	2 : sw_ee3_gfxlt_dbso_check ;  //Lights
}


switch(FEAT_TRAINS, SELF, sw_ee3_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_ee3_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_ee3_dbso_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_ee3_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	3 : string(STR_LIVERY_BRRAILFREIGHT_LOGO) ;
	4 : string(STR_LIVERY_REG_RAILWAYS) ;
	5 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_GENERAL))) ;
	6 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_COAL))) ;
	7 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_METALS))) ;
	8 : string(STR_LIVERY_DRS) ;
	9 : string(STR_LIVERY_DRS_COMPASS) ;
	10 : string(STR_LIVERY_EWS) ;
	11 : string(STR_LIVERY_ROG_EUROPHENIX) ;
	12 : string(STR_LIVERY_COLAS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_refit_text_check, livery_choice){
	1 : sw_ee3_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_ee3_purchase, current_year){
	1948 .. 1966 : gfx_ee3_purchase_brgreen ;
	1967..1982  : gfx_ee3_purchase_brblue ;
	1983..1986  : gfx_ee3_purchase_brlargelogo ;
	1987..1995  : gfx_ee3_purchase_regional ;
	1996..2008  : gfx_ee3_purchase_ews ;
	2009..4096  : gfx_ee3_purchase_colasrailfreight ;
}


//Colour mapping

switch(FEAT_TRAINS, SELF, sw_ee3_colours_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_colours_privatisation1_decider, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_privatisation1_random ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_colours_privatisation2_decider, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	MAIL : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	VALU : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOLD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	FOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	STEL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	COAL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	IORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	LVST : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	OIL_ : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PAPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	WOOD : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	AORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	BDMT : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	BRCK : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CMNT : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	GLAS : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PETR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PLAS : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	RFPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	SAND : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CLAY : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	GRVL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	COPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_colours_auto, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1982  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986  : sw_ee3_largelogo_colours ;
	1987..1995  : sw_ee3_colours_sectorised ;
	1996..2008  : sw_ee3_colours_privatisation1_decider ;
	2009..4096  : sw_ee3_colours_privatisation2_decider ;
}



switch(FEAT_TRAINS, SELF, sw_ee3_colours_manual, cargo_subtype){
	0    : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3    : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5..7 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8..9 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	10   : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	11   : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	12   : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_colours_manual_check, livery_choice){
	1 : sw_ee3_colours_manual ;
	sw_ee3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_colours_2cc_check, colour_scheme_1){
	1 : sw_ee3_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_ee3_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee3_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_ee3_colours_dbso_check ;
}


switch(FEAT_TRAINS, SELF, sw_ee3_colours_purchase, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1982  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1995  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	1996..2008  : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2009..4096  : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

/*
switch(FEAT_TRAINS, SELF sw_ee3_vfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	0 : vfx_diesel_default ;
}*/

switch(FEAT_TRAINS, SELF, sw_ee3_vfx_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_diesel_default ;
}


//Item

item (FEAT_TRAINS, item_eetype3, 37){
	property{
		name                           : string(STR_NAME_EETYPE3) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1959,12,2) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 30 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 10 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 170 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 1750 hp ;
		weight                         : 100 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.245 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_ee3_dvt_check ;
		colour_mapping                 : sw_ee3_colours_dvt_check ;
		purchase_colour_mapping        : sw_ee3_colours_purchase ;
		purchase                       : sw_ee3_purchase ;
		sound_effect                   : sw_sfx_diesel_loco_ee_2 ;
		create_effect                  : sw_ee3_vfx_dbso_check ;
		cargo_subtype_text             : sw_ee3_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 42 : 170) ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eetype3, 37){
	property{
		name                           : string(STR_NAME_EETYPE3_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/EE_Type4.pnml" 1
//Defining EE Type 4 specific template

template template_eetype4(x,y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+0,y,8,23,-3,-10]    //North
	[x+10,y,21,15,-14,-7]  //North East
	[x+33,y,33,11,-17,-7]  //East
	[x+69,y,21,15,-5,-7]   //South East
	[x+92,y,8,23,-3,-10]   //South
	[x+102,y,21,15,-14,-7]   //South West
	[x+125,y,33,11,-17,-7] //West
	[x+161,y,21,15,-5,-7]  //North West
}
//Reverse
template template_eetype4_reverse(x,y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+92,y,8,23,-3,-10]   //South
	[x+102,y,21,15,-14,-7]   //South West
	[x+125,y,33,11,-17,-7] //West
	[x+161,y,21,15,-5,-7]  //North West
	[x+0,y,8,23,-3,-10]    //North
	[x+10,y,21,15,-14,-7]  //North East
	[x+33,y,33,11,-17,-7]  //East
	[x+69,y,21,15,-5,-7]   //South East}
}

//Defining graphics
spriteset (ee40_headcode_1,       "gfx/FIXTURES/class_40_hc1.png"){template_eetype4(0,0)}        //Headcode 1
spriteset (ee40_headcode_2,       "gfx/FIXTURES/class_40_hc2.png"){template_eetype4(0,0)}        //Headcode 2
spriteset (ee40_headcode_3,       "gfx/FIXTURES/class_40_hc3.png"){template_eetype4(0,0)}        //Headcode 3
spriteset (ee40_headcode_4,       "gfx/FIXTURES/class_40_hc4.png"){template_eetype4(0,0)}        //Headcode 4
spriteset (ee40_headcode_5,       "gfx/FIXTURES/class_40_hc5.png"){template_eetype4(0,0)}        //Headcode 5
spriteset (ee40_br_green,         "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,0)}         //BR Green
spriteset (ee40_br_green_rev,     "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,0)} //BR Green Reverse
spriteset (ee40_br_blue,          "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,25)}         //BR Blue
spriteset (ee40_br_blue_rev,      "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,25)} //BR Blue Reverse
spriteset (ee40_br_blue_logo,     "gfx/DIESEL_LOCO/class_40.png"){template_eetype4(0,50)}         //BR Large Logo
spriteset (ee40_br_blue_logo_rev, "gfx/DIESEL_LOCO/class_40.png"){template_eetype4_reverse(0,50)} //BR Large Logo Reverse

spriteset (ee40_purchase_brgreen,     "gfx/DIESEL_LOCO/class_40.png"){template_purchase_short(184,0)} //BR Green Purchase
spriteset (ee40_purchase_brblue,      "gfx/DIESEL_LOCO/class_40.png"){template_purchase_short(184,0)} //BR Blue Purchase
spriteset (ee40_purchase_brblue_logo, "gfx/DIESEL_LOCO/class_40.png"){template_purchase_short(184,0)} //BR Large Logo Purchase


//Switches

//Graphics

//Automatic liveries

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brgreen_reverse_check     , vehicle_is_reversed){ 1 : ee40_br_green_rev ; ee40_br_green ; }
switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brblue_reverse_check      , vehicle_is_reversed){ 1 : ee40_br_blue_rev ; ee40_br_blue ; }
switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_brblue_logo_reverse_check , vehicle_is_reversed){ 1 : ee40_br_blue_logo_rev ; ee40_br_blue_logo ; }

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_auto, current_year){
	1948 .. 1966 : sw_ee40_gfx_brgreen_reverse_check ;
	1967..1982  : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_ee40_colours_manual, cargo_subtype){
	0 : sw_ee40_gfx_brgreen_reverse_check ;
	1 : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_manual_check, livery_choice){
	1 : sw_ee40_colours_manual ;
	sw_ee40_gfx_auto ;
}


//Sprite stacking

random_switch(FEAT_TRAINS, SELF, sw_ee40_random_headcode, TRIGGER_VEHICLE_SERVICE){
	25 : ee40_headcode_4 ;
	25 : ee40_headcode_5 ;
	15 : ee40_headcode_1 ;
	15 : ee40_headcode_2 ;
	27 : ee40_headcode_3 ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_headcode_dbso_check, count_veh_id(9025) > 0){
	1 : ee40_headcode_2 ;
	sw_ee40_random_headcode ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee40_gfx_manual_check ;
	1 : sw_ee40_headcode_dbso_check ;
}


//Purchase

switch(FEAT_TRAINS, SELF, sw_ee40_purchase, current_year){
	1948 .. 1966       : ee40_purchase_brgreen ;
	1967..1982        : ee40_purchase_brblue ;
	ee40_purchase_brblue_logo ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_ee40_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_BRBLUE_LOGO) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_refit_text_check, livery_choice){
	1 : sw_ee40_refit_text ;
	CB_RESULT_NO_TEXT;
}



//Colour mapping

switch(FEAT_TRAINS, SELF, sw_ee40_colours_auto, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_recolours_manual, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, SELF, sw_ee40_colours_manual_check, livery_choice){
	1 : sw_ee40_recolours_manual ;
	sw_ee40_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_colours_2cc_check, colour_scheme_1){
	1 : sw_ee40_colours_manual_check ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}


//DBSO checks

switch(FEAT_TRAINS, SELF, sw_ee40_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_ee40_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_ee40_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee40_vfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	0 : vfx_diesel_default ;
}


//EE Type 4 item


item (FEAT_TRAINS, item_eetype4, 40){
	property{
		name                           : string(STR_NAME_EETYPE4) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1958,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 27 ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 60 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 200 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 2500 hp ;
		weight                         : 129 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.1723880597014925 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_ee40_gfx_dbso_check ;
		colour_mapping                 : sw_ee40_colours_dbso_check ;
		purchase                       : sw_ee40_purchase ;
		purchase_colour_mapping        : sw_ee40_colours_2cc_check ;
		sound_effect                   : sw_sfx_diesel_loco_ee ;
		create_effect                  : sw_ee40_vfx_dbso_check ;
		cargo_subtype_text             : sw_ee40_refit_text_check ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		running_cost_factor            : return(current_speed == 0 ? 50 : 200) ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_eetype4, 40){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eetype4, 40){
	property{
		name                           : string(STR_NAME_EETYPE4_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/hoover.pnml" 1
//Hoover

//Spritesets

spriteset(ee50_brblue_pre			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0,  0) }
spriteset(ee50_brblue_pre_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0,  0) }
spriteset(ee50_brblue_llg			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 25) }
spriteset(ee50_brblue_llg_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 25) }
spriteset(ee50_brblue_nse_o			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 50) }
spriteset(ee50_brblue_nse_o_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 50) }
spriteset(ee50_brblue_nse_r			, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double        (  0, 75) }
spriteset(ee50_brblue_nse_r_rev		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double_reverse(  0, 75) }

spriteset(ee50_purchase_brblue	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase_short(178, 50) }
spriteset(ee50_purchase_brllg	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase_short(178, 75) }
spriteset(ee50_purchase_nse_o	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase_short(178,100) }
spriteset(ee50_purchase_nse_r	, "gfx/DIESEL_LOCO/class_50.png"){ template_purchase_short(178,125) }

spriteset(ee50_headlights		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double( 178,  0) }
spriteset(ee50_taillights		, "gfx/DIESEL_LOCO/class_50.png"){ template_Mk2_double( 178, 25) }



//Grahpics switches

switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_pre_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_pre_rev ; ee50_brblue_pre ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_llg_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_llg_rev ; ee50_brblue_llg ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_nse_o_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_nse_o_rev ; ee50_brblue_nse_o ; }
switch(FEAT_TRAINS, PARENT, sw_ee50_brblue_nse_r_rev_check, vehicle_is_reversed){ 1 : ee50_brblue_nse_r_rev ; ee50_brblue_nse_r ; }


random_switch(FEAT_TRAINS, SELF, sw_ee50_nse_random, TRIGGER_VEHICLE_SERVICE){
	1 : sw_ee50_brblue_nse_o_rev_check ;
	1 : sw_ee50_brblue_nse_r_rev_check ;
}


switch(FEAT_TRAINS, SELF, sw_ee50_auto, current_year){
	1948..1979 : sw_ee50_brblue_pre_rev_check ;
	1980..1986 : sw_ee50_brblue_llg_rev_check ;
	1987..1994 : sw_ee50_nse_random ;
	sw_ee50_brblue_pre_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_manual, cargo_subtype){
	0 : sw_ee50_brblue_pre_rev_check ;
	1 : sw_ee50_brblue_llg_rev_check ;
	2 : sw_ee50_nse_random ;
	sw_ee50_brblue_pre_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_manual_check, livery_choice){
	1 : sw_ee50_manual ;
	sw_ee50_auto ;
}


//Lights

switch(FEAT_TRAINS, SELF, sw_ee50_taillights, position_in_consist_from_end){ 0 : ee50_taillights ; }
switch(FEAT_TRAINS, SELF, sw_ee50_headlights, position_in_consist){ 0 : ee50_headlights ; }

switch(FEAT_TRAINS, SELF, sw_ee50_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee50_manual_check ;
	1 : sw_ee50_headlights ;
	2 : sw_ee50_taillights ;
}

//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_ee50_purchase, current_year){
	1948..1979 : ee50_purchase_brblue ;
	1980..1986 : ee50_purchase_brllg ;
	1987..1994 : ee50_purchase_nse_r ;
	ee50_purchase_brllg ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_purchase_colours, current_year){
	1948..1979 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1980..1986 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1994 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_purchase_colours_check, colour_scheme_1){
	1 : sw_ee50_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_ee50_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_BRBLUE_LOGO) ;
	2 : string(STR_LIVERY_NSE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_refit_text_check, livery_choice){
	1 : sw_ee50_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_ee50_colours_auto, current_year){
	1948..1979 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1980..1986 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1987..1994 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}


switch(FEAT_TRAINS, SELF, sw_ee50_colours_manual_check, livery_choice){
	1 : sw_ee50_colours_manual ;
	sw_ee50_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_colours_2cc_check, colour_scheme_1){
	1 : sw_ee50_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}




//Mark 2 override


//Graphics

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_graphics, current_year){
	1967 .. 1970        : sw_mk2a_brblue ;
    1971 .. 1982     : sw_mk2a_brblue ;
	1983 .. 1995 : sw_mk2a_nse_back ;
	1996 .. 2004   : sw_mk2f_virgin ;
	2005 .. 4096   : sw_mk2a_brblue ;
	sw_mk2a_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_livery_choice_decider, livery_choice){
	1 : sw_mk2_livery_decider ; 
	sw_ee50_mk2_graphics ;
}




//Colours

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_auto, current_year){
	1967 .. 1970         : sw_mk2_brblue_colour_mapping ;
    1971 .. 1982     : sw_mk2_brblue_colour_mapping ;
    1983 .. 1995  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
    1996 .. 2004 : sw_mk2_virgin_colour_mapping ;
    2005 .. 4096 : sw_mk2_brblue_colour_mapping ;
	sw_mk2_intercity_colour_mapping ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_manual_check, livery_choice){
	1 : sw_mk2_colour_mapping_manual ;
	sw_ee50_mk2_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_ee50_mk2_colour_mapping_decider, colour_scheme_1){
	1 : sw_ee50_mk2_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}





//Item

item(FEAT_TRAINS, item_hoover, 50){
	property{
		name                           : string(STR_NAME_EEHOOVER) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1968,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 18 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 6 ;
		cost_factor                    : 72 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 222 ;
		speed                          : 100 mph ;
		track_type                     : RAIL ;
		power                          : 2010 kW ;
		weight                         : 115 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.2 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_ee50_sprite_stack ;
		colour_mapping                 : sw_ee50_colours_2cc_check ;
		purchase                       : sw_ee50_purchase ;
		purchase_colour_mapping        : sw_ee50_purchase_colours_check ;
		sound_effect                   : sw_sfx_diesel_loco_ee ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_ee50_refit_text_check ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		running_cost_factor            : return(current_speed == 0 ? 50 : 222) ;
		purchase_running_cost_factor   : 222 ;
	}
	livery_override(9020){
		default                 : sw_ee50_mk2_livery_choice_decider ;
		cargo_subtype_text      : sw_mk2_refit_text_decider ;
		colour_mapping          : sw_ee50_mk2_colour_mapping_decider ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_hoover, 50){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_hoover, 50){
	property{
		name                           : string(STR_NAME_EEHOOVER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/Brush_Peak.pnml" 1
//Brush Peak

//Spritesets

spriteset(gfx_bshpeak_brgreen         , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0,  0) }
spriteset(gfx_bshpeak_brgreen_rev     , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double_reverse(  0,  0) }
spriteset(gfx_bshpeak_brblue          , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 25) }
spriteset(gfx_bshpeak_brblue_rev      , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double_reverse(  0, 25) }

spriteset(gfx_bshpeak_headlight       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 75) }
spriteset(gfx_bshpeak_taillight       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(  0, 50) }
spriteset(gfx_bshpeak_headlight_split , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_double(235, 75) }

spriteset(gfx_bshpeak_hc_split_brgreen, "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235,  0) }
spriteset(gfx_bshpeak_hc_split_brblue , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235, 25) }
spriteset(gfx_bshpeak_hc_centre       , "gfx/DIESEL_LOCO/class_46.png"){ template_Mk2_single(235, 50) }

spriteset(gfx_bshpeak_purchase_brgreen, "gfx/DIESEL_LOCO/class_46.png"){ template_purchase_short(178,  0) }
spriteset(gfx_bshpeak_purchase_brblue , "gfx/DIESEL_LOCO/class_46.png"){ template_purchase_short(178, 25) }

spriteset(gfx_bshpeak_blank           , "gfx/DIESEL_LOCO/class_46.png"){ base_32bpp() }



//Graphics switches

//Headcodes

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_auto, current_year){
	1948..1967 : gfx_bshpeak_hc_split_brgreen ;
	gfx_bshpeak_hc_split_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_manual, cargo_subtype){
	0 : gfx_bshpeak_hc_split_brgreen ;
	gfx_bshpeak_hc_split_brblue ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_hc_split_decider_manual_check, livery_choice){
	1 : sw_bshpeak_hc_split_decider_manual ;
	sw_bshpeak_hc_split_decider_auto ;
}

random_switch(FEAT_TRAINS, SELF, sw_bshpeak_random_headcode){
	1 : gfx_bshpeak_hc_centre ;
	1 : sw_bshpeak_hc_split_decider_manual_check ;
	1 : gfx_bshpeak_blank ;
}


//Liveries

switch(FEAT_TRAINS, PARENT, sw_bshpeak_brgreen_reverse_check, vehicle_is_reversed){ 1 : gfx_bshpeak_brgreen ; gfx_bshpeak_brgreen_rev ; }
switch(FEAT_TRAINS, PARENT, sw_bshpeak_brblue_reverse_check, vehicle_is_reversed){ 1 : gfx_bshpeak_brblue ; gfx_bshpeak_brblue_rev ; }


switch(FEAT_TRAINS, SELF, sw_bshpeak_auto, current_year){
	1948..1967 : sw_bshpeak_brgreen_reverse_check ;
	sw_bshpeak_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_manual, cargo_subtype){
	0 : sw_bshpeak_brgreen_reverse_check ;
	sw_bshpeak_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_manual_check, livery_choice){
	1 : sw_bshpeak_manual ;
	sw_bshpeak_auto ;
}


//Lights

random_switch(FEAT_TRAINS, SELF, sw_bshpeak_headlight_random_decider){
	dependent : sw_bshpeak_random_headcode ;
	1 : gfx_bshpeak_headlight ;
	1 : gfx_bshpeak_headlight_split ;
	1 : gfx_bshpeak_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_taillight_check, position_in_consist_from_end){ 0: gfx_bshpeak_taillight ; }
switch(FEAT_TRAINS, SELF, sw_bshpeak_headlight_check, position_in_consist){ 0: sw_bshpeak_headlight_random_decider ; sw_bshpeak_taillight_check ; }

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_bshpeak_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_bshpeak_manual_check ;
	1 : sw_bshpeak_random_headcode ;
	2 : sw_bshpeak_headlight_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_bshpeak_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRGREEN) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_refit_text_check, livery_choice){
	1 : sw_bshpeak_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Purchase sprites

switch(FEAT_TRAINS, SELF, sw_bshpeak_purchase, current_year){
	1948..1967 : gfx_bshpeak_purchase_brgreen ;
	gfx_bshpeak_purchase_brblue ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_auto, current_year){
	1948..1967 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_manual_check, livery_choice){
	1 : sw_bshpeak_colours_manual ;
	sw_bshpeak_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_bshpeak_colours_2cc_check, colour_scheme_1){
	1 : sw_bshpeak_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item


item(FEAT_TRAINS, item_bshpeak, 46){
	property{
		name                           : string(STR_NAME_BRUSH_PEAK) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1961,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 25 ;
		vehicle_life                   : 35 ;
		reliability_decay              : 11 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 230 ;
		speed                          : 90 mph ;
		track_type                     : RAIL ;
		power                          : 2600 hp ;
		weight                         : 138 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.1811594202898551 ;
		air_drag_coefficient           : 0.0888888888888889 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_bshpeak_spritestack ;
		colour_mapping                 : sw_bshpeak_colours_2cc_check ;
		purchase                       : sw_bshpeak_purchase ;
		purchase_colour_mapping        : sw_bshpeak_colours_auto ;
		sound_effect                   : sw_sfx_diesel_loco_heritage ;
		create_effect                  : vfx_diesel_default ;
		cargo_subtype_text             : sw_bshpeak_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90;
		running_cost_factor            : return(current_speed == 0 ? 57 : 230) ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_bshpeak, 46){
	property{
		name                           : string(STR_NAME_BRUSH_PEAK_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/HST.pnml" 1
//HST

/*

Liveries done:
BR Blue
Intercity 125
Intercity Swallow
Virgin
Midland Mainline (Blue)
EMT
First Fag
First Barbie
FGW
GWR

Liveries to do:
Scotrail
Network Rail

*/

//Spritesets

spriteset(gfx_hst_brblue             , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,  0) }
spriteset(gfx_hst_brblue_rev         , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,  0) }
spriteset(gfx_hst_ic125              , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 25) }
spriteset(gfx_hst_ic125_rev          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 25) }
spriteset(gfx_hst_icswallow          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 50) }
spriteset(gfx_hst_icswallow_rev      , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 50) }
spriteset(gfx_hst_virgin             , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0, 75) }
spriteset(gfx_hst_virgin_rev         , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0, 75) }
spriteset(gfx_hst_first_fag          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,100) }
spriteset(gfx_hst_first_fag_rev      , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,100) }
spriteset(gfx_hst_mml                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,125) }
spriteset(gfx_hst_mml_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,125) }
spriteset(gfx_hst_first_barbie       , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,150) }
spriteset(gfx_hst_first_barbie_rev   , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,150) }
spriteset(gfx_hst_fgw                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,175) }
spriteset(gfx_hst_fgw_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,175) }
spriteset(gfx_hst_gwr                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,200) }
spriteset(gfx_hst_gwr_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,200) }
spriteset(gfx_hst_emt                , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (  0,225) }
spriteset(gfx_hst_emt_rev            , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (  0,225) }

spriteset(gfx_hst_brblue_purchase    , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,  0) }
spriteset(gfx_hst_ic125_purchase     , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 25) }
spriteset(gfx_hst_icswallow_purchase , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 50) }
spriteset(gfx_hst_virgin_purchase    , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178, 75) }
spriteset(gfx_hst_mml_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,125) }
spriteset(gfx_hst_fgw_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,175) }
spriteset(gfx_hst_gwr_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,200) }
spriteset(gfx_hst_emt_purchase       , "gfx/DIESEL_LOCO/class_43.png" ){ template_purchase (  178,225) }


spriteset(gfx_hst_headlight          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double         (259,  0) }
spriteset(gfx_hst_taillight          , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (259, 25) }
spriteset(gfx_hst_taillight_refurb   , "gfx/DIESEL_LOCO/class_43.png" ){ template_Mk2_double_reverse (259, 50) }


//Graphics switches

/*
switch(FEAT_TRAINS, PARENT, sw_hst_brblue_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_brblue_rev ; gfx_hst_brblue ; }
switch(FEAT_TRAINS, PARENT, sw_hst_brblue_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_brblue ; gfx_hst_brblue_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_ic125_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_ic125_rev ; gfx_hst_ic125 ; }
switch(FEAT_TRAINS, PARENT, sw_hst_ic125_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_ic125 ; gfx_hst_ic125_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_icswallow_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_icswallow_rev ; gfx_hst_icswallow ; }
switch(FEAT_TRAINS, PARENT, sw_hst_icswallow_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_icswallow ; gfx_hst_icswallow_rev ; }

switch(FEAT_TRAINS, PARENT, sw_hst_virgin_rev_check      , vehicle_is_reversed){ 1 : gfx_hst_virgin_rev ; gfx_hst_virgin ; }
switch(FEAT_TRAINS, PARENT, sw_hst_virgin_rev_check_back , vehicle_is_reversed){ 1 : gfx_hst_virgin ; gfx_hst_virgin_rev ; }
*/
switch(FEAT_TRAINS, SELF, sw_hst_brblue_backcheck       , position_in_consist){ 0 : gfx_hst_brblue       ; gfx_hst_brblue_rev ;       }
switch(FEAT_TRAINS, SELF, sw_hst_ic125_backcheck        , position_in_consist){ 0 : gfx_hst_ic125        ; gfx_hst_ic125_rev ;        }
switch(FEAT_TRAINS, SELF, sw_hst_icswallow_backcheck    , position_in_consist){ 0 : gfx_hst_icswallow    ; gfx_hst_icswallow_rev ;    }
switch(FEAT_TRAINS, SELF, sw_hst_virgin_backcheck       , position_in_consist){ 0 : gfx_hst_virgin       ; gfx_hst_virgin_rev ;       }
switch(FEAT_TRAINS, SELF, sw_hst_first_fag_backcheck    , position_in_consist){ 0 : gfx_hst_first_fag    ; gfx_hst_first_fag_rev ;    }
switch(FEAT_TRAINS, SELF, sw_hst_mml_backcheck          , position_in_consist){ 0 : gfx_hst_mml          ; gfx_hst_mml_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_first_barbie_backcheck , position_in_consist){ 0 : gfx_hst_first_barbie ; gfx_hst_first_barbie_rev ; }
switch(FEAT_TRAINS, SELF, sw_hst_fgw_backcheck          , position_in_consist){ 0 : gfx_hst_fgw          ; gfx_hst_fgw_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_gwr_backcheck          , position_in_consist){ 0 : gfx_hst_gwr          ; gfx_hst_gwr_rev ;          }
switch(FEAT_TRAINS, SELF, sw_hst_emt_backcheck          , position_in_consist){ 0 : gfx_hst_emt          ; gfx_hst_emt_rev ;          }


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_hst_gfx_auto, current_year){
	1971 .. 1982 : sw_hst_brblue_backcheck ;
	1983..1986 : sw_hst_ic125_backcheck ;
	1987..1995 : sw_hst_icswallow_backcheck ;
	//1996..2005 :  ;
	2005..2009 : sw_hst_mml_backcheck ;
	2010..2016 : sw_hst_emt_backcheck ;
	//2017..4096 :  ;
	sw_hst_virgin_backcheck ;
}


//Manual liveries

switch(FEAT_TRAINS, SELF, sw_hst_gfx_manual, cargo_subtype){
	0 : sw_hst_brblue_backcheck ;
	1 : sw_hst_ic125_backcheck ;
	2 : sw_hst_icswallow_backcheck ;
	4 : sw_hst_mml_backcheck ;
	5 : sw_hst_emt_backcheck ;
	6 : sw_hst_first_fag_backcheck ;
	7 : sw_hst_first_barbie_backcheck ;
	8 : sw_hst_fgw_backcheck ;
	9 : sw_hst_gwr_backcheck ;
	sw_hst_virgin_backcheck ;
}

//Manual check

switch(FEAT_TRAINS, SELF, sw_hst_gfx_manual_check, livery_choice){
	1 : sw_hst_gfx_manual ;
	sw_hst_gfx_auto ;
}


//Lights deciders

switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_auto, current_year){
	gfx_hst_taillight ;
}


switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_manual, cargo_subtype){
	8..9 : gfx_hst_taillight_refurb ;
	gfx_hst_taillight ;
}


switch(FEAT_TRAINS, SELF, sw_gfx_hst_taillight_decider_manual_check, livery_choice){
	1 : sw_gfx_hst_taillight_decider_manual ;
	sw_gfx_hst_taillight_decider_auto ;
}

switch(FEAT_TRAINS, SELF, sw_hst_gfx_taillight_check, position_in_consist_from_end){ 0 : sw_gfx_hst_taillight_decider_manual_check ; }
switch(FEAT_TRAINS, SELF, sw_hst_gfx_headlight_check, position_in_consist){ 0 : gfx_hst_headlight ; sw_hst_gfx_taillight_check ; }



//Random buffers decider


//Sprite stack

switch(FEAT_TRAINS, SELF, sw_hst_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_hst_gfx_manual_check ;
	2 : sw_hst_gfx_headlight_check ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_hst_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_INTERCITY_SWL) ;
	3 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	4 : string(STR_LIVERY_MIDLAND_MAINLINE_BLUE) ;
	5 : string(STR_LIVERY_EMT) ;
	6 : string(STR_LIVERY_FIRST_FAG, string(STR_LIVERY_EMPTY)) ;
	7 : string(STR_LIVERY_FIRST_BARBIE, string(STR_LIVERY_EMPTY)) ;
	8 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	9 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_hst_refit_text_check, livery_choice){
	1 : sw_hst_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite, current_year){
	1971 .. 1982 : gfx_hst_brblue_purchase ;
	1983..1986 : gfx_hst_ic125_purchase ;
	1987..1995 : gfx_hst_icswallow_purchase ;
	//1996..2005 :  ;
	2005..2016 : gfx_hst_mml_purchase ;
	//2017..4096 :  ;
	gfx_hst_virgin_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite_colours, current_year){
	1971 .. 1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	1987..1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	//1996..2005 :  ;
	2005..2016 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	//2017..4096 :  ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_hst_purchase_sprite_colours_2cc_check, colour_scheme_1){
	1 : sw_hst_purchase_sprite_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_hst_colours_auto, current_year){
	1971 .. 1982 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	1987..1995 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	//1996..2005 :  ;
	2005..2009 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2010..2016 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	//2017..4096 :  ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_hst_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;   //BR Blue
	1 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;         //Intercity 125
	2 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;         //Intercity Swallow
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;    //MML
	5 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;     //EMT
	6 : palette_2cc(COLOUR_PALE_GREEN, COLOUR_YELLOW) ; //First Fag
	7 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;  //First Barbie
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;    //First Great Western
	9 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;  //GWR
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;             //Virgin
}


switch(FEAT_TRAINS, SELF, sw_hst_colours_manual_check, livery_choice){
	1 : sw_hst_colours_manual ;
	sw_hst_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_hst_colours_2cc_check, colour_scheme_1){
	1 : sw_hst_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Power switch



//Item

item(FEAT_TRAINS, item_hst, 43){
	property{
		name                           : string(STR_NAME_HST) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1975,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 6 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 240 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL] ;
		cargo_capacity                 : 10 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 125 mph ;
		power                          : 1680 kW ;
		weight                         : 70 ton ;
		tractive_effort_coefficient    : 0.1142857142857143 ;
		air_drag_coefficient           : 0.064 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		ai_special_flag                : AI_FLAG_PASSENGER ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_hst_sprite_stack ;
		purchase                : sw_hst_purchase_sprite ;
		sound_effect            : sw_sfx_hst ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_hst_colours_2cc_check ;
		purchase_colour_mapping : sw_hst_purchase_sprite_colours_2cc_check ;
		cargo_subtype_text      : sw_hst_refit_text_check ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 60 : 240) ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_hst, 43){
	property{
		name                           : string(STR_NAME_HST_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/GE_Powerhaul.pnml" 1
//GE Powerhaul

//Templates

template template_powerhaul(x, y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+0,y,8,23,-3,-11]    //North
	[x+10,y,20,16,-13,-8]  //North East
	[x+32,y,33,11,-17,-7]  //East
	[x+67,y,20,16,-5,-8]   //South East
	[x+89,y,8,23,-3,-11]   //South
	[x+99,y,20,16,-13,-8]   //South West
	[x+121,y,33,11,-17,-7] //West
	[x+156,y,20,16,-5,-8]  //North West
}

template template_powerhaul_reverse(x, y){
	//left_x, upper_y, width, height, offset_x, offset_y
	[x+89,y,8,23,-3,-11]   //South
	[x+99,y,20,16,-13,-8]   //South West
	[x+121,y,33,11,-17,-7] //West
	[x+156,y,20,16,-5,-8]  //North West
	[x+0,y,8,23,-3,-11]    //North
	[x+10,y,20,16,-13,-8]  //North East
	[x+32,y,33,11,-17,-7]  //East
	[x+67,y,20,16,-5,-8]   //South East
}


//Sritesets

spriteset (gfx_powerhaul_fliner             , "gfx/DIESEL_LOCO/class_70.png"){template_powerhaul(0,25)}
spriteset (gfx_powerhaul_fliner_reverse     , "gfx/DIESEL_LOCO/class_70.png"){template_powerhaul_reverse(0,25)}
spriteset (gfx_powerhaul_colas              , "gfx/DIESEL_LOCO/class_70.png"){template_powerhaul(0,0)}
spriteset (gfx_powerhaul_colas_reverse      , "gfx/DIESEL_LOCO/class_70.png"){template_powerhaul_reverse(0,0)}

spriteset (gfx_powerhaul_headlights         , "gfx/FIXTURES/class_70_lights.png"){template_powerhaul(0,0)}
spriteset (gfx_powerhaul_taillights         , "gfx/FIXTURES/class_70_lights.png"){template_powerhaul(0,25)}

spriteset (gfx_powerhaul_fliner_purchase    , "gfx/DIESEL_LOCO/class_70.png"){template_purchase_short(178,25)}
spriteset (gfx_powerhaul_colas_purchase     , "gfx/DIESEL_LOCO/class_70.png"){template_purchase_short(178,0)}


//Graphics

switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_fliner_reverse_check, vehicle_is_reversed){ 1 : gfx_powerhaul_fliner_reverse  ; gfx_powerhaul_fliner ; }
switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_colas_reverse_check, vehicle_is_reversed){ 1 : gfx_powerhaul_colas_reverse ; gfx_powerhaul_colas ; }

//Automatic

switch(FEAT_TRAINS, PARENT, sw_powerhaul_gfx_auto_decider, most_common_cargo_type){
	GOOD : sw_powerhaul_gfx_fliner_reverse_check ;
	FOOD : sw_powerhaul_gfx_fliner_reverse_check ;
	STEL : sw_powerhaul_gfx_fliner_reverse_check ;
	MAIL : sw_powerhaul_gfx_fliner_reverse_check ;
	sw_powerhaul_gfx_colas_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_auto, current_year){
	2008..2014 : sw_powerhaul_gfx_fliner_reverse_check ;
	sw_powerhaul_gfx_auto_decider ;
}


//Manual

switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_manual, cargo_subtype){
	0 : sw_powerhaul_gfx_fliner_reverse_check ;
	sw_powerhaul_gfx_colas_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_gfx_manual_check, livery_choice){
	1 : sw_powerhaul_gfx_manual ;
	sw_powerhaul_gfx_auto ;
}


//Spritestacking

switch(FEAT_TRAINS, SELF, sw_powerhaul_headlights, position_in_consist){ 0 : gfx_powerhaul_headlights;}
switch(FEAT_TRAINS, SELF, sw_powerhaul_taillights, position_in_consist_from_end){ 0 : gfx_powerhaul_taillights;}

switch(FEAT_TRAINS, SELF, sw_powerhaul_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_powerhaul_gfx_manual_check ;
	1 : sw_powerhaul_headlights ;
	2 : sw_powerhaul_taillights ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_powerhaul_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_FREIGHTLINER_POWERHAUL) ;
	1 : string(STR_LIVERY_COLAS) ;
	CB_RESULT_NO_TEXT ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_refit_text_check, livery_choice){
	1 : sw_powerhaul_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase, current_year){
	2008..2014 : gfx_powerhaul_fliner_purchase ;
	gfx_powerhaul_colas_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase_colours, current_year){
	2008..2014 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_purchase_2cc_check, colour_scheme_1){
	1 : sw_powerhaul_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_powerhaul_colours_auto_decider, most_common_cargo_type){
	GOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	FOOD : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	STEL : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	MAIL : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_auto, current_year){
	2008..2014 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	sw_powerhaul_colours_auto_decider ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
}


switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_manual_check, livery_choice){
	1 : sw_powerhaul_colours_manual ;
	sw_powerhaul_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_powerhaul_colours_2cc_check, colour_scheme_1){
	1 : sw_powerhaul_colours_manual_check ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}


//item
item(FEAT_TRAINS, item_powerhaul, 70){
	property{
		name                           : string(STR_NAME_POWERHAUL) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2009,11,28) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 30 ;
		reliability_decay              : 5 ;
		cost_factor                    : 75 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 255 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 3690 hp ;
		weight                         : 129 ton ;
		tractive_effort_coefficient    : 0.4217054263565891 ;
		air_drag_coefficient           : 0.1066666666666667 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_powerhaul_spritestack ;
		purchase                : sw_powerhaul_purchase ;
		sound_effect            : sw_sfx_diesel_loco_modern ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_powerhaul_colours_2cc_check ;
		purchase_colour_mapping : sw_powerhaul_purchase_2cc_check ;
		cargo_subtype_text      : sw_powerhaul_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 64 : 255) ;
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_powerhaul, 70){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_powerhaul, 70){
	property{
		name                           : string(STR_NAME_POWERHAUL_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DIESEL_LOCO/UKLight.pnml" 1
//UK Light

//Spritesets

spriteset (gfx_uklight_drs           , "gfx/DIESEL_LOCO/class_68.png"){template_uklight(0,0)}
spriteset (gfx_uklight_drs_reverse   , "gfx/DIESEL_LOCO/class_68.png"){template_uklight_reverse(0,0)}
spriteset (gfx_uklight_tpe           , "gfx/DIESEL_LOCO/class_68.png"){template_uklight(0,26)}
spriteset (gfx_uklight_tpe_reverse   , "gfx/DIESEL_LOCO/class_68.png"){template_uklight_reverse(0,26)}
spriteset (gfx_uklight_scot          , "gfx/DIESEL_LOCO/class_68.png"){template_uklight(0,52)}
spriteset (gfx_uklight_scot_reverse  , "gfx/DIESEL_LOCO/class_68.png"){template_uklight_reverse(0,52)}
spriteset (gfx_uklight_chr           , "gfx/DIESEL_LOCO/class_68.png"){template_uklight(0,78)}
spriteset (gfx_uklight_chr_reverse   , "gfx/DIESEL_LOCO/class_68.png"){template_uklight_reverse(0,78)}
                                   
spriteset (gfx_uklight_headlight   , "gfx/FIXTURES/uklight_headlight.png"){template_uklight(0,0)}

spriteset (gfx_uklight_drs_purchase, "gfx/DIESEL_LOCO/class_68.png"){template_purchase(176, 0)}
spriteset (gfx_uklight_tpe_purchase, "gfx/DIESEL_LOCO/class_68.png"){template_purchase(176, 26)}

//Graphics

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_drs_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_drs_reverse ; gfx_uklight_drs ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_tpe_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_tpe_reverse ; gfx_uklight_tpe ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_scot_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_scot_reverse ; gfx_uklight_scot ; }
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_chr_reverse_check, vehicle_is_reversed){ 1 : gfx_uklight_chr_reverse ; gfx_uklight_chr ; }


//Automatic

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_dvt_check, count_veh_id(9035)){
	0 : sw_uklight_gfx_scot_reverse_check ;
	sw_uklight_gfx_chr_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check, most_common_cargo_type){
	PASS : sw_uklight_gfx_passenger_dvt_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check_2, most_common_cargo_type){
	PASS : sw_uklight_gfx_tpe_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_auto, current_year){
	2013 : sw_uklight_gfx_drs_reverse_check ;
	2014..2018 : sw_uklight_gfx_passenger_check ;
	sw_uklight_gfx_passenger_check_2 ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_manual, cargo_subtype){
	1 : sw_uklight_gfx_tpe_reverse_check ;
	2 : sw_uklight_gfx_scot_reverse_check ;
	3 : sw_uklight_gfx_chr_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_uklight_gfx_manual_check, livery_choice){
	1 : sw_uklight_gfx_manual ;
	sw_uklight_gfx_auto ;
}


//Spritestacking

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_headlights, position_in_consist){
	0 : gfx_uklight_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_uklight_gfx_manual_check ;
	1 : sw_uklight_gfx_headlights ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_uklight_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_DRS_COMPASS) ;
	1 : string(STR_LIVERY_TPE_NEW) ;
	2 : string(STR_LIVERY_SCOTRAIL) ;
	3 : string(STR_LIVERY_CHILTERN) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_refit_text_check, livery_choice){
	1 : sw_uklight_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_dvt_check, count_veh_id(9035)){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_check, most_common_cargo_type){
	PASS : sw_uklight_colours_passenger_dvt_check ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_passenger_check_2, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_auto, current_year){
	2013 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2014..2018 : sw_uklight_colours_passenger_check ;
	sw_uklight_colours_passenger_check_2 ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
}


switch(FEAT_TRAINS, SELF, sw_uklight_colours_manual_check, livery_choice){
	1 : sw_uklight_colours_manual ;
	sw_uklight_colours_auto ;
}


switch(FEAT_TRAINS, SELF, sw_uklight_colours_2cc_check, colour_scheme_1){
	1 : sw_uklight_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//DBSO checks

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_uklight_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_uklight_gfx_dbso_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_uklight_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_uklight_colours_dbso_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_vfx_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_diesel_default ;
}


//Mark 3 override

//Graphics

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx, current_year){
	2013..2018 : gfx_mk3_chiltern ;    //First Barbie
	sw_mk3_gfx_auto ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_uklight_mk3_override_gfx ;
	2 : sw_mk3_gfx_window_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_gfx_check, livery_choice){
	1 : sw_mk3_sprite_stack ;
	sw_uklight_mk3_override_gfx_spritestack ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_colours, current_year){
	2014..2018 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_uklight_mk3_override_colour_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_uklight_mk3_override_colours ;
}



//Item

item (FEAT_TRAINS, item_uklight, 68){
	property{
		name                           : string(STR_NAME_UKLIGHT) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2014, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 7 ;
		cost_factor                    : 42 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 240 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 100 mph ;
		power                          : 3800 hp ;
		weight                         : 85 ton ;
		tractive_effort_coefficient    : 0.3729411764705882 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_uklight_gfx_dvt_check ;
		purchase                : gfx_uklight_drs_purchase ;
		colour_mapping          : sw_uklight_colours_dvt_check ;
		purchase_colour_mapping : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
		sound_effect            : sw_sfx_diesel_loco_modern ;
		create_effect           : sw_uklight_vfx_dbso_check ;
		cargo_subtype_text      : sw_uklight_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 60 : 240) ;
	}
	livery_override(9030){
		default                 : sw_uklight_mk3_override_gfx_check ;
		colour_mapping          : sw_uklight_mk3_override_colour_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_uklight, 68){
	property{
		name                           : string(STR_NAME_UKLIGHT_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/ELECTRIC_LOCO/BR_Class87.pnml" 1
//Class 87

//Spritesets

spriteset(gfx_br87_brblue              , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double(0,0)}
spriteset(gfx_br87_brblue_reverse      , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double_reverse(0,0)}
spriteset(gfx_br87_intercity           , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double(0,25)}
spriteset(gfx_br87_intercity_reverse   , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double_reverse(0,25)}
spriteset(gfx_br87_virgin              , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double(0,50)}
spriteset(gfx_br87_virgin_reverse      , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double_reverse(0,50)}
spriteset(gfx_br87_calsleeper          , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double(0,75)}
spriteset(gfx_br87_calsleeper_reverse  , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double_reverse(0,75)}
spriteset(gfx_br87_gbrf                , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double(0,100)}
spriteset(gfx_br87_gbrf_reverse        , "gfx/ELECTRIC_LOCO/class_87.png"){template_Mk2_double_reverse(0,100)}

spriteset(gfx_br87_brblue_purchase     , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,0)}
spriteset(gfx_br87_intercity_purchase  , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,25)}
spriteset(gfx_br87_virgin_purchase     , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,50)}
spriteset(gfx_br87_calsleeper_purchase , "gfx/ELECTRIC_LOCO/class_87.png"){template_purchase(178,75)}

spriteset(gfx_br87_headlight     , "gfx/FIXTURES/class_87_headlights.png"){template_Mk2_double(0,0)}
spriteset(gfx_br87_taillight     , "gfx/FIXTURES/class_87_headlights.png"){template_Mk2_double(0,25)}

//Switches

//Graphics

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_brblue_reverse_check     , vehicle_is_reversed){ 1 : gfx_br87_brblue_reverse     ; gfx_br87_brblue ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_intercity_reverse_check  , vehicle_is_reversed){ 1 : gfx_br87_intercity_reverse  ; gfx_br87_intercity ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_virgin_reverse_check     , vehicle_is_reversed){ 1 : gfx_br87_virgin_reverse     ; gfx_br87_virgin ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_calsleeper_reverse_check , vehicle_is_reversed){ 1 : gfx_br87_calsleeper_reverse ; gfx_br87_calsleeper ;}
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_gbrf_reverse_check       , vehicle_is_reversed){ 1 : gfx_br87_gbrf_reverse       ; gfx_br87_gbrf ;}

//Automatic liveries

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_privatised, most_common_cargo_type){
	PASS : sw_br87_gfx_calsleeper_reverse_check ;
	sw_br87_gfx_gbrf_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_gfx_auto, current_year){
	1971 .. 1982 : sw_br87_gfx_brblue_reverse_check ;
	1983 .. 1995 : sw_br87_gfx_intercity_reverse_check ;
	2005 .. 4096 : sw_br87_gfx_privatised ;
	sw_br87_gfx_virgin_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_br87_gfx_manual, cargo_subtype){
	0 : sw_br87_gfx_brblue_reverse_check ;
	1 : sw_br87_gfx_intercity_reverse_check ;
	2 : sw_br87_gfx_virgin_reverse_check ;
	3 : sw_br87_gfx_calsleeper_reverse_check ;
	4 : sw_br87_gfx_gbrf_reverse_check ;
	sw_br87_gfx_virgin_reverse_check ;
}


switch(FEAT_TRAINS, SELF, sw_br87_gfx_manual_check, livery_choice){
	1 : sw_br87_gfx_manual ;
	sw_br87_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_br87_taillight_decider, position_in_consist_from_end){
	0 : gfx_br87_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_br87_headlight_decider, position_in_consist){
	0 : gfx_br87_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_br87_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_br87_gfx_manual_check ;
	1 : sw_br87_headlight_decider ;
	2 : sw_br87_taillight_decider ;
}


//Cargo refit text

switch(FEAT_TRAINS, SELF, sw_br87_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRBLUE) ;
	1 : string(STR_LIVERY_INTERCITY) ;
	2 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	3 : string(STR_LIVERY_CAL_SLEEPER) ;
	4 : string(STR_LIVERY_GBRF) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_br87_refit_text_checker, livery_choice){
	1 : sw_br87_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_br87_purchase, current_year){
	1971 .. 1982     : gfx_br87_brblue_purchase ;  
	1983 .. 1995  : gfx_br87_intercity_purchase ;  
	2005 .. 4096 : gfx_br87_calsleeper_purchase ;
	gfx_br87_virgin_purchase ;
}

//Colour mapping


random_switch(FEAT_TRAINS, SELF, sw_br87_sectorised_colours, TRIGGER_VEHICLE_SERVICE){ 3 : palette_2cc(COLOUR_GREY, COLOUR_RED) ; 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}

switch(FEAT_TRAINS, SELF, sw_br87_sectorised_colours_dbso_check, count_veh_id(9025) > 0){
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	sw_br87_sectorised_colours ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_privatised_colours, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_auto, current_year){
	1971 .. 1982     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995  : sw_br87_sectorised_colours_dbso_check ;
	2005 .. 4096 : sw_br87_privatised_colours ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_manual_check, livery_choice){
	1 : sw_br87_colours_manual ;
	sw_br87_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_2cc_check, colour_scheme_1){
	1 : sw_br87_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Mark 3 override

//Graphics

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx, current_year){
	2005..2014 : gfx_mk3_first_scotrail ;    //First Barbie
	sw_mk3_gfx_auto ;
}


//Windows deciders

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows, position_in_vehid_chain){
	2 : gfx_mk3_windows_buffet ;
	gfx_mk3_windows_sleeper ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows_rev, position_in_vehid_chain_from_end){
	2 : gfx_mk3_windows_buffet_rev ;
	gfx_mk3_windows_sleeper ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_mk3_override_windows_rev_check, vehicle_is_reversed){
	1 : sw_br87_mk3_override_windows_rev ;
	sw_br87_mk3_override_windows ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_windows_year_check, current_year){
	2005..2014 : sw_br87_mk3_override_windows_rev_check ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_gfx_window_reverse_check ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : sw_br87_mk3_override_gfx ;
	2 : sw_br87_mk3_override_windows_year_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_gfx_check, livery_choice){
	1 : sw_mk3_sprite_stack ;
	sw_br87_mk3_override_gfx_spritestack ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_colours, current_year){
	2005..2014 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;    //First Barbie
	//2015..4096 :  ;
	sw_mk3_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_br87_mk3_override_colour_check, livery_choice){
	1 : sw_mk3_colours_manual ;
	sw_br87_mk3_override_colours ;
}


//DBSO & DVT checks

//GFX
switch(FEAT_TRAINS, SELF, sw_br87_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_br87_sprite_stack ;
}

switch(FEAT_TRAINS, SELF, sw_br87_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_br87_gfx_dbso_check ;
}

//Colours

switch(FEAT_TRAINS, SELF, sw_br87_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_br87_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_br87_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_br87_colours_dbso_check ;
}

//VFX
switch(FEAT_TRAINS, SELF, sw_br87_vfx_dbso_dvt_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : vfx_ohle ;
}


//Item


item (FEAT_TRAINS, item_br87, 87){
	property{
		name                           : string(STR_NAME_87) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1972,1,1) ;
		model_life                     : 28 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 7 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 250 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : ELRL ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 110 mph ;
		power                          : 5000 hp ;
		weight                         : 83 ton ;
		tractive_effort_coefficient    : 0.3108433734939759 ;
		air_drag_coefficient           : 0.0727272727272727 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_br87_gfx_dvt_check ;
		purchase                : sw_br87_purchase ;
		sound_effect            : sw_sfx_electric_loco_old ;
		create_effect           : sw_br87_vfx_dbso_dvt_check ;
		colour_mapping          : sw_br87_colours_dvt_check ;
		purchase_colour_mapping : sw_br87_colours_auto ;
		cargo_subtype_text      : sw_br87_refit_text_checker ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 65 : 250) ;
	}
	livery_override(9030){
		default                 : sw_br87_mk3_override_gfx_check ;
		colour_mapping          : sw_br87_mk3_override_colour_check ;
		cargo_subtype_text      : sw_mk3_refit_text_check ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_br87, 87){
	property{
		name                           : string(STR_NAME_87_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/ELECTRIC_LOCO/EE_AL6.pnml" 1
//Class 87

//Spritesets

spriteset(gfx_al6_brblue				, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double(  0,  0)}
spriteset(gfx_al6_brblue_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double_reverse(  0,  0)}
spriteset(gfx_al6_acblue				, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double(  0, 25)}
spriteset(gfx_al6_acblue_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double_reverse(  0, 25)}
spriteset(gfx_al6_intercity				, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double(  0, 50)}
spriteset(gfx_al6_intercity_rev			, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double_reverse(  0, 50)}
spriteset(gfx_al6_railfreight			, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double(  0, 75)}
spriteset(gfx_al6_railfreight_rev		, "gfx/ELECTRIC_LOCO/class_86.png"){template_Mk2_double_reverse(  0, 75)}

spriteset(gfx_al6_brblue_purchase		, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178,  0)}
spriteset(gfx_al6_acblue_purchase		, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 25)}
spriteset(gfx_al6_intercity_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 50)}
spriteset(gfx_al6_railfreight_purchase	, "gfx/ELECTRIC_LOCO/class_86.png"){template_purchase(178, 75)}

spriteset(gfx_al6_headlight				, "gfx/FIXTURES/class_86_headlights.png"){template_Mk2_double(0,0)}
spriteset(gfx_al6_taillight				, "gfx/FIXTURES/class_86_headlights.png"){template_Mk2_double(0,25)}


//Switches

//Graphics

switch(FEAT_TRAINS, PARENT, sw_al6_gfx_brblue_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_brblue_rev 		; gfx_al6_brblue ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_acblue_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_acblue_rev 		; gfx_al6_acblue ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_intercity_reverse_check , vehicle_is_reversed){ 		1 : gfx_al6_intercity_rev 	; gfx_al6_intercity ;}
switch(FEAT_TRAINS, PARENT, sw_al6_gfx_railfreight_reverse_check , vehicle_is_reversed){	1 : gfx_al6_railfreight_rev ; gfx_al6_railfreight ;}


//Automatic liveries

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto_sectorised, most_common_cargo_type){
	PASS : sw_al6_gfx_intercity_reverse_check ;
	MAIL : sw_al6_gfx_railfreight_reverse_check ;
	sw_al6_gfx_railfreight_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_auto, current_year){
	0..1967		: sw_al6_gfx_acblue_reverse_check ;
	1968..1982	: sw_al6_gfx_brblue_reverse_check ;
	1983..1995	: sw_al6_gfx_auto_sectorised ;
	sw_al6_gfx_brblue_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual, cargo_subtype){
	0 : sw_al6_gfx_acblue_reverse_check ;
	1 : sw_al6_gfx_brblue_reverse_check ;
	2 : sw_al6_gfx_intercity_reverse_check ;
	3 : sw_al6_gfx_railfreight_reverse_check ;
	sw_al6_gfx_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual_check, livery_choice){
	1 : sw_al6_gfx_manual ;
	sw_al6_gfx_auto ;
}

//Lights sprite stacking

switch(FEAT_TRAINS, SELF, sw_al6_taillights, position_in_consist_from_end){
	0 : gfx_al6_taillight ;
}

switch(FEAT_TRAINS, SELF, sw_al6_headlights, position_in_consist){
	0 : gfx_al6_headlight ;
}

switch(FEAT_TRAINS, SELF, sw_al6_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_al6_gfx_manual_check ;
	1 : sw_al6_taillights ;
	2 : sw_al6_headlights ;
}


//Graphics DBSO/DVT checks

switch(FEAT_TRAINS, SELF, sw_al6_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_al6_sprite_stack ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_al6_gfx_dbso_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_al6_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_BRELECTRIC) ;
	1 : string(STR_LIVERY_BRBLUE) ;
	2 : string(STR_LIVERY_INTERCITY) ;
	3 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_GENERAL))) ;
	//4 : string(STR_LIVERY_RAIL_EXPRESS) ;
	//5 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	//6 : string(STR_LIVERY_FREIGHTLINER) ;
	//7 : string(STR_LIVERY_COLAS) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_al6_refit_text_check, livery_choice){
	1 : sw_al6_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping

//Automatic


switch(FEAT_TRAINS, SELF, sw_al6_colours_auto_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	MAIL : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_auto, current_year){
	0..1967		: palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1968..1982	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1995	: sw_al6_colours_auto_sectorised ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	5 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	7 : palette_2cc(COLOUR_ORANGE, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual_check, livery_choice){
	1 : sw_al6_colours_manual ;
	sw_al6_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_2cc_check, colour_scheme_1){
	1 : sw_al6_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Colours DBSO/DVT checks

switch(FEAT_TRAINS, SELF, sw_al6_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_al6_colours_2cc_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_al6_colours_dbso_check ;
}


//Purchase spriteset

switch(FEAT_TRAINS, SELF, sw_al6_purchase, current_year){
	0..1967		: gfx_al6_acblue_purchase ;
	1968..1982	: gfx_al6_brblue_purchase ;
	1983..1995	: gfx_al6_intercity_purchase ;
	gfx_al6_railfreight_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_al6_purchase_colours, current_year){
	0..1967		: palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1968..1982	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1995	: palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_al6_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item


item (FEAT_TRAINS, item_al6, 86){
	property{
		name                           : string(STR_NAME_AL6) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1965,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 53 ;
		reliability_decay              : 9 ;
		cost_factor                    : 48 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 235 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : ELRL ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 100 mph ;
		power                          : 3013 kW ;
		weight                         : 86 ton ;
		tractive_effort_coefficient    : 0.3 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_al6_gfx_dvt_check ;
		purchase                : sw_al6_purchase ;
		sound_effect            : sw_sfx_electric_loco_old ;
		create_effect           : sw_br87_vfx_dbso_dvt_check ;
		colour_mapping          : sw_al6_colours_dvt_check ;
		purchase_colour_mapping : sw_al6_purchase_colours_2cc_check ;
		cargo_subtype_text      : sw_al6_refit_text_check ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 40 : 235) ;
		purchase_power          : 3013 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_al6, 86){
	property{
		name                           : string(STR_NAME_AL6_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/ELECTRIC_LOCO/class_90.pnml" 1
//Class 90

//Sprite sets

spriteset(gfx_cl90_intercity			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		(   0,  25) }
spriteset(gfx_cl90_intercity_rev		, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_rev_2	(   0,  25) }
spriteset(gfx_cl90_railfreight			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		(   0,  50) }
spriteset(gfx_cl90_railfreight_rev		, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_rev_2	(   0,  50) }

spriteset(gfx_cl90_purchase_intercity	, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_purchase	( 175,  25) }


spriteset(gfx_cl90_panto_up				, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		( 260,   0) }
spriteset(gfx_cl90_panto_up_rev			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_rev_2	( 260,   0) }
spriteset(gfx_cl90_panto_down			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		( 260,  25) }
spriteset(gfx_cl90_panto_down_rev		, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_rev_2	( 260,  25) }

spriteset(gfx_cl90_headlight			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		( 260,  50) }
spriteset(gfx_cl90_taillight			, "gfx/ELECTRIC_LOCO/class_90_new.png"){ template_7_8_2		( 260,  75) }


//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_intercity, vehicle_is_reversed){		1 : gfx_cl90_intercity_rev ;	gfx_cl90_intercity		; }
switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_rev_check_railfreight, vehicle_is_reversed){	1 : gfx_cl90_railfreight_rev ;	gfx_cl90_railfreight	; }


//Automatic

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_auto_sectorised, most_common_cargo_type){
	PASS : sw_cl90_gfx_rev_check_intercity ;
	sw_cl90_gfx_rev_check_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_auto, current_year){
	sw_cl90_gfx_auto_sectorised ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_manual, cargo_subtype){
	0 : sw_cl90_gfx_rev_check_intercity ;
	sw_cl90_gfx_rev_check_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_manual_check, livery_choice){
	1 : sw_cl90_gfx_manual ;
	sw_cl90_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_panto_up_rev_check, vehicle_is_reversed){
	1 : gfx_cl90_panto_up_rev ;
	gfx_cl90_panto_up ;
}

switch(FEAT_TRAINS, PARENT, sw_cl90_gfx_panto_down_rev_check, vehicle_is_reversed){
	1 : gfx_cl90_panto_down_rev ;
	gfx_cl90_panto_down ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_panto_check, vehicle_is_potentially_powered){
	1 : sw_cl90_gfx_panto_up_rev_check ;
	sw_cl90_gfx_panto_down_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_headlights_check, position_in_consist){ 0 : gfx_cl90_headlight ; }
switch(FEAT_TRAINS, SELF, sw_cl90_gfx_taillights_check, position_in_consist){ 0 : gfx_cl90_taillight ; }

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl90_gfx_manual_check ;
	1 : sw_cl90_gfx_panto_check ;
	2 : sw_cl90_gfx_headlights_check ;
	3 : sw_cl90_gfx_taillights_check ;
}

/* //Graphics DVT check

switch(FEAT_TRAINS, SELF, sw_cl90_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_cl90_gfx_sprite_stack ;
}
 */


//Colours

//Automatic

switch(FEAT_TRAINS, SELF, sw_cl90_colours_auto_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_auto, current_year){
	sw_cl90_colours_auto_sectorised ;
}



//Manual

switch(FEAT_TRAINS, SELF, sw_cl90_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_manual_check, livery_choice){
	1 : sw_cl90_colours_manual ;
	sw_cl90_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_colours_2cc_check, colour_scheme_1){
	1 : sw_cl90_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


/* //Colours DVT check

switch(FEAT_TRAINS, SELF, sw_cl90_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_cl90_colours_2cc_check ;
} */




//Refit text

switch(FEAT_TRAINS, SELF, sw_cl90_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_INTERCITY) ;
	1 : return(string(STR_LIVERY_RAILFREIGHT,string(STR_SECTOR_GENERAL))) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_refit_text_check, livery_choice){
	1 : sw_cl90_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_cl90_purchase, current_year){
	gfx_cl90_purchase_intercity ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_purchase_colours, current_year){
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_cl90_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_cl90_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Item

item(FEAT_TRAINS, item_cl90, 90){
	property{
		name		                    : string(STR_NAME_90) ;
		misc_flags		                : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id		                : SPRITE_ID_NEW_TRAIN ;
		length		                    : 7 ;
		climates_available		        : ALL_CLIMATES ;
		introduction_date		        : date(1987,1,1) ;
		model_life		                : 25 ;
		vehicle_life		            : 40 ;
		reliability_decay		        : 6 ;
		cost_factor		                : 55 ;
		running_cost_base		        : RUNNING_COST_ELECTRIC ;
		running_cost_factor		        : 255 ;
		refit_cost		                : 0 ;
		refittable_cargo_classes		: 0 ;
		cargo_allow_refit		        : [GOOD] ;
		cargo_capacity		            : 1 ;
		track_type		                : ELRL ;
		engine_class		            : ENGINE_CLASS_ELECTRIC ;
		speed		                    : 110 mph ;
		power		                    : 3700 kW ;
		weight		                    : 84.5 ton ;
		tractive_effort_coefficient		: 0.31 ;
		air_drag_coefficient		    : 0.08 ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed						: 0 ;
	}
		graphics{
			default			                : sw_cl90_gfx_sprite_stack ;
			purchase			            : sw_cl90_purchase ;
			sound_effect			        : sw_sfx_electric_loco_old ;
			create_effect			        : sw_br87_vfx_dbso_dvt_check ;
			colour_mapping			        : sw_cl90_colours_2cc_check ;
			purchase_colour_mapping			: sw_cl90_purchase_colours_2cc_check ;
			cargo_subtype_text			    : sw_cl90_refit_text_check ;
			purchase_cargo_capacity			: 0 ;
			cargo_capacity			        : return 0 ;
			can_attach_wagon			    : sw_all_but_MU90 ;
			running_cost_factor			    : return(current_speed == 0 ? 50 : 255) ;
			purchase_running_cost_factor	: 255 ;
			purchase_power					: 3700 ;
		}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_cl90, 90){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_cl90, 90){
	property{
		name                           : string(STR_NAME_90_ALT) ;
	}
}
}


# 1 "rukts.pnml" 2
# 1 "src/ELECTRIC_LOCO/class_92.pnml" 1
///Brush/ABB 92

//Spritesets

spriteset(gfx_abb92_railfreight       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0, 50) }
spriteset(gfx_abb92_railfreight_rev   , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0, 50) }
spriteset(gfx_abb92_ews               , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0, 75) }
spriteset(gfx_abb92_ews_rev           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0, 75) }
spriteset(gfx_abb92_dbcargo           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,100) }
spriteset(gfx_abb92_dbcargo_rev       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,100) }
spriteset(gfx_abb92_calsleeper        , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,125) }
spriteset(gfx_abb92_calsleeper_rev    , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,125) }
spriteset(gfx_abb92_gbrf              , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(  0,150) }
spriteset(gfx_abb92_gbrf_rev          , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double_reverse(  0,150) }

spriteset(gfx_abb92_purchase_railfreight, "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase_short(178, 50) }
spriteset(gfx_abb92_purchase_ews        , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase_short(178, 75) }
spriteset(gfx_abb92_purchase_dbcargo    , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase_short(178,100) }
spriteset(gfx_abb92_purchase_calsleeper , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase_short(178,125) }
spriteset(gfx_abb92_purchase_gbrf       , "gfx/ELECTRIC_LOCO/class_92.png"){ template_purchase_short(178,150) }

spriteset(gfx_abb92_pantograph          , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 0) }
spriteset(gfx_abb92_pantograph_rev      , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 25) }
spriteset(gfx_abb92_headlight           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 50) }
spriteset(gfx_abb92_taillight           , "gfx/ELECTRIC_LOCO/class_92.png"){ template_Mk2_double(235, 75) }



//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_abb92_railfreight_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_railfreight_rev ; gfx_abb92_railfreight ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_ews_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_ews_rev ; gfx_abb92_ews ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_dbcargo_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_dbcargo_rev ; gfx_abb92_dbcargo ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_calsleeper_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_calsleeper_rev ; gfx_abb92_calsleeper ;}
switch(FEAT_TRAINS, PARENT, sw_abb92_gbrf_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_gbrf_rev ; gfx_abb92_gbrf ;}


switch(FEAT_TRAINS, PARENT, sw_abb92_private_2_decider, most_common_cargo_type){
	PASS : sw_abb92_calsleeper_rev_check ;
	sw_abb92_gbrf_rev_check ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_auto, current_year){
	1995..2007 : sw_abb92_ews_rev_check ;
	2008..2012 : sw_abb92_dbcargo_rev_check ;
	2013..4096 : sw_abb92_private_2_decider ;
	sw_abb92_railfreight_rev_check ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_manual, cargo_subtype){
	1 : sw_abb92_ews_rev_check ;
	2 : sw_abb92_dbcargo_rev_check ;
	3 : sw_abb92_gbrf_rev_check ;
	4 : sw_abb92_calsleeper_rev_check ;
	sw_abb92_railfreight_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_abb92_manual_check, livery_choice){
	1 : sw_abb92_manual ;
	sw_abb92_auto ;
}

//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_abb92_panto_rev_check, vehicle_is_reversed){ 1 : gfx_abb92_pantograph_rev ; gfx_abb92_pantograph ; }
switch(FEAT_TRAINS, SELF, sw_abb92_panto_check, current_railtype){ ELRL : sw_abb92_panto_rev_check ; SAAZ : sw_abb92_panto_rev_check ; gfx_blank ; }

switch(FEAT_TRAINS, SELF, sw_abb92_taillight_check, position_in_consist_from_end){ 0 : gfx_abb92_taillight ; }
switch(FEAT_TRAINS, SELF, sw_abb92_headlight_check, position_in_consist){ 0 : gfx_abb92_headlight ; sw_abb92_taillight_check ; }

switch(FEAT_TRAINS, SELF, sw_abb92_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_abb92_manual_check ;
	1 : sw_abb92_headlight_check ;
	//2 : sw_abb92_taillight_check ;
	2 : sw_abb92_panto_check ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_abb92_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_RAILFREIGHT, string(STR_LIVERY_EMPTY)) ;
	1 : string(STR_LIVERY_EWS) ;
	2 : string(STR_LIVERY_DBSCHENKER) ;
	3 : string(STR_LIVERY_GBRF) ;
	4 : string(STR_LIVERY_CAL_SLEEPER) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_refit_text_checker, livery_choice){
	1 : sw_abb92_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Purchase

switch(FEAT_TRAINS, SELF, sw_abb92_purchase, current_year){
	1995..2007 : gfx_abb92_purchase_ews ;
	2008..2012 : gfx_abb92_purchase_dbcargo ;
	2013..4096 : gfx_abb92_purchase_gbrf ;
	gfx_abb92_purchase_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_purchase_colours, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_purchase_2cc_check, colour_scheme_1){
	1 : sw_abb92_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_abb92_colours_private_2_decider, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_auto, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : sw_abb92_colours_private_2_decider ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual, cargo_subtype){
	1..2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	3    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual_check, livery_choice){
	1 : sw_abb92_colours_manual ;
	sw_abb92_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_2cc_check, colour_scheme_1){
	1 : sw_abb92_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Other switches

switch(FEAT_TRAINS, SELF, sw_abb92_power, current_railtype){ SAA3 : return 5365 ; return 6705 ;}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){ 1 : sw_dbso_colours_2cc_check ; sw_abb92_colours_2cc_check ;}
switch(FEAT_TRAINS, SELF, sw_abb92_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_colours_2cc_check ; sw_abb92_colours_dbso_check ;}

switch(FEAT_TRAINS, SELF, sw_abb92_gfx_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){ 1 : sw_dbso_sprite_stack ; sw_abb92_spritestack ;}
switch(FEAT_TRAINS, SELF, sw_abb92_gfx_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){ 1 : sw_dvt_sprite_stack ; sw_abb92_gfx_dbso_check ;}

switch(FEAT_TRAINS, SELF, sw_abb92_vfx_dbso_dvt_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){ 0 : vfx_dual_voltage ; }

//Item

item (FEAT_TRAINS, item_abb92, 92){
	property{
		name                           : string(STR_NAME_92) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1993,4,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 5 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 225 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		track_type                     : SAAZ ;
		engine_class                   : ENGINE_CLASS_ELECTRIC ;
		speed                          : 85 mph ;
		power                          : 5000 kW ;
		weight                         : 126 ton ;
		tractive_effort_coefficient    : 0.2857142857142857 ;
		air_drag_coefficient           : 0.095 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_abb92_gfx_dvt_check ;
		purchase                : sw_abb92_purchase ;
		sound_effect            : sw_sfx_electric_loco_modern ;
		create_effect           : sw_abb92_vfx_dbso_dvt_check ;
		colour_mapping          : sw_abb92_colours_dvt_check ;
		purchase_colour_mapping : sw_abb92_purchase_2cc_check ;
		cargo_subtype_text      : sw_abb92_refit_text_checker ;
		purchase_power          : 6705 ;
		power                   : sw_abb92_power ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 55 : 225) ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_abb92, 92){
	property{
		name                           : string(STR_NAME_92_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/ELECTRIC_LOCO/EuroDual.pnml" 1
//Class 88

//Spritesets

spriteset(gfx_eurodual_drs         , "gfx/ELECTRIC_LOCO/class_88.png"){template_uklight(0,0)}
spriteset(gfx_eurodual_drs_reverse , "gfx/ELECTRIC_LOCO/class_88.png"){template_uklight_reverse(0,0)}

spriteset(gfx_eurodual_drs_purchase, "gfx/ELECTRIC_LOCO/class_88.png"){template_purchase_short(176,0)}


switch(FEAT_TRAINS, PARENT, sw_eurodual_gfx_drs_reversal_check, vehicle_is_reversed){
	1 : gfx_eurodual_drs_reverse ;
	gfx_eurodual_drs ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_eurodual_gfx_drs_reversal_check ;
	1 : sw_uklight_gfx_headlights ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_sprite_stack ;
	sw_eurodual_spritestack ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_sprite_stack ;
	sw_eurodual_dbso_check ;
}


//Colour mapping

switch(FEAT_TRAINS, SELF, sw_eurodual_colours, colour_scheme_1){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_dbso_check, vehicle_is_reversed && (count_veh_id(9025) > 0)){
	1 : sw_dbso_colours_2cc_check ;
	sw_eurodual_colours ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_colours_dvt_check, vehicle_is_reversed && (count_veh_id(9035) > 0)){
	1 : sw_dvt_colours_2cc_check ;
	sw_eurodual_colours_dbso_check ;
}


//Effects deciders

switch(FEAT_TRAINS, SELF, sw_eurodual_sfx_decider, current_railtype){
	ELRL   : sw_sfx_electric_loco_modern ;
	SAAZ   : sw_sfx_electric_loco_modern ;
	//"3RDC" : sw_sfx_electric_loco_modern ;
	sw_sfx_diesel_loco_modern ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_effect_decider, current_railtype){
	ELRL   : vfx_ohle ;
	SAAZ   : vfx_ohle ;
	//"3RDC" : vfx_ohle ;
	vfx_diesel_default ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_effect_dbso_check, (vehicle_is_reversed && (count_veh_id(9025) > 0)) | (vehicle_is_reversed && (count_veh_id(9035) > 0))){
	0 : sw_eurodual_effect_decider ;
}

switch(FEAT_TRAINS, SELF, sw_eurodual_power_decider, current_railtype){
	ELRL   : 5364 ;
	SAAZ   : 5364 ;
	//"3RDC" : 5364 ;
	986 ;	
}

//Item

item (FEAT_TRAINS, item_eurodual, 88){
	property{
		name                           : string(STR_NAME_EURODUAL) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2016, 7, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 46 ;
		running_cost_base              : RUNNING_COST_ELECTRIC ;
		running_cost_factor            : 250 ;
		refit_cost                     : 0 ; 
		refittable_cargo_classes       : 0 ; 
		cargo_allow_refit              : [GOOD]  ;
		cargo_capacity                 : 1 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 100 mph ;
		power                          : 5364 hp ;
		weight                         : 86 ton ;
		tractive_effort_coefficient    : 0.3686046511627907 ;
		air_drag_coefficient           : 0.08 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_ELECTRIC ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                 : sw_eurodual_dvt_check ;
		purchase                : gfx_eurodual_drs_purchase ;
		purchase_colour_mapping : sw_eurodual_colours ;
		colour_mapping          : sw_eurodual_colours_dvt_check ;
		sound_effect            : sw_eurodual_sfx_decider ;
		create_effect           : sw_eurodual_effect_dbso_check ;
		purchase_power          : 5364 ;
		purchase_cargo_capacity : 0 ;
		cargo_capacity          : return 0 ;
		power                   : sw_eurodual_power_decider;
		can_attach_wagon        : sw_all_but_MU90;
		running_cost_factor     : return(current_speed == 0 ? 60 : 250) ;
	
	}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_eurodual, 88){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_eurodual, 88){
	property{
		name                           : string(STR_NAME_EURODUAL_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/DBSO.pnml" 1
//DBSO Item

//Over ride headers

# 1 "src/WAGON/DBSO/ee_type3.pnml" 1



switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_sector_gfx_decider, most_common_cargo_type){
	PASS : sw_ee3_regional_reverse_check ;
	COAL : sw_ee3_railfreight_black_reverse_check ;
	OIL_ : sw_ee3_railfreight_blue_reverse_check ;
	STEL : sw_ee3_railfreight_blue_reverse_check ;
	PLAS : sw_ee3_railfreight_blue_reverse_check ;
	BRCK : sw_ee3_railfreight_blue_reverse_check ;
	CMNT : sw_ee3_railfreight_blue_reverse_check ;
	GOLD : sw_ee3_railfreight_blue_reverse_check ;
	BDMT : sw_ee3_railfreight_blue_reverse_check ;
	GLAS : sw_ee3_railfreight_blue_reverse_check ;
	PETR : sw_ee3_railfreight_blue_reverse_check ;
	RFPR : sw_ee3_railfreight_blue_reverse_check ;
	SAND : sw_ee3_railfreight_blue_reverse_check ;
	ENSP : sw_ee3_railfreight_blue_reverse_check ;
	GRVL : sw_ee3_railfreight_blue_reverse_check ;
	MNSP : sw_ee3_railfreight_blue_reverse_check ;
	SCMT : sw_ee3_railfreight_blue_reverse_check ;
	COPR : sw_ee3_railfreight_blue_reverse_check ;
	sw_ee3_railfreight_reverse_check ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_dbso_privatisation1_random, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_privatisation1_random ;
	2 : sw_ee3_drs_reverse_check ;
	1 : sw_ee3_ews_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_privatisation2_decider, most_common_cargo_type){
	PASS : sw_ee3_drscompass_reverse_check ;
	URAN : sw_ee3_drscompass_reverse_check ;
	NWST : sw_ee3_drscompass_reverse_check ;
	GOOD : sw_ee3_drscompass_reverse_check ;
	MAIL : sw_ee3_drscompass_reverse_check ;
	VALU : sw_ee3_drscompass_reverse_check ;
	GOLD : sw_ee3_drscompass_reverse_check ;
	FOOD : sw_ee3_drscompass_reverse_check ;
	STEL : sw_ee3_colasrailfreight_reverse_check ;
	COAL : sw_ee3_colasrailfreight_reverse_check ;
	IORE : sw_ee3_colasrailfreight_reverse_check ;
	LVST : sw_ee3_colasrailfreight_reverse_check ;
	OIL_ : sw_ee3_colasrailfreight_reverse_check ;
	PAPR : sw_ee3_colasrailfreight_reverse_check ;
	WOOD : sw_ee3_colasrailfreight_reverse_check ;
	CORE : sw_ee3_colasrailfreight_reverse_check ;
	AORE : sw_ee3_colasrailfreight_reverse_check ;
	BDMT : sw_ee3_colasrailfreight_reverse_check ;
	BRCK : sw_ee3_colasrailfreight_reverse_check ;
	CMNT : sw_ee3_colasrailfreight_reverse_check ;
	GLAS : sw_ee3_colasrailfreight_reverse_check ;
	PETR : sw_ee3_colasrailfreight_reverse_check ;
	PLAS : sw_ee3_colasrailfreight_reverse_check ;
	RFPR : sw_ee3_colasrailfreight_reverse_check ;
	SAND : sw_ee3_colasrailfreight_reverse_check ;
	CLAY : sw_ee3_colasrailfreight_reverse_check ;
	GRVL : sw_ee3_colasrailfreight_reverse_check ;
	COPR : sw_ee3_colasrailfreight_reverse_check ;
	sw_ee3_rog_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_gfx_auto, current_year){
	1948 .. 1966 : sw_ee3_brgreen_reverse_check ;
	1967..1982  : sw_ee3_brblue_reverse_check ;
	1987..1995  : sw_ee3_dbso_sector_gfx_decider ;
	1996..2008  : sw_ee3_dbso_privatisation1_random ;
	2009..4096  : sw_ee3_dbso_privatisation2_decider ;
	sw_ee3_brlargelogo_reverse_check ;
}



//Manual


switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_gfx_manual, cargo_subtype){
	0  : sw_ee3_brgreen_reverse_check ;
	1  : sw_ee3_brblue_reverse_check ;
	4  : sw_ee3_regional_reverse_check ;
	5  : sw_ee3_railfreight_reverse_check ;
	6  : sw_ee3_railfreight_black_reverse_check ;
	7  : sw_ee3_railfreight_blue_reverse_check ;
	8  : sw_ee3_drs_reverse_check ;
	9  : sw_ee3_drscompass_reverse_check ;
	10 : sw_ee3_ews_reverse_check ;
	11 : sw_ee3_rog_reverse_check ;
	12 : sw_ee3_colasrailfreight_reverse_check ;
	sw_ee3_brlargelogo_reverse_check ;
}


switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_gfx_manual_check, livery_choice){
	1 : sw_ee3_dbso_gfx_manual ;
	sw_ee3_dbso_gfx_auto ;
}


//Dirt

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_dirt, age_in_days){
	0..3649    : gfx_blank ;
	3650..9124 : sw_ee3_dirt_light_reverse_check ;
	sw_ee3_dirt_dark_reverse_check ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_spritestack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee3_dbso_gfx_manual_check ;    //Base
	1 : gfx_ee3_headcode_centre ;  //Headcodes
	2 : sw_ee3_lights_centre_front ;  //Lights
	//3 : sw_ee3_dbso_dirt ;                //Dirt
}






//Colour mapping

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_sectorised, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_ee3_dbso_colours_privatisation1_decider, TRIGGER_VEHICLE_SERVICE){
	dependent : sw_ee3_dbso_privatisation1_random ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_privatisation2_decider, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	URAN : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	NWST : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	MAIL : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	VALU : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	GOLD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	FOOD : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	STEL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	COAL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	IORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	LVST : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	OIL_ : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PAPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	WOOD : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	AORE : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	BDMT : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	BRCK : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CMNT : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	GLAS : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PETR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	PLAS : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	RFPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	SAND : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	CLAY : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	GRVL : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	COPR : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_GREY, COLOUR_RED) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_auto, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1967..1982  : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983..1986  : sw_ee3_largelogo_colours ;
	1987..1995  : sw_ee3_dbso_colours_sectorised ;
	1996..2008  : sw_ee3_dbso_colours_privatisation1_decider ;
	2009..4096  : sw_ee3_dbso_colours_privatisation2_decider ;
}



switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_manual, cargo_subtype){
	0    : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	1..2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3    : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	5..7 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8..9 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	10   : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	11   : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	12   : palette_2cc(COLOUR_YELLOW, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_manual_check, livery_choice){
	1 : sw_ee3_dbso_colours_manual ;
	sw_ee3_dbso_colours_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_ee3_dbso_colours_2cc_check, colour_scheme_1){
	1 : sw_ee3_dbso_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/ee_type4.pnml" 1
//Graphics switches

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_auto_dbso, current_year){
	1948 .. 1966 : sw_ee40_gfx_brgreen_reverse_check ;
	1967..1982  : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}


//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_manual_dbso, cargo_subtype){
	0 : sw_ee40_gfx_brgreen_reverse_check ;
	1 : sw_ee40_gfx_brblue_reverse_check ;
	sw_ee40_gfx_brblue_logo_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_gfx_manual_check_dbso, livery_choice){
	1 : sw_ee40_colours_manual_dbso ;
	sw_ee40_gfx_auto_dbso ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_ee40_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_ee40_gfx_manual_check_dbso ;
	1 : ee40_headcode_2 ;
}


//Colours

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_auto_dbso, current_year){
	1948 .. 1966 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_recolours_manual_dbso, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}


switch(FEAT_TRAINS, PARENT, sw_ee40_colours_manual_check_dbso, livery_choice){
	1 : sw_ee40_recolours_manual_dbso ;
	sw_ee40_colours_auto_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_ee40_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_ee40_colours_manual_check_dbso ;
	palette_2cc(company_colour1, COLOUR_YELLOW) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/uklight.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_passenger_check_dbso, most_common_cargo_type){
	PASS : sw_uklight_gfx_tpe_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_auto_dbso, current_year){
	2013 : sw_uklight_gfx_drs_reverse_check ;
	2014..2018 : sw_uklight_gfx_passenger_check ;
	sw_uklight_gfx_passenger_check_2 ;
}

//Manual

switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_manual_dbso, cargo_subtype){
	1 : sw_uklight_gfx_tpe_reverse_check ;
	2 : sw_uklight_gfx_scot_reverse_check ;
	3 : sw_uklight_gfx_chr_reverse_check ;
	sw_uklight_gfx_drs_reverse_check ;
}


switch(FEAT_TRAINS, PARENT, sw_uklight_gfx_manual_check_dbso, livery_choice){
	1 : sw_uklight_gfx_manual_dbso ;
	sw_uklight_gfx_auto_dbso ;
}


//Spritestacking

switch(FEAT_TRAINS, PARENT, sw_uklight_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_uklight_gfx_manual_check_dbso ;
	1 : sw_uklight_gfx_headlights ;
}


//Colour mapping



switch(FEAT_TRAINS, PARENT, sw_uklight_colours_auto_dbso, current_year){
	2013 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN) ;
	2014..2018 : sw_uklight_colours_passenger_check ;
	sw_uklight_colours_passenger_check_2 ;
}

switch(FEAT_TRAINS, PARENT, sw_uklight_colours_manual_dbso, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	2 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE) ;
	3 : palette_2cc(COLOUR_GREY, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PALE_GREEN); 
}


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_manual_check_dbso, livery_choice){
	1 : sw_uklight_colours_manual_dbso ;
	sw_uklight_colours_auto_dbso ;
}


switch(FEAT_TRAINS, PARENT, sw_uklight_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_uklight_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/br87.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_br87_gfx_privatised_dbso, most_common_cargo_type){
	PASS : sw_br87_gfx_calsleeper_reverse_check ;
	sw_br87_gfx_gbrf_reverse_check ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_auto_dbso, current_year){
	1971 .. 1982 : sw_br87_gfx_brblue_reverse_check ;
	1983 .. 1995 : sw_br87_gfx_intercity_reverse_check ;
	2005 .. 4096 : sw_br87_gfx_privatised_dbso ;
	sw_br87_gfx_virgin_reverse_check ;
}

//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_br87_gfx_manual_dbso, cargo_subtype){
	0 : sw_br87_gfx_brblue_reverse_check ;
	1 : sw_br87_gfx_intercity_reverse_check ;
	2 : sw_br87_gfx_virgin_reverse_check ;
	3 : sw_br87_gfx_calsleeper_reverse_check ;
	4 : sw_br87_gfx_gbrf_reverse_check ;
	sw_br87_gfx_virgin_reverse_check ;
}


switch(FEAT_TRAINS, PARENT, sw_br87_gfx_manual_check_dbso, livery_choice){
	1 : sw_br87_gfx_manual_dbso ;
	sw_br87_gfx_auto_dbso ;
}


//Sprite stacking

switch(FEAT_TRAINS, PARENT, sw_br87_sprite_stack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_br87_gfx_manual_check_dbso ;
	1 : sw_br87_headlight_decider ;
	2 : sw_br87_taillight_decider ;
}


//Colours

switch(FEAT_TRAINS, PARENT, sw_br87_privatised_colours_dbso, most_common_cargo_type){
	PASS : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_auto_dbso, current_year){
	1971 .. 1982     : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1983 .. 1995  : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2005 .. 4096 : sw_br87_privatised_colours_dbso ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_manual_dbso, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	2 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_manual_check_dbso, livery_choice){
	1 : sw_br87_colours_manual_dbso ;
	sw_br87_colours_auto_dbso ;
}

switch(FEAT_TRAINS, PARENT, sw_br87_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_br87_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/class_92.pnml" 1
switch(FEAT_TRAINS, PARENT, sw_abb92_auto_dbso, current_year){
	1995..2007 : sw_abb92_ews_rev_check ;
	2008..2012 : sw_abb92_dbcargo_rev_check ;
	2013..4096 : sw_abb92_private_2_decider ;
	sw_abb92_railfreight_rev_check ;
}


switch(FEAT_TRAINS, PARENT, sw_abb92_manual_dbso, cargo_subtype){
	1 : sw_abb92_ews_rev_check ;
	2 : sw_abb92_dbcargo_rev_check ;
	3 : sw_abb92_gbrf_rev_check ;
	4 : sw_abb92_calsleeper_rev_check ;
	sw_abb92_railfreight_rev_check ;
}



switch(FEAT_TRAINS, SELF, sw_abb92_manual_check_dbso, livery_choice){
	1 : sw_abb92_manual_dbso ;
	sw_abb92_auto_dbso ;
}

//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_abb92_spritestack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_abb92_manual_check_dbso ;
	1 : sw_abb92_headlight_check ;
	//2 : sw_abb92_taillight_check ;
	2 : sw_abb92_panto_check ;
}



switch(FEAT_TRAINS, PARENT, sw_abb92_colours_auto_dbso, current_year){
	1995..2012 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	2013..4096 : sw_abb92_colours_private_2_decider ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, PARENT, sw_abb92_colours_manual_dbso, cargo_subtype){
	1..2 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	3    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
	4    : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}


switch(FEAT_TRAINS, SELF, sw_abb92_colours_manual_check_dbso, livery_choice){
	1 : sw_abb92_colours_manual_dbso ;
	sw_abb92_colours_auto_dbso ;
}

switch(FEAT_TRAINS, SELF, sw_abb92_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_abb92_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/al6.pnml" 1
//Manual liveries

switch(FEAT_TRAINS, PARENT, sw_al6_gfx_manual_dbso, cargo_subtype){
	0 : sw_al6_gfx_acblue_reverse_check ;
	1 : sw_al6_gfx_brblue_reverse_check ;
	2 : sw_al6_gfx_intercity_reverse_check ;
	3 : sw_al6_gfx_railfreight_reverse_check ;
	sw_al6_gfx_brblue_reverse_check ;
}

switch(FEAT_TRAINS, SELF, sw_al6_gfx_manual_check_dbso, livery_choice){
	1 : sw_al6_gfx_manual_dbso ;
	sw_al6_gfx_auto ;
}

//Lights sprite stacking

switch(FEAT_TRAINS, SELF, sw_al6_sprite_stack_dbso, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_al6_gfx_manual_check_dbso ;
	1 : sw_al6_taillights ;
	2 : sw_al6_headlights ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_al6_colours_manual_dbso, cargo_subtype){
	0 : palette_2cc(COLOUR_BLUE, COLOUR_WHITE) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	3 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	4 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	5 : palette_2cc(COLOUR_RED, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_GREEN, COLOUR_YELLOW) ;
	7 : palette_2cc(COLOUR_ORANGE, COLOUR_YELLOW) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_manual_check_dbso, livery_choice){
	1 : sw_al6_colours_manual_dbso ;
	sw_al6_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_al6_colours_2cc_check_dbso, colour_scheme_1){
	1 : sw_al6_colours_manual_check_dbso ;
	palette_2cc(company_colour1, company_colour2) ;
}
# 1 "src/WAGON/DBSO.pnml" 5
# 1 "src/WAGON/DBSO/cl90.pnml" 1
//Manual

switch(FEAT_TRAINS, PARENT, sw_dbso_cl90_gfx_manual, cargo_subtype){
	0 : sw_cl90_gfx_rev_check_intercity ;
	sw_cl90_gfx_rev_check_railfreight ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_cl90_gfx_manual_check, livery_choice){
	1 : sw_dbso_cl90_gfx_manual ;
	sw_cl90_gfx_auto ;
}


//Sprite stacking

switch(FEAT_TRAINS, SELF, sw_dbso_cl90_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_dbso_cl90_gfx_manual_check ;
	1 : sw_cl90_gfx_panto_check ;
	2 : sw_cl90_gfx_headlights_check ;
	3 : sw_cl90_gfx_taillights_check ;
}


//Manual

switch(FEAT_TRAINS, PARENT, sw_dbso_cl90_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_GREY, COLOUR_RED) ;
	palette_2cc(COLOUR_GREY, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_cl90_colours_manual_check, livery_choice){
	1 : sw_dbso_cl90_colours_manual ;
	sw_cl90_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_cl90_colours_2cc_check, colour_scheme_1){
	1 : sw_dbso_cl90_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


# 1 "src/WAGON/DBSO.pnml" 5



//Purchase menu graphics

spriteset(gfx_dbso_purchase_scotrail  , "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178, 50) }
spriteset(gfx_dbso_purchase_intercity , "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178, 75) }
spriteset(gfx_dbso_purchase_directrail, "gfx/WAGON/mark_2_dbso.png"){ template_purchase (178,100) }
spriteset(gfx_dbso_purchase_brblue, "gfx/WAGON/mark_2_dbso.png"){ template_purchase (267,50) }

switch(FEAT_TRAINS, SELF, sw_dbso_purchase_sprite, current_year){
	1971 .. 1982        : gfx_dbso_purchase_brblue ;
	1983 .. 1995 : gfx_dbso_purchase_intercity ;
	gfx_dbso_purchase_directrail ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_dbso_colours_auto ;
	palette_2cc(company_colour1, company_colour1) ;
}




//Graphics checks

switch(FEAT_TRAINS, PARENT, sw_dbso_gfx_parent_id_check, vehicle_type_id){
	37 :sw_ee3_dbso_spritestack  ;
	40 : sw_ee40_spritestack_dbso ;
	68 : sw_uklight_spritestack_dbso ;
	86 : sw_al6_sprite_stack_dbso ;
	87 : sw_br87_sprite_stack_dbso ;
	88 : sw_eurodual_spritestack ;
	92 : sw_abb92_spritestack_dbso ;
	sw_dbso_sprite_stack ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_gfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_gfx_parent_id_check ;
	sw_dbso_sprite_stack ;
}




//Colours checks

switch(FEAT_TRAINS, PARENT, sw_dbso_colours_parent_id_check, vehicle_type_id){
	37 : sw_ee3_dbso_colours_2cc_check ;
	40 : sw_ee40_colours_2cc_check_dbso ;
	68 : sw_uklight_colours_2cc_check_dbso ;
	86 : sw_al6_colours_2cc_check_dbso ;
	87 : sw_br87_colours_2cc_check_dbso ;
	88 : sw_eurodual_colours ;
	92 : sw_abb92_colours_2cc_check_dbso ;
	sw_dbso_colours_2cc_check ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_colours_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_colours_parent_id_check ;
	sw_dbso_colours_2cc_check ;
}



/*

//SFX checks

switch(FEAT_TRAINS, PARENT, sw_dbso_sfx_parent_id_check, vehicle_type_id){
	37 : sw_sfx_diesel_loco_ee_2 ;
	68 : sw_sfx_diesel_loco_modern ;
	88 : sw_eurodual_sfx_decider ;
	CB_RESULT_NO_SOUND ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_sfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_sfx_parent_id_check ;
	CB_RESULT_NO_SOUND ;
}

*/



//VFX checks

switch(FEAT_TRAINS, PARENT, sw_dbso_vfx_parent_id_check, vehicle_type_id){
	37 : vfx_diesel_default ;
	40 : vfx_diesel_default ;
	68 : vfx_diesel_default ;
	86 : vfx_ohle ;
	87 : vfx_ohle ;
	88 : sw_eurodual_effect_decider ;
	92 : sw_abb92_vfx_dbso_dvt_check ;
}


switch(FEAT_TRAINS, PARENT, sw_dbso_vfx_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_vfx_parent_id_check ;
}



//Effect spawn model check

switch(FEAT_TRAINS, PARENT, sw_dbso_effect_parent_id_check, vehicle_type_id){
	37 : EFFECT_SPAWN_MODEL_DIESEL ;
	40 : EFFECT_SPAWN_MODEL_DIESEL ;
	68 : EFFECT_SPAWN_MODEL_DIESEL ;
	86 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	87 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	88 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	92 : EFFECT_SPAWN_MODEL_ELECTRIC ;
}

switch(FEAT_TRAINS, PARENT, sw_dbso_effect_reverse_check, vehicle_is_reversed){
	1 : sw_dbso_effect_parent_id_check ;
	EFFECT_SPAWN_MODEL_NONE ;
}



//Attach checks

switch(FEAT_TRAINS, SELF, sw_dbso_attach_pos_check, vehicle_type_id){
	37 : return CB_RESULT_ATTACH_ALLOW  ;
	40 : return CB_RESULT_ATTACH_ALLOW  ;
	68 : return CB_RESULT_ATTACH_ALLOW  ;
	86 : return CB_RESULT_ATTACH_ALLOW  ;
	87 : return CB_RESULT_ATTACH_ALLOW  ;
	88 : return CB_RESULT_ATTACH_ALLOW  ;
	9020 : return CB_RESULT_ATTACH_ALLOW  ;
	9025 : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_DBSO_NO_COUPLE)  ;
}

switch(FEAT_TRAINS, SELF, sw_dbso_attach_parent_id_check, vehicle_type_id){
	37 : sw_dbso_attach_pos_check ;
	40 : sw_dbso_attach_pos_check ;
	68 : sw_dbso_attach_pos_check ;
	86 : sw_dbso_attach_pos_check ;
	87 : sw_dbso_attach_pos_check ;
	88 : sw_dbso_attach_pos_check ;
	9025 : sw_dbso_attach_pos_check ;
	9030 : sw_dbso_attach_pos_check ;
	return string(STR_DBSO_NO_COUPLE) ;
}



//The item itself

item(FEAT_TRAINS, item_dbso, 9025){
	property{
		name						   : string(STR_NAME_DBSO) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1979, 1, 1) ;
		model_life                     : 35 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 95 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 58 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 10 ;
		track_type                     : RAIL ;
		speed                          : 100 mph ;
		power                          : 0 hp ;
		weight                         : 38 ton ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
	}
	graphics{
		default                        : sw_dbso_gfx_reverse_check ;
		colour_mapping                 : sw_dbso_colours_reverse_check ;
		purchase                       : sw_dbso_purchase_sprite ;
		purchase_colour_mapping        : sw_dbso_purchase_colours_2cc_check ;
		//cargo_subtype_text             : sw_dbso_refit_text_check ;
		can_attach_wagon               : sw_dbso_attach_parent_id_check ;
		create_effect                  : sw_dbso_vfx_reverse_check ;
		effect_spawn_model_and_powered : sw_dbso_effect_reverse_check ;
		//sound_effect                   : sw_dbso_sfx_reverse_check ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_dbso, 9025){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_dbso, 9025){
	property{
		name                           : string(STR_NAME_DBSO_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/DVT.pnml" 1
//DVT Item

//Over ride headers



//Purchase menu graphics

spriteset(gfx_dvt_purchase_generic     , "gfx/WAGON/dvt.png"){ template_purchase(178,  0) }
spriteset(gfx_dvt_purchase_intercity   , "gfx/WAGON/dvt.png"){ template_purchase(178, 25) }
spriteset(gfx_dvt_purchase_virgin      , "gfx/WAGON/dvt.png"){ template_purchase(178, 50) }


switch(FEAT_TRAINS, SELF, sw_dvt_purchase_sprite, current_year){
	1983 .. 1995 : gfx_dvt_purchase_intercity ;
	gfx_dvt_purchase_virgin ;
}

switch(FEAT_TRAINS, SELF, sw_dvt_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_dvt_colours_auto ;
	palette_2cc(company_colour1, company_colour1) ;
}


//Graphics checks

switch(FEAT_TRAINS, PARENT, sw_dvt_gfx_parent_id_check, vehicle_type_id){
	37 : sw_ee3_dbso_spritestack  ;
	68 : sw_uklight_spritestack_dbso ;
	86 : sw_al6_sprite_stack_dbso ;
	87 : sw_br87_sprite_stack_dbso ;
	88 : sw_eurodual_spritestack ;
	90 : sw_dbso_cl90_gfx_sprite_stack ;
	92 : sw_abb92_spritestack_dbso ;
	sw_dvt_sprite_stack ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_gfx_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_gfx_parent_id_check ;
	sw_dvt_sprite_stack ;
}


//Colours checks

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_parent_id_check, vehicle_type_id){
	37 : sw_ee3_dbso_colours_2cc_check ;
	68 : sw_uklight_colours_2cc_check_dbso ;
	86 : sw_al6_colours_2cc_check_dbso ;
	87 : sw_br87_colours_2cc_check_dbso ;
	88 : sw_eurodual_colours ;
	90 : sw_dbso_cl90_colours_2cc_check ;
	92 : sw_abb92_colours_2cc_check_dbso ;
	sw_dvt_colours_2cc_check ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_colours_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_colours_parent_id_check ;
	sw_dvt_colours_2cc_check ;
}



//VFX checks

switch(FEAT_TRAINS, PARENT, sw_dvt_vfx_parent_id_check, vehicle_type_id){
	37 : vfx_diesel_default ;
	68 : vfx_diesel_default ;
	86 : vfx_ohle ;
	87 : vfx_ohle ;
	88 : sw_eurodual_effect_decider ;
	90 : vfx_ohle ;
	92 : sw_abb92_vfx_dbso_dvt_check  ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_vfx_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_vfx_parent_id_check ;
}


//Effect spawn model checks

switch(FEAT_TRAINS, PARENT, sw_dvt_effect_parent_id_check, vehicle_type_id){
	37 : EFFECT_SPAWN_MODEL_DIESEL ;
	68 : EFFECT_SPAWN_MODEL_DIESEL ;
	86 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	87 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	88 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	90 : EFFECT_SPAWN_MODEL_ELECTRIC ;
	92 : EFFECT_SPAWN_MODEL_ELECTRIC ;
}

switch(FEAT_TRAINS, PARENT, sw_dvt_effect_reverse_check, vehicle_is_reversed){
	1 : sw_dvt_effect_parent_id_check ;
}



//Attach checks









//DVT Item

item(FEAT_TRAINS, item_dvt, 9035){
	property{
		name						   : string(STR_NAME_DVT) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK, TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1988, 1, 1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 45 ;
		cost_factor                    : 115 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 64 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [MAIL] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 10 ;
		track_type                     : RAIL ;
		speed                          : 110 mph ;
		power                          : 0 hp ;
		weight                         : 38 ton ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
	}
	graphics{
		default                        : sw_dvt_gfx_reverse_check ;
		colour_mapping                 : sw_dvt_colours_reverse_check ;
		purchase                       : sw_dvt_purchase_sprite ;
		purchase_colour_mapping        : sw_dvt_purchase_colours_2cc_check ;
		//cargo_subtype_text             : sw_dbso_refit_text_check ;
		can_attach_wagon               : sw_dbso_attach_parent_id_check ;
		create_effect                  : sw_dvt_vfx_reverse_check ;
		effect_spawn_model_and_powered : sw_dvt_effect_reverse_check ;
		//sound_effect                   : sw_dbso_sfx_reverse_check ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_dvt, 9035){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DMU/class_142.pnml" 1
spriteset(spriteset_142_t_rr, "gfx/DMU/class_142.png") {template_7_4(0, 168)}
spriteset(spriteset_142_f_rr, "gfx/DMU/class_142.png") {template_7_8(0, 96)}
spriteset(spriteset_142_r_rr, "gfx/DMU/class_142.png") {template_7_8(0, 120)}
spriteset(spriteset_142_o_rr, "gfx/DMU/class_142.png") {template_7_8(0, 144)}

spriteset(spriteset_142_t_n_spirit, "gfx/DMU/class_142.png") {template_7_4(163, 72)}
spriteset(spriteset_142_f_n_spirit, "gfx/DMU/class_142.png") {template_7_8(163, 0)}
spriteset(spriteset_142_r_n_spirit, "gfx/DMU/class_142.png") {template_7_8(163, 24)}
spriteset(spriteset_142_o_n_spirit, "gfx/DMU/class_142.png") {template_7_8(163, 48)}

spriteset(spriteset_142_t_northern, "gfx/DMU/class_142.png") {template_7_4(163, 168)}
spriteset(spriteset_142_f_northern, "gfx/DMU/class_142.png") {template_7_8(163, 96)}
spriteset(spriteset_142_r_northern, "gfx/DMU/class_142.png") {template_7_8(163, 120)}
spriteset(spriteset_142_o_northern, "gfx/DMU/class_142.png") {template_7_8(163, 144)}

spriteset(spriteset_140_t, "gfx/DMU/class_142.png") {template_7_4(0, 264)}
spriteset(spriteset_140_f, "gfx/DMU/class_142.png") {template_7_8(0, 192)}
spriteset(spriteset_140_r, "gfx/DMU/class_142.png") {template_7_8(0, 216)}
spriteset(spriteset_140_o, "gfx/DMU/class_142.png") {template_7_8(0, 240)}

//Purchase Sprites
spriteset(spriteset_140_purchase, "gfx/DMU/class_142.png") {template_dualhead_purchase(247, 195)}
spriteset(spriteset_142_rr_purchase, "gfx/DMU/class_142.png") {template_dualhead_purchase(247, 208)}
spriteset(spriteset_142_n_spirit_purchase, "gfx/DMU/class_142.png") {template_dualhead_purchase(247, 221)}
spriteset(spriteset_142_northern_purchase, "gfx/DMU/class_142.png") {template_dualhead_purchase(247, 234)}

//Switches

//Power Car

switch(FEAT_TRAINS, SELF, sw_140_f, position_in_consist){
	0: spriteset_140_f; 
	spriteset_140_o;
}switch(FEAT_TRAINS, SELF, sw_140_select, position_in_consist_from_end){
	0: spriteset_140_r; 
	sw_140_f;
}random_switch(FEAT_TRAINS, SELF, sw_140, TRIGGER_VEHICLE_SERVICE){
	1: sw_140_select;}

switch(FEAT_TRAINS, SELF, sw_142_rr_f, position_in_consist){
	0: spriteset_142_f_rr; 
	spriteset_142_o_rr;
}switch(FEAT_TRAINS, SELF, sw_142_rr_select, position_in_consist_from_end){
	0: spriteset_142_r_rr; 
	sw_142_rr_f;
}random_switch(FEAT_TRAINS, SELF, sw_142_rr, TRIGGER_VEHICLE_SERVICE){
	1: sw_142_rr_select;}
	
switch(FEAT_TRAINS, SELF, sw_142_n_spirit_f, position_in_consist){
	0: spriteset_142_f_n_spirit; 
	spriteset_142_o_n_spirit;
}switch(FEAT_TRAINS, SELF, sw_142_n_spirit_select, position_in_consist_from_end){
	0: spriteset_142_r_n_spirit; 
	sw_142_n_spirit_f;
}random_switch(FEAT_TRAINS, SELF, sw_142_n_spirit, TRIGGER_VEHICLE_SERVICE){
	1: sw_142_n_spirit_select;}
	
switch(FEAT_TRAINS, SELF, sw_142_northern_f, position_in_consist){
	0: spriteset_142_f_northern; 
	spriteset_142_o_northern;
}switch(FEAT_TRAINS, SELF, sw_142_northern_select, position_in_consist_from_end){
	0: spriteset_142_r_northern; 
	sw_142_northern_f;
}random_switch(FEAT_TRAINS, SELF, sw_142_northern, TRIGGER_VEHICLE_SERVICE){
	1: sw_142_northern_select;}

//Trailer/Pan

random_switch(FEAT_TRAINS, SELF, sw_140_t, TRIGGER_VEHICLE_SERVICE){
	1: spriteset_140_t;}
	
random_switch(FEAT_TRAINS, SELF, sw_142_rr_t, TRIGGER_VEHICLE_SERVICE){
	1: spriteset_142_t_rr;}

random_switch(FEAT_TRAINS, SELF, sw_142_n_spirit_t, TRIGGER_VEHICLE_SERVICE){
	1: spriteset_142_t_n_spirit;}

random_switch(FEAT_TRAINS, SELF, sw_142_northern_t, TRIGGER_VEHICLE_SERVICE){
	1: spriteset_142_t_northern;}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_142_passenger_livery_decider_a, current_year){
	1983 .. 1995: sw_142_rr;
	1996 .. 2004: sw_142_n_spirit;
	2005 .. 4096: sw_142_northern;
	sw_142_northern;
}

switch(FEAT_TRAINS, SELF, sw_142_passenger_livery_decider, current_year){
	0 .. 1985: sw_140;
	1986 .. 3000: sw_142_passenger_livery_decider_a;
}

switch(FEAT_TRAINS, SELF, sw_142_passenger_livery_decider_a_t, current_year){
	1983 .. 1995: sw_142_rr_t;
	1996 .. 2004: sw_142_n_spirit_t;
	2005 .. 4096: sw_142_northern_t;
	sw_142_northern_t;
}

switch(FEAT_TRAINS, PARENT, sw_142_passenger_livery_decider_t, current_year){
	0 .. 1985: sw_140_t;
	1986 .. 3000: sw_142_passenger_livery_decider_a_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_142_manual_livery_decider_a, cargo_subtype){
	0: sw_142_rr;
	1: sw_142_n_spirit;
	2: sw_142_northern;
}

switch(FEAT_TRAINS, SELF, sw_142_manual_livery_decider, current_year){
	0 .. 1985: sw_140;
	1986 .. 3000: sw_142_manual_livery_decider_a;
}

switch(FEAT_TRAINS, SELF, sw_142_manual_livery_decider_a_t, cargo_subtype){
	0: sw_142_rr_t;
	1: sw_142_n_spirit_t;
	2: sw_142_northern_t;
}

switch(FEAT_TRAINS, PARENT, sw_142_manual_livery_decider_t, current_year){
	0 .. 1985: sw_140_t;
	sw_142_manual_livery_decider_a_t;
}

switch(FEAT_TRAINS, SELF, sw_142_livery_choice_decider, livery_choice){
	1 : sw_142_manual_livery_decider ; 
	sw_142_passenger_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_142_livery_choice_decider_t, livery_choice){
	1 : sw_142_manual_livery_decider_t ; 
	sw_142_passenger_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_142_refit_text_a, cargo_subtype){
	0: string(STR_LIVERY_REG_RAILWAYS);
	1: string(STR_LIVERY_N_SPIRIT);
	2: string(STR_LIVERY_NORTHERN);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_142_refit_text, current_year){
	0 .. 1985: return CB_RESULT_NO_TEXT ; 
	sw_142_refit_text_a ;
}

switch(FEAT_TRAINS, SELF, sw_142_refit_text_decider, livery_choice){
	1 : sw_142_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_142_purchase, current_year){
	0 .. 1985: spriteset_140_purchase;
	1983 .. 1995: spriteset_142_rr_purchase;
	1996 .. 2004: spriteset_142_n_spirit_purchase;
	spriteset_142_northern_purchase;
}

switch(FEAT_TRAINS, SELF, sw_142_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_142_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_142_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_142_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_142_rr_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_142_n_spirit_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_BLUE, COLOUR_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_142_northern_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_140_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_142_colour_mapping_auto_a, current_year){
	1983 .. 1995: sw_142_rr_colour_mapping;
	1996 .. 2004: sw_142_n_spirit_colour_mapping;
	sw_142_northern_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_142_colour_mapping_auto, current_year){
	0 .. 1985: sw_140_colour_mapping ; 
	sw_142_colour_mapping_auto_a ;
}

switch(FEAT_TRAINS, SELF, sw_142_colour_mapping_manual_a, cargo_subtype){
	0: sw_142_rr_colour_mapping;
	1: sw_142_n_spirit_colour_mapping;
	2: sw_142_northern_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_142_colour_mapping_manual, current_year){
	0 .. 1985: sw_140_colour_mapping ; 
	sw_142_colour_mapping_manual_a ;
}

switch(FEAT_TRAINS, PARENT, sw_142_colour_mapping_manual_check, livery_choice){
	1 : sw_142_colour_mapping_manual ;
	sw_142_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_142_colour_mapping_decider, colour_scheme_1){
	1 : sw_142_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_142_coupling_restrictions, vehicle_type_id) {
    9020: return CB_RESULT_ATTACH_ALLOW;
	142: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_142_NO_COUPLE);
}


item (FEAT_TRAINS, item_142, 142) {
	property {
		name: 							string(STR_NAME_142);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1985, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					27;
		cost_factor:					20;
		running_cost_factor:			15;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							225 hp;
		running_cost_base:				RUNNING_COST_DIESEL;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					55;
		weight:							25 ton;
		tractive_effort_coefficient:	0.55;
		air_drag_coefficient:			0.05;
		length:							7;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				150;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_142_coupling_restrictions;
		default: 							sw_142_default;
		purchase:							sw_142_purchase;
		create_effect:						vfx_diesel_default;
		cargo_subtype_text:					sw_142_refit_text_decider ;
		colour_mapping:						sw_142_colour_mapping_decider;
		sound_effect:						sw_sfx_dmu_one;
		running_cost_factor:                return(current_speed == 0 ? 4 : 15) ;
}
		livery_override (9020) {
		cargo_capacity: 60;
		default: sw_142_default_t;
		colour_mapping:	sw_142_colour_mapping_decider;
		cargo_subtype_text: sw_142_refit_text_decider ;
		length: 7;
		weight: 25;
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_142, 142){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_142, 142){
	property{
		name                           : string(STR_NAME_142_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DMU/super_sprinter.pnml" 1
//Super Sprinter

//156

//Sprite sets

spriteset(gfx_cl156_base				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,   0 ) }
spriteset(gfx_cl156_base_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 259,   0 ) }
spriteset(gfx_cl156_rr					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  25 ) }
spriteset(gfx_cl156_rr_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  25 ) }
spriteset(gfx_cl156_emt					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  50 ) }
spriteset(gfx_cl156_emt_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  50 ) }
spriteset(gfx_cl156_spt					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0,  75 ) }
spriteset(gfx_cl156_spt_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259,  75 ) }
spriteset(gfx_cl156_central				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 100 ) }
spriteset(gfx_cl156_central_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 100 ) }
spriteset(gfx_cl156_anglia				, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 125 ) }
spriteset(gfx_cl156_anglia_mid			, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 125 ) }
spriteset(gfx_cl156_one					, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 150 ) }
spriteset(gfx_cl156_one_mid				, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 150 ) }
spriteset(gfx_cl156_first_scot			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 175 ) }
spriteset(gfx_cl156_first_scot_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 175 ) }
spriteset(gfx_cl156_scot_salt			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 200 ) }
spriteset(gfx_cl156_scot_salt_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 200 ) }
spriteset(gfx_cl156_northern			, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 225 ) }
spriteset(gfx_cl156_northern_mid		, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 225 ) }
spriteset(gfx_cl156_northern_new		, "gfx/DMU/class_156.png")	{ template_Mk2_double	(   0, 250 ) }
spriteset(gfx_cl156_northern_new_mid	, "gfx/DMU/class_156.png")	{ template_Mk2_single	( 259, 250 ) }

spriteset(gfx_cl156_purchase_rr			, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178,  25 ) }
spriteset(gfx_cl156_purchase_spt		, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178,  75 ) }
spriteset(gfx_cl156_purchase_first_scot	, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178, 175 ) }
spriteset(gfx_cl156_purchase_scot_salt	, "gfx/DMU/class_156.png")	{template_dualhead_purchase	( 178, 200 ) }

spriteset(gfx_cl156_headlights			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 350,   0 ) }
spriteset(gfx_cl156_taillights			, "gfx/DMU/class_156.png")	{ template_Mk2_double	( 350,  25 ) }



//Graphic switches

//switch(FEAT_TRAINS, SELF, sw_cl156_base_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_base_mid			; gfx_cl156_base		; }
switch(FEAT_TRAINS, SELF, sw_cl156_rr_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_rr_mid			; gfx_cl156_rr			; }
switch(FEAT_TRAINS, SELF, sw_cl156_emt_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_emt_mid			; gfx_cl156_emt			; }
switch(FEAT_TRAINS, SELF, sw_cl156_spt_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_spt_mid			; gfx_cl156_spt			; }
switch(FEAT_TRAINS, SELF, sw_cl156_central_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_central_mid		; gfx_cl156_central		; }
switch(FEAT_TRAINS, SELF, sw_cl156_anglia_id_check		, vehicle_type_id ){ 9030 : gfx_cl156_anglia_mid		; gfx_cl156_anglia		; }
switch(FEAT_TRAINS, SELF, sw_cl156_one_id_check			, vehicle_type_id ){ 9030 : gfx_cl156_one_mid			; gfx_cl156_one			; }
switch(FEAT_TRAINS, SELF, sw_cl156_first_scot_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_first_scot_mid	; gfx_cl156_first_scot	; }
switch(FEAT_TRAINS, SELF, sw_cl156_scot_salt_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_scot_salt_mid		; gfx_cl156_scot_salt	; }
switch(FEAT_TRAINS, SELF, sw_cl156_northern_id_check	, vehicle_type_id ){ 9030 : gfx_cl156_northern_mid		; gfx_cl156_northern	; }
switch(FEAT_TRAINS, SELF, sw_cl156_northern_new_id_check, vehicle_type_id ){ 9030 : gfx_cl156_northern_new_mid	; gfx_cl156_northern_new; }



//Automatic

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_auto, current_year){
	1997..2004 : sw_cl156_spt_id_check ;
	2005..2015 : sw_cl156_first_scot_id_check ;
	2016..4096 : sw_cl156_scot_salt_id_check ;
	sw_cl156_rr_id_check ;
}

//Manual

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_manual, cargo_subtype){
	1	: sw_cl156_spt_id_check ;
	2	: sw_cl156_first_scot_id_check ;
	3	: sw_cl156_scot_salt_id_check ;
	4	: sw_cl156_central_id_check ;
	5	: sw_cl156_emt_id_check ;
	6	: sw_cl156_one_id_check ;
	7	: sw_cl156_anglia_id_check ;
	8	: sw_cl156_northern_id_check ;
	9	: sw_cl156_northern_new_id_check ;
	sw_cl156_rr_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_manual_check, livery_choice){
	1 : sw_cl156_gfx_manual ;
	sw_cl156_gfx_auto ;
}

//Sprite stack

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_headlights, position_in_consist){ 0 : gfx_cl156_headlights ; }
switch(FEAT_TRAINS, SELF, sw_cl156_gfx_taillights, position_in_consist_from_end){ 0 : gfx_cl156_taillights ; }

switch(FEAT_TRAINS, SELF, sw_cl156_gfx_sprite_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : sw_cl156_gfx_manual_check ;
	1 : sw_cl156_gfx_headlights ;
	2 : sw_cl156_gfx_taillights ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_cl156_colours_auto, current_year){
	1997..2004 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2005..2015 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2016..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_manual, cargo_subtype){
	1	: palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	3	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	4	: palette_2cc(COLOUR_GREEN, COLOUR_DARK_BLUE) ;
	5	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	6	: palette_2cc(COLOUR_BLUE, company_colour2) ;
	7	: palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	8	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	9	: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_manual_check, livery_choice){
	1 : sw_cl156_colours_manual ;
	sw_cl156_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_colours_2cc_check, colour_scheme_1){
	1 : sw_cl156_colours_manual_check ;
	palette_2cc(company_colour1, company_colour1) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_cl156_refit_text, cargo_subtype){
	0  : string(STR_LIVERY_REG_RAILWAYS) ;
	1  : string(STR_LIVERY_SPT_CARMINE_CREAM) ;
	2  : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	3  : string(STR_LIVERY_SCOTRAIL) ;
	4  : string(STR_LIVERY_CENTRAL) ;
	5  : string(STR_LIVERY_EMT) ;
	6  : string(STR_LIVERY_ONE_ANGLIA) ;
	7  : string(STR_LIVERY_ABELLIO_GREATER_ANGLIA) ;
	8  : string(STR_LIVERY_NORTHERN) ;
	9  : string(STR_LIVERY_NORTHERN_ARRIVA) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_cl156_refit_text_check, livery_choice){
	1 : sw_cl156_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Item

//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_sprite, current_year){
	1997..2004 : gfx_cl156_purchase_spt ;
	2005..2015 : gfx_cl156_purchase_first_scot ;
	2016..4096 : gfx_cl156_purchase_scot_salt ;
	gfx_cl156_purchase_rr ;
}

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_colours, current_year){
	1997..2004 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
	2005..2015 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2016..4096 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_supsprint_purchase_colours_2cc_check, colour_scheme_1){
	1 : sw_supsprint_purchase_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}


switch(FEAT_TRAINS, SELF, sw_supsprint_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_155_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_supsprint, 155){
	property{
		name                           : string(STR_NAME_SUPER_SPRINTER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_SPRITE_STACK);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1986,1,1) ;
		model_life                     : 30 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 8 ;
		cost_factor                    : 55 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 35 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 95 ;
		loading_speed                  : 22 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 75 mph ;
		power                          : 416 kW ;
		weight                         : 39 ton ;
		tractive_effort_coefficient    : 0.525 ;
		air_drag_coefficient           : 0.107 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
	}
	graphics{
		default                 		: sw_cl156_gfx_sprite_stack ;
		purchase                		: sw_supsprint_purchase_sprite ;
		sound_effect            		: sw_sfx_dmu_one ;
		create_effect           		: vfx_diesel_default ;
		colour_mapping          		: sw_cl156_colours_2cc_check ;
		purchase_colour_mapping 		: sw_supsprint_purchase_colours_2cc_check ;
		cargo_subtype_text      		: sw_cl156_refit_text_check ;
		can_attach_wagon        		: sw_supsprint_attach ;
		running_cost_factor    			: return(current_speed == 0 ? 10 : 40) ;
		purchase_running_cost_factor	: 40 ;
	}
	livery_override (9030){
		default                     : sw_cl156_gfx_sprite_stack ;
		colour_mapping              : sw_cl156_colours_2cc_check ;
		cargo_capacity              : 95 ;
		power                       : 213 ;
		cargo_subtype_text          : sw_cl156_refit_text_check ;
		weight                      : 39 ;
		create_effect           	: vfx_diesel_default ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_supsprint, 155){
	property{
		name                           : string(STR_NAME_SUPER_SPRINTER_ALT) ;
	}
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_supsprint, 155){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DMU/expr_sprint.pnml" 1
//Express Sprinter

/*

Liveries

Regional Railways --
Trans Pennine Express --
WYPTE Metro --
Northern Rail --
New Northern --

Alphaline --
!Arriva Trains Wales
!Arrive Trains Wales (Executive)
!First Great Western
Great Western Railway --
!East Midlands Trains

Network South East --
!South West Trains
!South Western Railway

*/



//Sprite sets

spriteset(gfx_expsprint_base            , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,  0) }
spriteset(gfx_expsprint_base_rev        , "gfx/DMU/class_158.png") { template_Mk2_double_reverse (  0,  0) }
spriteset(gfx_expsprint_base_mid        , "gfx/DMU/class_158.png") { template_Mk2_single         (259,  0) }
spriteset(gfx_expsprint_rr            	, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,175) }
spriteset(gfx_expsprint_rr_mid        	, "gfx/DMU/class_158.png") { template_Mk2_single 		 (259,175) }
spriteset(gfx_expsprint_fgw             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 25) }
spriteset(gfx_expsprint_fgw_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 25) }
spriteset(gfx_expsprint_swt             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 50) }
spriteset(gfx_expsprint_swt_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 50) }
spriteset(gfx_expsprint_atw_refurb      , "gfx/DMU/class_158.png") { template_Mk2_double         (  0, 75) }
spriteset(gfx_expsprint_atw_refurb_mid  , "gfx/DMU/class_158.png") { template_Mk2_single         (259, 75) }
spriteset(gfx_expsprint_atw             , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,100) }
spriteset(gfx_expsprint_atw_mid         , "gfx/DMU/class_158.png") { template_Mk2_single         (259,100) }
spriteset(gfx_expsprint_atw_exec        , "gfx/DMU/class_158.png") { template_Mk2_double         (  0,125) }
spriteset(gfx_expsprint_atw_exec_mid    , "gfx/DMU/class_158.png") { template_Mk2_single         (259,125) }
spriteset(gfx_expsprint_swr        		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,150) }
spriteset(gfx_expsprint_swr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,150) }
spriteset(gfx_expsprint_fsr       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,200) }
spriteset(gfx_expsprint_fsr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,200) }
spriteset(gfx_expsprint_gwr       		, "gfx/DMU/class_158.png") { template_Mk2_double         (  0,225) }
spriteset(gfx_expsprint_gwr_mid    		, "gfx/DMU/class_158.png") { template_Mk2_single         (259,225) }

spriteset(gfx_expsprint_purchase_rr    	, "gfx/DMU/class_158.png") { template_dualhead_purchase (178,175) }
spriteset(gfx_expsprint_purchase_fsr    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178,200) }
spriteset(gfx_expsprint_purchase_atw_r  , "gfx/DMU/class_158.png") { template_dualhead_purchase (178, 75) }
spriteset(gfx_expsprint_purchase_swr    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178,150) }
spriteset(gfx_expsprint_purchase_fgw    , "gfx/DMU/class_158.png") { template_dualhead_purchase (178, 25) }


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_expsprint_base_id_check,        vehicle_type_id){ 9030 : gfx_expsprint_base_mid ; gfx_expsprint_base ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_rr_id_check,        vehicle_type_id){ 9030 : gfx_expsprint_rr_mid ; gfx_expsprint_rr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_fgw_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_fgw_mid ; gfx_expsprint_fgw ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_swt_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_swt_mid ; gfx_expsprint_swt ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_id_check ,        vehicle_type_id){ 9030 : gfx_expsprint_atw_mid ; gfx_expsprint_atw ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_refurb_id_check , vehicle_type_id){ 9030 : gfx_expsprint_atw_refurb_mid ; gfx_expsprint_atw_refurb ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_atw_exec_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_atw_exec_mid ; gfx_expsprint_atw_exec ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_swr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_swr_mid ; gfx_expsprint_swr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_fsr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_fsr_mid ; gfx_expsprint_fsr ; }
switch(FEAT_TRAINS, SELF, sw_expsprint_gwr_id_check   , vehicle_type_id){ 9030 : gfx_expsprint_gwr_mid ; gfx_expsprint_gwr ; }



switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_auto, current_year){
	1987..1995 : sw_expsprint_rr_id_check ;
	1996..2003 : sw_expsprint_fsr_id_check ;
	2004..2011 : sw_expsprint_fsr_id_check ;
	2012..2017 : sw_expsprint_atw_refurb_id_check ;
	2018..4096 : sw_expsprint_swr_id_check ;
	sw_expsprint_fgw_id_check ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_manual, cargo_subtype){
	1 : sw_expsprint_atw_id_check ;
	2 : sw_expsprint_atw_refurb_id_check ;
	3 : sw_expsprint_atw_exec_id_check ;
	4 : sw_expsprint_fgw_id_check ;
	5 : sw_expsprint_gwr_id_check ;
	6 : sw_expsprint_swt_id_check ;
	7 : sw_expsprint_swr_id_check ;
	8 : sw_expsprint_fsr_id_check ;
	sw_expsprint_rr_id_check ;
}


switch(FEAT_TRAINS, SELF, sw_expsprint_gfx_manual_check, livery_choice){
	1 : sw_expsprint_gfx_manual ;
	sw_expsprint_gfx_auto ;
}


//Colours

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_auto, current_year){
	1987..1995 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
	1996..2003 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2004..2011 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	2012..2017 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2018..4096 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	2 : palette_2cc(COLOUR_BLUE, COLOUR_YELLOW) ;
	3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;
	4 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
	5 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE) ;
	6 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	7 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	8 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
	palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}


switch(FEAT_TRAINS, SELF, sw_expsprint_colours_manual_check, livery_choice){
	1 : sw_expsprint_colours_manual ;
	sw_expsprint_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_colours_2cc_check, colour_scheme_1){
	1 : sw_expsprint_colours_manual_check ;
	palette_2cc(company_colour1, company_colour1) ;
}


//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite, current_year){
	1987..1995 : gfx_expsprint_purchase_rr ;
	1996..2003 : gfx_expsprint_purchase_fsr ;
	2004..2011 : gfx_expsprint_purchase_fsr ;
	2012..2017 : gfx_expsprint_purchase_atw_r ;
	2018..4096 : gfx_expsprint_purchase_swr ;
	gfx_expsprint_purchase_fgw ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite_colours, current_year){
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_purchase_sprite_colours_2cc_check, colour_scheme_1){
	1 : sw_expsprint_purchase_sprite_colours ;
	palette_2cc(company_colour1, company_colour1) ;
}




//Refit text

switch(FEAT_TRAINS, SELF, sw_expsprint_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_REG_RAILWAYS) ;
	1 : string(STR_LIVERY_ATW) ;
	2 : string(STR_LIVERY_ATW_REFURB) ;
	3 : string(STR_LIVERY_ATW_EXEC) ;
	4 : string(STR_LIVERY_FIRST_FGW, string(STR_LIVERY_EMPTY)) ;
	5 : string(STR_LIVERY_FIRST_GWR, string(STR_LIVERY_EMPTY)) ;
	6 : string(STR_LIVERY_SWT) ;
	7 : string(STR_LIVERY_SWR) ;
	8 : string(STR_LIVERY_FIRST_SCOT_RAIL, string(STR_LIVERY_EMPTY)) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_expsprint_refit_text_check, livery_choice){
	1 : sw_expsprint_refit_text ;
	CB_RESULT_NO_TEXT ;
}




//Item

switch(FEAT_TRAINS, SELF, sw_expsprint_attach, vehicle_type_id){
	37   : return CB_RESULT_ATTACH_ALLOW  ;
	150  : return CB_RESULT_ATTACH_ALLOW  ;
	153  : return CB_RESULT_ATTACH_ALLOW  ;
	155  : return CB_RESULT_ATTACH_ALLOW  ;
	158  : return CB_RESULT_ATTACH_ALLOW  ;
	9030 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_158_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_expsprint, 158){
	property{
		name                           : string(STR_NAME_EXPRESS_SPRINTER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1988,1,1) ;
		model_life                     : 25 ;
		vehicle_life                   : 40 ;
		reliability_decay              : 7 ;
		cost_factor                    : 65 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 40 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 90 ;
		loading_speed                  : 20 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 90 mph ;
		power                          : 522 kW ;
		weight                         : 38.5 ton ;
		tractive_effort_coefficient    : 0.475 ;
		air_drag_coefficient           : 0.09 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
	}
	graphics{
		default                 : sw_expsprint_gfx_manual_check ;
		purchase                : sw_expsprint_purchase_sprite ;
		sound_effect            : sw_sfx_dmu_one ;
		create_effect           : vfx_diesel_default ;
		colour_mapping          : sw_expsprint_colours_2cc_check ;
		purchase_colour_mapping : sw_expsprint_purchase_sprite_colours_2cc_check ;
		cargo_subtype_text      : sw_expsprint_refit_text_check ;
		can_attach_wagon        : sw_expsprint_attach ;
		running_cost_factor     : return(current_speed == 0 ? 10 : 40) ;
	}
	livery_override (9030){
		default                     : sw_expsprint_gfx_manual_check ;
		colour_mapping              : sw_expsprint_colours_2cc_check ;
		cargo_capacity              : 90 ;
		power                       : 500 ;
		cargo_subtype_text          : sw_expsprint_refit_text_check ;
		weight                      : 38 ;
	}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_expsprint, 158){
	property{
		name                           : string(STR_NAME_EXPRESS_SPRINTER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DMU/turbostar.pnml" 1
//TURBOSTAR



template template_turbo_single(x,y){
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,32,11,-16,-7] //East
	[x+66,y,20,16,-5,-8] //South East
}

template template_turbo_double(x,y){
	[x+0,y,8,24,-3,-11] //North
	[x+10,y,20,16,-13,-8] //North East
	[x+32,y,32,11,-16,-7] //East
	[x+66,y,20,16,-5,-8] //South East
	[x+88,y,8,24,-3,-11] //South
	[x+98,y,20,16,-13,-8] //South West
	[x+120,y,32,11,-16,-7] //West
	[x+154,y,20,16,-5,-8] //North West
}

//Spritesets

spriteset (cl168_cm_front, "gfx/DMU/class_168.png"){template_turbo_double(0,0) }
spriteset (cl168_cm_back,  "gfx/DMU/class_168.png"){template_turbo_double(0,26)}
spriteset (cl168_cm_mid,   "gfx/DMU/class_168.png"){template_turbo_single(0,52)}
spriteset (cl172_lm_front, "gfx/DMU/class_172.png"){template_turbo_double(0,0) }
spriteset (cl172_lm_back,  "gfx/DMU/class_172.png"){template_turbo_double(0,26)}
spriteset (cl172_lm_mid,   "gfx/DMU/class_172.png"){template_turbo_single(0,52)}

spriteset (cl168_purchase, "gfx/DMU/class_168.png"){template_dualhead_purchase(88,52)}
spriteset (cl172_purchase, "gfx/DMU/class_172.png"){template_dualhead_purchase(88,52)}

//Graphics

switch(FEAT_TRAINS, SELF, sw_168_decider, position_in_consist_from_end){
	0 : cl168_cm_back ;
	cl168_cm_front ;
}

switch(FEAT_TRAINS, SELF, sw_172_decider, position_in_consist_from_end){
	0 : cl172_lm_back ;
	cl172_lm_front ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_auto, build_year){
	1996..2009 : sw_168_decider ;
	sw_172_decider ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_manual, cargo_subtype){
	0 : sw_168_decider ;
	sw_172_decider ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_manual_check, livery_choice){
	1 : sw_168_gfx_manual ;
	sw_168_gfx_auto ;
}



switch(FEAT_TRAINS, SELF, sw_168_gfx_trailer_auto, build_year){
	1996..2009 : cl168_cm_mid ;
	cl172_lm_mid ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_trailer_manual, cargo_subtype){
	0 : cl168_cm_mid ;
	cl172_lm_mid ;
}

switch(FEAT_TRAINS, SELF, sw_168_gfx_trailer_manual_check, livery_choice){
	1 : sw_168_gfx_trailer_manual ;
	sw_168_gfx_trailer_auto ;
}

//Purchase

switch(FEAT_TRAINS, SELF, sw_168_purchase, current_year){
	1996..2009 : cl168_purchase ;
	cl172_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_168_purchase_colours, current_year){
	1996..2009 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_168_purchase_2cc_check, colour_scheme_1){
	1 : sw_168_purchase_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_168_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_CHILTERN) ;
	1 : string(STR_LIVERY_LONDON_MIDLAND) ;
}

switch(FEAT_TRAINS, SELF, sw_168_refit_text_check, livery_choice){
	1 : sw_168_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_168_colours_auto, build_year){
	1996..2009 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_168_colours_manual, cargo_subtype){
	0 : palette_2cc(COLOUR_WHITE, COLOUR_GREY) ;
	palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREEN) ;
}

switch(FEAT_TRAINS, SELF, sw_168_colours_manual_check, livery_choice){
	1 : sw_168_colours_manual ;
	sw_168_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_168_colours_2cc_check, colour_scheme_1){
	1 : sw_168_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_168_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_cl168: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_168_NO_COUPLE);
}


//Item 


item (FEAT_TRAINS, item_cl168, 168){
	property{
		name                           : string(STR_NAME_TURBOSTAR) ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1997, 1, 1);
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 75 ;
		model_life                     : 18 ;
		vehicle_life                   : 25 ;
		reliability_decay              : 10 ;
		cost_factor                    : 56 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 46 ;
		speed                          : 100 mph ;
		track_type                     : RAIL ;
		power                          : 700 kW ;
		weight                         : 45 ton ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		tractive_effort_coefficient    : 0.4 ;
		air_drag_coefficient           : 0.08 ;
		length                         : 8 ;
		misc_flags                     : bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 1 ;
		loading_speed                  : 23 ;
	}
	graphics{
		can_attach_wagon:		sw_168_coupling_restrictions;
		default                 : sw_168_gfx_manual_check ;
		colour_mapping          : sw_168_colours_2cc_check ;
		purchase                : sw_168_purchase ;
		purchase_colour_mapping : sw_168_purchase_2cc_check ;
		sound_effect            : sw_sfx_dmu_one ;
		create_effect           : vfx_diesel_default ;
		cargo_subtype_text      : sw_168_refit_text_check ;
		running_cost_factor     : return(current_speed == 0 ? 12 : 46) ;
	}
	livery_override (item_MU90){
		default                     : sw_168_gfx_trailer_manual_check ;
		colour_mapping              : sw_168_colours_2cc_check ;
		power                       : 700;
		cargo_capacity              : 75 ;
		cargo_subtype_text          : sw_168_refit_text_check ;
		weight                      : 45 ;
	}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_cl168, 168){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_cl168, 168){
	property{
		name                           : string(STR_NAME_TURBOSTAR_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DEMU/class_205.pnml" 1
//205 DMBSO
spriteset(spriteset_205_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_205_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_205_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_205_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_205_m_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 300)}
//205 DTC
spriteset(spriteset_205_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_205_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_205_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_205_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_205_dt_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(0, 325)}
//207 DMBSO
spriteset(spriteset_207_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_207_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_207_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_207_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_207_m_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 325)}
//207 DTC
spriteset(spriteset_207_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_207_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(179, 125)}
spriteset(spriteset_207_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_207_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(179, 275)}
spriteset(spriteset_207_dt_cnx, "gfx/EMU/class_415.png") {template_8_8_networker(179, 350)}
//Trailer
spriteset(spriteset_205_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 50)}
spriteset(spriteset_205_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_205_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_205_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(0, 275)}
spriteset(spriteset_205_t_cnx, "gfx/EMU/class_415.png") {template_8_4_networker(0, 350)}
//Purchase
spriteset(spriteset_205_brg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 50)}
spriteset(spriteset_205_brb_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_205_bbg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 200)}
spriteset(spriteset_205_nse_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 275)}
spriteset(spriteset_205_cnx_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 350)}
//Headcodes
spriteset(spriteset_205_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_205_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_207_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_207_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 75)}


//Switches
switch(FEAT_TRAINS, SELF, sw_205_brg_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_brg; spriteset_205_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_205_brg_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_brg; spriteset_205_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_205_brg, vehicle_is_reversed){0: sw_205_brg_f; sw_205_brg_r;}

switch(FEAT_TRAINS, SELF, sw_207_brg_f, (count_veh_id(205)+1)%2){1: spriteset_207_m_brg; spriteset_207_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_207_brg_r, (count_veh_id(205)+1)%2){1: spriteset_207_dt_brg; spriteset_207_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_207_brg, vehicle_is_reversed){0: sw_207_brg_f; sw_207_brg_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_brg_select, current_year){0..1960: sw_205_brg; sw_207_brg;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brg, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_brg_select;}


switch(FEAT_TRAINS, SELF, sw_205_brb_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_brb; spriteset_205_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_205_brb_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_brb; spriteset_205_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_205_brb, vehicle_is_reversed){0: sw_205_brb_f; sw_205_brb_r;}

switch(FEAT_TRAINS, SELF, sw_207_brb_f, (count_veh_id(205)+1)%2){1: spriteset_207_m_brb; spriteset_207_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_207_brb_r, (count_veh_id(205)+1)%2){1: spriteset_207_dt_brb; spriteset_207_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_207_brb, vehicle_is_reversed){0: sw_207_brb_f; sw_207_brb_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_brb_select, current_year){0..1960: sw_205_brb; sw_207_brb;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brb, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_brb_select;}


switch(FEAT_TRAINS, SELF, sw_205_bbg_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_bbg; spriteset_205_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_205_bbg_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_bbg; spriteset_205_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_205_bbg, vehicle_is_reversed){0: sw_205_bbg_f; sw_205_bbg_r;}

switch(FEAT_TRAINS, SELF, sw_207_bbg_f, (count_veh_id(205)+1)%2){1: spriteset_207_m_bbg; spriteset_207_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_207_bbg_r, (count_veh_id(205)+1)%2){1: spriteset_207_dt_bbg; spriteset_207_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_207_bbg, vehicle_is_reversed){0: sw_207_bbg_f; sw_207_bbg_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg_select, current_year){0..1960: sw_205_bbg; sw_207_bbg;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_bbg_select;}


switch(FEAT_TRAINS, SELF, sw_205_nse_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_nse; spriteset_205_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_205_nse_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_nse; spriteset_205_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_205_nse, vehicle_is_reversed){0: sw_205_nse_f; sw_205_nse_r;}

switch(FEAT_TRAINS, SELF, sw_207_nse_f, (count_veh_id(205)+1)%2){1: spriteset_207_m_nse; spriteset_207_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_207_nse_r, (count_veh_id(205)+1)%2){1: spriteset_207_dt_nse; spriteset_207_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_207_nse, vehicle_is_reversed){0: sw_207_nse_f; sw_207_nse_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_nse_select, current_year){0..1960: sw_205_nse; sw_207_nse;}
	
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_nse, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_nse_select;}


switch(FEAT_TRAINS, SELF, sw_205_cnx_f, (count_veh_id(205)+1)%2){1: spriteset_205_m_cnx; spriteset_205_dt_cnx;}
switch(FEAT_TRAINS, SELF, sw_205_cnx_r, (count_veh_id(205)+1)%2){1: spriteset_205_dt_cnx; spriteset_205_m_cnx;}
switch(FEAT_TRAINS, PARENT, sw_205_cnx, vehicle_is_reversed){0: sw_205_cnx_f; sw_205_cnx_r;}

switch(FEAT_TRAINS, SELF, sw_207_cnx_f, (count_veh_id(205)+1)%2){1: spriteset_207_m_cnx; spriteset_207_dt_cnx;}
switch(FEAT_TRAINS, SELF, sw_207_cnx_r, (count_veh_id(205)+1)%2){1: spriteset_207_dt_cnx; spriteset_207_m_cnx;}
switch(FEAT_TRAINS, PARENT, sw_207_cnx, vehicle_is_reversed){0: sw_207_cnx_f; sw_207_cnx_r;}

switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx_select, current_year){0..1960: sw_205_cnx; sw_207_cnx;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_southern_thump_cnx_select;}
	

//Trailers
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brg_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_brg;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_brb_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_brb;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_bbg_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_bbg;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_nse_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_nse;}
random_switch(FEAT_TRAINS, SELF, sw_southern_thump_cnx_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_205_t_cnx;}

//Livery Switches
switch(FEAT_TRAINS, SELF, sw_205_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_thump_brg;
	1964 .. 1975: sw_southern_thump_brb;
	1964 .. 1982: sw_southern_thump_bbg;
	1983 .. 1995: sw_southern_thump_nse;
	1996 .. 4096: sw_southern_thump_cnx;
	sw_southern_thump_cnx;
}

switch(FEAT_TRAINS, SELF, sw_205_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_thump_brg_t;
	1964 .. 1975: sw_southern_thump_brb_t;
	1964 .. 1982: sw_southern_thump_bbg_t;
	1983 .. 1995: sw_southern_thump_nse_t;
	1996 .. 4096: sw_southern_thump_cnx_t;
	sw_southern_thump_cnx_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_205_manual_livery_decider, cargo_subtype){
	0: sw_southern_thump_brg;
	1: sw_southern_thump_brb;
	2: sw_southern_thump_bbg;
	3: sw_southern_thump_nse;
	4: sw_southern_thump_cnx;
}

switch(FEAT_TRAINS, SELF, sw_205_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_thump_brg_t;
	1: sw_southern_thump_brb_t;
	2: sw_southern_thump_bbg_t;
	3: sw_southern_thump_nse_t;
	4: sw_southern_thump_cnx_t;
}

switch(FEAT_TRAINS, SELF, sw_205_livery_choice_decider, livery_choice){1 : sw_205_manual_livery_decider ; sw_205_passenger_livery_decider ;}
switch(FEAT_TRAINS, SELF, sw_205_livery_choice_decider_t, livery_choice){1 : sw_205_manual_livery_decider_t ; sw_205_passenger_livery_decider_t ;}

//Refit text

switch(FEAT_TRAINS, SELF, sw_205_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_BRBLUEGREY);
	3: string(STR_LIVERY_NSE);
	4: string(STR_LIVERY_CONNEX);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_205_refit_text_decider, livery_choice){
	1 : sw_205_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_205_purchase, current_year){
	0 .. 1963: spriteset_205_brg_purchase;
	1964 .. 1975: spriteset_205_brb_purchase;
	1964 .. 1982: spriteset_205_bbg_purchase;
	1983 .. 1995: spriteset_205_nse_purchase;
	1996 .. 4096: spriteset_205_cnx_purchase;
	spriteset_205_cnx_purchase;
}

//Visual Effects switch
switch(FEAT_TRAINS, PARENT, sw_205_visual_effect_f, vehicle_is_reversed){1: vfx_diesel_default; VISUAL_EFFECT_DISABLE;}
switch(FEAT_TRAINS, PARENT, sw_205_visual_effect_r, vehicle_is_reversed){1: VISUAL_EFFECT_DISABLE; vfx_diesel_default;}
switch(FEAT_TRAINS, SELF, sw_205_visual_effect, (count_veh_id(205)+1)%2){1: sw_205_visual_effect_r; sw_205_visual_effect_f;}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_205_headcode, position_in_consist){0: spriteset_205_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_205_headcode_2, position_in_consist_from_end){0: spriteset_205_headcode_r; sw_205_headcode;}
switch(FEAT_TRAINS, SELF, sw_207_headcode, position_in_consist){0: spriteset_207_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_207_headcode_2, position_in_consist_from_end){0: spriteset_207_headcode_r; sw_207_headcode;}
switch(FEAT_TRAINS, SELF, sw_southern_thump_headcode, current_year){0..1960: sw_205_headcode_2; sw_207_headcode_2;}


switch(FEAT_TRAINS, SELF, sw_205_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_205_livery_choice_decider;
	1 : return sw_southern_thump_headcode;
}

switch(FEAT_TRAINS, SELF, sw_205_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_205_livery_choice_decider_t;
}
//Recolour
random_switch(FEAT_TRAINS, SELF, sw_205_green_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_blue_grey_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_205_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_205_colour_mapping_auto, current_year){
	0 .. 1963: sw_205_green_colour_mapping;
	1964 .. 1975: sw_205_blue_grey_colour_mapping;
	1964 .. 1982: sw_205_blue_grey_colour_mapping;
	1983 .. 1995: sw_205_nse_colour_mapping;
	1996 .. 4096: sw_205_cnx_colour_mapping;
	sw_205_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_205_colour_mapping_manual, cargo_subtype){
	0: sw_205_green_colour_mapping;
	1: sw_205_blue_grey_colour_mapping;
	2: sw_205_blue_grey_colour_mapping;
	3: sw_205_nse_colour_mapping;
	4: sw_205_cnx_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_205_colour_mapping_manual_check, livery_choice){
	1 : sw_205_colour_mapping_manual ;
	sw_205_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_205_colour_mapping_decider, colour_scheme_1){
	1 : sw_205_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_205_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	205: return CB_RESULT_ATTACH_ALLOW;
    return string(STR_205_NO_COUPLE);
}



item (FEAT_TRAINS, item_205, 205) {
	property {
		name: 							string(STR_NAME_205);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					25;
		cost_factor:					35;
		running_cost_factor:			28;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						RAIL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					64;
		weight:							44 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_DIESEL;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_DIESEL;
	}
	graphics {
		can_attach_wagon:					sw_205_coupling_restrictions;
		default: 							sw_205_default;
		purchase:							sw_205_purchase;
		create_effect:						sw_205_visual_effect;
		cargo_subtype_text:					sw_205_refit_text_decider ;
		colour_mapping:						sw_205_colour_mapping_decider;
		purchase_colour_mapping: 			sw_205_colour_mapping_decider;
		sound_effect:                   	sw_sfx_diesel_loco_small;
		running_cost_factor: 				return(current_speed == 0 ? 7 : 28) ;
}
		livery_override (9010) {
		cargo_capacity: 95;
		default: sw_205_default_t;
		colour_mapping:	sw_205_colour_mapping_decider;
		cargo_subtype_text: sw_205_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_205, 205){
	property{
		name                           : string(STR_NAME_205_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/DEMU/voyager.pnml" 1
//Voyager


//Sprite sets

spriteset(gfx_voyager_virgin_middle		, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 125)}
spriteset(gfx_voyager_virgin_front_hl	, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 150)}
spriteset(gfx_voyager_virgin_front_tl	, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 175)}
spriteset(gfx_voyager_virgin_front		, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 200)}

spriteset(gfx_voyager_arriva_middle		, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 251)}
spriteset(gfx_voyager_arriva_front_hl	, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 276)}
spriteset(gfx_voyager_arriva_front_tl	, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 301)}
spriteset(gfx_voyager_arriva_front		, "gfx/DEMU/class_221.png"	){	template_8_8_networker(	0, 326)}

spriteset(gfx_voyager_virgin_purchase	, "gfx/DEMU/class_221.png"	){	template_dualhead_purchase( 0, 225)}
spriteset(gfx_voyager_arriva_purchase	, "gfx/DEMU/class_221.png"	){	template_dualhead_purchase( 0, 351)}



//Switches


//Graphics

switch(FEAT_TRAINS, SELF, sw_voyager_virgin_back_check, position_in_consist_from_end){
	0 : gfx_voyager_virgin_front_tl ;
	gfx_voyager_virgin_front ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_virgin_front_check, position_in_consist){
	0 : gfx_voyager_virgin_front_hl ;
	sw_voyager_virgin_back_check ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_arriva_back_check, position_in_consist_from_end){
	0 : gfx_voyager_arriva_front_tl ;
	gfx_voyager_arriva_front ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_arriva_front_check, position_in_consist){
	0 : gfx_voyager_arriva_front_hl ;
	sw_voyager_arriva_back_check ;
}


//Liveries

switch(FEAT_TRAINS, SELF, sw_voyager_auto, current_year < 2009){
	1 : sw_voyager_virgin_front_check ;
	sw_voyager_arriva_front_check ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_manual, cargo_subtype){
	1 : sw_voyager_arriva_front_check ;
	sw_voyager_virgin_front_check ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_manual_check, livery_choice){
	1 : sw_voyager_manual ;
	sw_voyager_auto ;
}


//Intermediate carriages

switch(FEAT_TRAINS, SELF, sw_voyager_middle_auto, current_year < 2009){
	1 : gfx_voyager_virgin_middle ;
	gfx_voyager_arriva_middle ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_middle_manual, cargo_subtype){
	1 : gfx_voyager_arriva_middle ;
	gfx_voyager_virgin_middle ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_middle_manual_check, livery_choice){
	1 : sw_voyager_middle_manual ;
	sw_voyager_middle_auto ;
}


//Colour Mapping

switch(FEAT_TRAINS, SELF, sw_voyager_colours_auto, current_year < 2009){
	1 : palette_2cc(COLOUR_RED, COLOUR_GREY) ;
	palette_2cc(COLOUR_PINK, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_PINK, COLOUR_RED) ;
	palette_2cc(COLOUR_RED, COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_manual_check, livery_choice){
	1 : sw_voyager_colours_manual ;
	sw_voyager_colours_auto ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_colours_2cc_check, colour_scheme_1){
	1 : sw_voyager_colours_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Purchase sprite

switch(FEAT_TRAINS, SELF, sw_voyager_purchase_sprite, current_year < 2009){
	1 : gfx_voyager_virgin_purchase ;
	gfx_voyager_arriva_purchase ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_purchase_2cc_check, colour_scheme_1){
	1 : sw_voyager_colours_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}



//Refit text

switch(FEAT_TRAINS, SELF, sw_voyager_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_VIRGIN_TRAINS) ;
	1 : string(STR_LIVERY_ARRIVA_XC) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_voyager_refit_text_check, livery_choice){
	1 : sw_voyager_refit_text ;
	CB_RESULT_NO_TEXT ;
}



//Item


switch(FEAT_TRAINS, SELF, sw_voyager_attach, vehicle_type_id){
	220 : return CB_RESULT_ATTACH_ALLOW  ;
	item_MU90 : return CB_RESULT_ATTACH_ALLOW  ;
	return string(STR_220_NO_COUPLE) ;
}


item(FEAT_TRAINS, item_voyager, 220){
	property{
		name                           : string(STR_NAME_VOYAGER) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_MU, TRAIN_FLAG_TILT);
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 8 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(2001,1,1) ;
		model_life                     : VEHICLE_NEVER_EXPIRES ;
		vehicle_life                   : 35 ;
		reliability_decay              : 9 ;
		cost_factor                    : 100 ;
		running_cost_base              : RUNNING_COST_DIESEL ;
		running_cost_factor            : 180 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 70 ;
		loading_speed                  : 20 ;
		track_type                     : RAIL ;
		engine_class                   : ENGINE_CLASS_DIESEL ;
		speed                          : 125 mph ;
		power                          : 1120 kW ;
		weight                         : 50 ton ;
		tractive_effort_coefficient    : 0.45 ;
		air_drag_coefficient           : 0.06 ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_DIESEL ;
		dual_headed                    : 1 ;
	}
	graphics{
		default							: sw_voyager_manual_check ;
		purchase						: sw_voyager_purchase_sprite ;
		sound_effect					: sw_sfx_dmu_two ;
		create_effect					: vfx_diesel_default ;
		colour_mapping					: sw_voyager_colours_2cc_check ;
		purchase_colour_mapping			: sw_voyager_purchase_2cc_check ;
		cargo_subtype_text				: sw_voyager_refit_text_check ;
		can_attach_wagon				: sw_voyager_attach ;
		running_cost_factor				: return(current_speed == 0 ? 50 : 180) ;
		purchase_running_cost_factor	: 180 ;
	}
	livery_override (item_MU90){
		default							: sw_voyager_middle_manual_check ;
		colour_mapping					: sw_voyager_colours_2cc_check ;
		cargo_capacity					: 80 ;
		power							: 560 ;
		cargo_subtype_text				: sw_voyager_refit_text_check ;
		weight							: 45 ;
		effect_spawn_model_and_powered	: EFFECT_SPAWN_MODEL_DIESEL ;
		create_effect					: vfx_diesel_default ;
	}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_voyager, 220){
	property{
		name                           : string(STR_NAME_VOYAGER_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_313.pnml" 1
//BR Blue/grey
spriteset(spriteset_313_brb_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_313_brb_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_313_brb_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_313_brb_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_313_brb_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_313_brb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 125)}

//NSE
spriteset(spriteset_313_nse_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_313_nse_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_313_nse_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_313_nse_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_313_nse_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_313_nse_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 275)}

//MerseyRail Old
spriteset(spriteset_313_mro_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_313_mro_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_313_mro_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_313_mro_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_313_mro_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_313_mro_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 275)}

//SilverLinK
spriteset(spriteset_313_slk_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 300)}
spriteset(spriteset_313_slk_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 325)}
spriteset(spriteset_313_slk_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 350)}
spriteset(spriteset_313_slk_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 375)}
spriteset(spriteset_313_slk_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 400)}
spriteset(spriteset_313_slk_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 425)}

//SouthEastern Blue
spriteset(spriteset_313_seb_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 450)}
spriteset(spriteset_313_seb_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_313_seb_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_313_seb_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 525)}
spriteset(spriteset_313_seb_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_313_seb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 575)}

//SouthEastern Yellow
spriteset(spriteset_313_sey_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_313_sey_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_313_sey_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 500)}
spriteset(spriteset_313_sey_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_313_sey_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_313_sey_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 575)}

//CoNneX
spriteset(spriteset_313_cnx_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 600)}
spriteset(spriteset_313_cnx_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_313_cnx_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_313_cnx_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 675)}
spriteset(spriteset_313_cnx_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_313_cnx_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 725)}

//MerseyRail New
spriteset(spriteset_313_mrn_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 600)}
spriteset(spriteset_313_mrn_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 625)}
spriteset(spriteset_313_mrn_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 650)}
spriteset(spriteset_313_mrn_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 675)}
spriteset(spriteset_313_mrn_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 700)}
spriteset(spriteset_313_mrn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 725)}

//WaGn White
spriteset(spriteset_313_wgw_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 750)}
spriteset(spriteset_313_wgw_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 775)}
spriteset(spriteset_313_wgw_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 800)}
spriteset(spriteset_313_wgw_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 825)}
spriteset(spriteset_313_wgw_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 850)}
spriteset(spriteset_313_wgw_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 875)}

//WaGn Purple
spriteset(spriteset_313_wgp_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 750)}
spriteset(spriteset_313_wgp_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 775)}
spriteset(spriteset_313_wgp_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 800)}
spriteset(spriteset_313_wgp_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 825)}
spriteset(spriteset_313_wgp_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 850)}
spriteset(spriteset_313_wgp_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 875)}

//First Capital Connect
spriteset(spriteset_313_fcc_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 900)}
spriteset(spriteset_313_fcc_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 925)}
spriteset(spriteset_313_fcc_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 950)}
spriteset(spriteset_313_fcc_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 975)}
spriteset(spriteset_313_fcc_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1000)}
spriteset(spriteset_313_fcc_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1025)}

//SouTherN
spriteset(spriteset_313_stn_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 900)}
spriteset(spriteset_313_stn_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 925)}
spriteset(spriteset_313_stn_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 950)}
spriteset(spriteset_313_stn_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 975)}
spriteset(spriteset_313_stn_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1000)}
spriteset(spriteset_313_stn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1025)}

//First Great Eastern
spriteset(spriteset_313_fge_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1050)}
spriteset(spriteset_313_fge_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1075)}
spriteset(spriteset_313_fge_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1100)}
spriteset(spriteset_313_fge_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1125)}
spriteset(spriteset_313_fge_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1150)}
spriteset(spriteset_313_fge_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1175)}

//ONE anglia
spriteset(spriteset_313_one_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1050)}
spriteset(spriteset_313_one_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1075)}
spriteset(spriteset_313_one_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1100)}
spriteset(spriteset_313_one_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1125)}
spriteset(spriteset_313_one_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1150)}
spriteset(spriteset_313_one_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1175)}

//Abellio Greater Anglia
spriteset(spriteset_313_aga_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1200)}
spriteset(spriteset_313_aga_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1225)}
spriteset(spriteset_313_aga_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1250)}
spriteset(spriteset_313_aga_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1275)}
spriteset(spriteset_313_aga_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1300)}
spriteset(spriteset_313_aga_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1325)}

//Transport For London
spriteset(spriteset_313_tfl_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1200)}
spriteset(spriteset_313_tfl_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1225)}
spriteset(spriteset_313_tfl_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1250)}
spriteset(spriteset_313_tfl_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1275)}
spriteset(spriteset_313_tfl_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1300)}
spriteset(spriteset_313_tfl_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1325)}

//SPt Classic
spriteset(spriteset_313_spc_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1350)}
spriteset(spriteset_313_spc_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1375)}
spriteset(spriteset_313_spc_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1400)}
spriteset(spriteset_313_spc_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1425)}
spriteset(spriteset_313_spc_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1450)}
spriteset(spriteset_313_spc_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1475)}

//SCot Rail
spriteset(spriteset_313_scr_t, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1350)}
spriteset(spriteset_313_scr_p, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1375)}
spriteset(spriteset_313_scr_f, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1400)}
spriteset(spriteset_313_scr_r, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1425)}
spriteset(spriteset_313_scr_o, "gfx/EMU/class_508.png") {template_8_8_networker(179, 1450)}
spriteset(spriteset_313_scr_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(179, 1475)}

//SPt New
spriteset(spriteset_313_spn_t, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1500)}
spriteset(spriteset_313_spn_p, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1525)}
spriteset(spriteset_313_spn_f, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1550)}
spriteset(spriteset_313_spn_r, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1575)}
spriteset(spriteset_313_spn_o, "gfx/EMU/class_508.png") {template_8_8_networker(0, 1600)}
spriteset(spriteset_313_spn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(0, 1625)}

//Switches

//Coupling

switch(FEAT_TRAINS, SELF, sw_313_coupling_restrictions, vehicle_type_id) {
    item_Mk2: return CB_RESULT_ATTACH_ALLOW;
	item_313: return CB_RESULT_ATTACH_ALLOW;
	item_314: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_313_NO_COUPLE);
}

//Power Car
switch(FEAT_TRAINS, SELF, sw_313_brb_f, position_in_consist){
	0: spriteset_313_brb_f; 
	spriteset_313_brb_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_brb, position_in_consist_from_end){
	0: spriteset_313_brb_r; 
	sw_313_brb_f;
}

switch(FEAT_TRAINS, SELF, sw_313_nse_f, position_in_consist){
	0: spriteset_313_nse_f; 
	spriteset_313_nse_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_nse, position_in_consist_from_end){
	0: spriteset_313_nse_r; 
	sw_313_nse_f;
}

switch(FEAT_TRAINS, SELF, sw_313_mro_f, position_in_consist){
	0: spriteset_313_mro_f; 
	spriteset_313_mro_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_mro, position_in_consist_from_end){
	0: spriteset_313_mro_r; 
	sw_313_mro_f;
}

switch(FEAT_TRAINS, SELF, sw_313_slk_f, position_in_consist){
	0: spriteset_313_slk_f; 
	spriteset_313_slk_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_slk, position_in_consist_from_end){
	0: spriteset_313_slk_r; 
	sw_313_slk_f;
}

switch(FEAT_TRAINS, SELF, sw_313_seb_f, position_in_consist){
	0: spriteset_313_seb_f; 
	spriteset_313_seb_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_seb, position_in_consist_from_end){
	0: spriteset_313_seb_r; 
	sw_313_seb_f;
}

switch(FEAT_TRAINS, SELF, sw_313_sey_f, position_in_consist){
	0: spriteset_313_sey_f; 
	spriteset_313_sey_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_sey, position_in_consist_from_end){
	0: spriteset_313_sey_r; 
	sw_313_sey_f;
}

switch(FEAT_TRAINS, SELF, sw_313_cnx_f, position_in_consist){
	0: spriteset_313_cnx_f; 
	spriteset_313_cnx_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_cnx, position_in_consist_from_end){
	0: spriteset_313_cnx_r; 
	sw_313_cnx_f;
}

switch(FEAT_TRAINS, SELF, sw_313_mrn_f, position_in_consist){
	0: spriteset_313_mrn_f; 
	spriteset_313_mrn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_mrn, position_in_consist_from_end){
	0: spriteset_313_mrn_r; 
	sw_313_mrn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_wgw_f, position_in_consist){
	0: spriteset_313_wgw_f; 
	spriteset_313_wgw_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_wgw, position_in_consist_from_end){
	0: spriteset_313_wgw_r; 
	sw_313_wgw_f;
}

switch(FEAT_TRAINS, SELF, sw_313_wgp_f, position_in_consist){
	0: spriteset_313_wgp_f; 
	spriteset_313_wgp_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_wgp, position_in_consist_from_end){
	0: spriteset_313_wgp_r; 
	sw_313_wgp_f;
}

switch(FEAT_TRAINS, SELF, sw_313_fcc_f, position_in_consist){
	0: spriteset_313_fcc_f; 
	spriteset_313_fcc_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_fcc, position_in_consist_from_end){
	0: spriteset_313_fcc_r; 
	sw_313_fcc_f;
}

switch(FEAT_TRAINS, SELF, sw_313_stn_f, position_in_consist){
	0: spriteset_313_stn_f; 
	spriteset_313_stn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_stn, position_in_consist_from_end){
	0: spriteset_313_stn_r; 
	sw_313_stn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_fge_f, position_in_consist){
	0: spriteset_313_fge_f; 
	spriteset_313_fge_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_fge, position_in_consist_from_end){
	0: spriteset_313_fge_r; 
	sw_313_fge_f;
}

switch(FEAT_TRAINS, SELF, sw_313_one_f, position_in_consist){
	0: spriteset_313_one_f; 
	spriteset_313_one_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_one, position_in_consist_from_end){
	0: spriteset_313_one_r; 
	sw_313_one_f;
}

switch(FEAT_TRAINS, SELF, sw_313_aga_f, position_in_consist){
	0: spriteset_313_aga_f; 
	spriteset_313_aga_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_aga, position_in_consist_from_end){
	0: spriteset_313_aga_r; 
	sw_313_aga_f;
}

switch(FEAT_TRAINS, SELF, sw_313_tfl_f, position_in_consist){
	0: spriteset_313_tfl_f; 
	spriteset_313_tfl_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_tfl, position_in_consist_from_end){
	0: spriteset_313_tfl_r; 
	sw_313_tfl_f;
}

switch(FEAT_TRAINS, SELF, sw_313_spc_f, position_in_consist){
	0: spriteset_313_spc_f; 
	spriteset_313_spc_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_spc, position_in_consist_from_end){
	0: spriteset_313_spc_r; 
	sw_313_spc_f;
}

switch(FEAT_TRAINS, SELF, sw_313_spn_f, position_in_consist){
	0: spriteset_313_spn_f; 
	spriteset_313_spn_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_spn, position_in_consist_from_end){
	0: spriteset_313_spn_r; 
	sw_313_spn_f;
}

switch(FEAT_TRAINS, SELF, sw_313_scr_f, position_in_consist){
	0: spriteset_313_scr_f; 
	spriteset_313_scr_o;
}
 
switch(FEAT_TRAINS, SELF, sw_313_scr, position_in_consist_from_end){
	0: spriteset_313_scr_r; 
	sw_313_scr_f;
}

//Trailer/Pan

switch(FEAT_TRAINS, SELF, sw_313_brb_p, position_in_vehid_chain){
	0: spriteset_313_brb_p; 
	spriteset_313_brb_t;
}

switch(FEAT_TRAINS, SELF, sw_313_nse_p, position_in_vehid_chain){
	0: spriteset_313_nse_p; 
	spriteset_313_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_313_mro_p, position_in_vehid_chain){
	0: spriteset_313_mro_p; 
	spriteset_313_mro_t;
}

switch(FEAT_TRAINS, SELF, sw_313_slk_p, position_in_vehid_chain){
	0: spriteset_313_slk_p; 
	spriteset_313_slk_t;
}

switch(FEAT_TRAINS, SELF, sw_313_seb_p, position_in_vehid_chain){
	0: spriteset_313_seb_p; 
	spriteset_313_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_313_sey_p, position_in_vehid_chain){
	0: spriteset_313_sey_p; 
	spriteset_313_sey_t;
}

switch(FEAT_TRAINS, SELF, sw_313_cnx_p, position_in_vehid_chain){
	0: spriteset_313_cnx_p; 
	spriteset_313_cnx_t;
}

switch(FEAT_TRAINS, SELF, sw_313_mrn_p, position_in_vehid_chain){
	0: spriteset_313_mrn_p; 
	spriteset_313_mrn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_wgw_p, position_in_vehid_chain){
	0: spriteset_313_wgw_p; 
	spriteset_313_wgw_t;
}

switch(FEAT_TRAINS, SELF, sw_313_wgp_p, position_in_vehid_chain){
	0: spriteset_313_wgp_p; 
	spriteset_313_wgp_t;
}

switch(FEAT_TRAINS, SELF, sw_313_fcc_p, position_in_vehid_chain){
	0: spriteset_313_fcc_p; 
	spriteset_313_fcc_t;
}

switch(FEAT_TRAINS, SELF, sw_313_stn_p, position_in_vehid_chain){
	0: spriteset_313_stn_p; 
	spriteset_313_stn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_fge_p, position_in_vehid_chain){
	0: spriteset_313_fge_p; 
	spriteset_313_fge_t;
}

switch(FEAT_TRAINS, SELF, sw_313_one_p, position_in_vehid_chain){
	0: spriteset_313_one_p; 
	spriteset_313_one_t;
}

switch(FEAT_TRAINS, SELF, sw_313_aga_p, position_in_vehid_chain){
	0: spriteset_313_aga_p; 
	spriteset_313_aga_t;
}

switch(FEAT_TRAINS, SELF, sw_313_tfl_p, position_in_vehid_chain){
	0: spriteset_313_tfl_p; 
	spriteset_313_tfl_t;
}

switch(FEAT_TRAINS, SELF, sw_313_spc_p, position_in_vehid_chain){
	0: spriteset_313_spc_p; 
	spriteset_313_spc_t;
}

switch(FEAT_TRAINS, SELF, sw_313_spn_p, position_in_vehid_chain){
	0: spriteset_313_spn_p; 
	spriteset_313_spn_t;
}

switch(FEAT_TRAINS, SELF, sw_313_scr_p, position_in_vehid_chain){
	0: spriteset_313_scr_p; 
	spriteset_313_scr_t;
}
 
//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_313_brb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_brb ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_nse ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mro_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mro ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_slk_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_slk ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_seb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_seb ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_sey_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_sey ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_cnx ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mrn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mrn ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_select){
	1: return sw_313_wgw ;
	1: return sw_313_wgp;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fcc ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_stn ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fge ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_one ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_aga ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_tfl ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spc_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spc ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spn ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_scr ;
}

//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_313_brb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_brb_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_nse_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mro_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mro_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_slk_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_slk_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_seb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_seb_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_sey_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_sey_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_cnx_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_mrn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_mrn_p ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_t_select){
	1: return sw_313_wgw_p ;
	1: return sw_313_wgp_p;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fcc_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_stn_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_fge_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_one_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_aga_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_tfl_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spc_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spc_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_spn_p ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_313_scr_p ;
}
 
//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_313_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_nse_select;
	1996 .. 2005: sw_313_slk_select;
	2006 .. 2010: sw_313_fcc_select;
	sw_313_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_314_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_spc_select;
	1996 .. 2005: sw_313_spn_select;
	2006 .. 2010: sw_313_scr_select;
	sw_313_scr_select;
}

switch(FEAT_TRAINS, SELF, sw_315_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_nse_select;
	1996 .. 2000: sw_313_wgn_select;
	2001 .. 2005: sw_313_one_select;
	2006 .. 2010: sw_313_aga_select;
	sw_313_tfl_select;
}

switch(FEAT_TRAINS, SELF, sw_508_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_select;
	1983 .. 1995: sw_313_mro_select;
	1996 .. 2005: sw_313_mro_select;
	sw_313_mrn_select;
}

switch(FEAT_TRAINS, SELF, sw_313_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_nse_t_select;
	1996 .. 2005: sw_313_slk_t_select;
	2006 .. 2010: sw_313_fcc_t_select;
	sw_313_stn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_314_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_spc_t_select;
	1996 .. 2005: sw_313_spn_t_select;
	2006 .. 2010: sw_313_scr_t_select;
	sw_313_scr_t_select;
}

switch(FEAT_TRAINS, SELF, sw_315_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_nse_t_select;
	1996 .. 2000: sw_313_wgn_t_select;
	2001 .. 2005: sw_313_one_t_select;
	2006 .. 2010: sw_313_aga_t_select;
	sw_313_tfl_t_select;
}

switch(FEAT_TRAINS, SELF, sw_508_t_livery_decider, current_year){
	1971 .. 1982: sw_313_brb_t_select;
	1983 .. 1995: sw_313_mro_t_select;
	1996 .. 2005: sw_313_mro_t_select;
	sw_313_mrn_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_313_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_slk_select;
	3: sw_313_wgn_select;
	4: sw_313_fcc_select;
	5: sw_313_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_314_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_spc_select;
	2: sw_313_spn_select;
	3: sw_313_scr_select;
}

switch(FEAT_TRAINS, SELF, sw_315_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_nse_select;
	2: sw_313_wgn_select;
	3: sw_313_fge_select;
	4: sw_313_one_select;
	5: sw_313_aga_select;
	6: sw_313_tfl_select;
}

switch(FEAT_TRAINS, SELF, sw_508_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_select;
	1: sw_313_mro_select;
	2: sw_313_cnx_select;
	3: sw_313_sey_select;
	4: sw_313_seb_select;
	5: sw_313_slk_select;
	6: sw_313_mrn_select;
}

switch(FEAT_TRAINS, SELF, sw_313_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_slk_t_select;
	3: sw_313_wgn_t_select;
	4: sw_313_fcc_t_select;
	5: sw_313_stn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_314_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_spc_t_select;
	2: sw_313_spn_t_select;
	3: sw_313_scr_t_select;
}

switch(FEAT_TRAINS, SELF, sw_315_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_nse_t_select;
	2: sw_313_wgn_t_select;
	3: sw_313_fge_t_select;
	4: sw_313_one_t_select;
	5: sw_313_aga_t_select;
	6: sw_313_tfl_t_select;
}

switch(FEAT_TRAINS, SELF, sw_508_t_manual_livery_decider, cargo_subtype){
	0: sw_313_brb_t_select;
	1: sw_313_mro_t_select;
	2: sw_313_cnx_t_select;
	3: sw_313_sey_t_select;
	4: sw_313_seb_t_select;
	5: sw_313_slk_t_select;
	6: sw_313_mrn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_313_livery_choice_decider, livery_choice){
	1 : sw_313_manual_livery_decider ; 
	sw_313_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_313_t_livery_choice_decider, livery_choice){
	1 : sw_313_t_manual_livery_decider ; 
	sw_313_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_314_livery_choice_decider, livery_choice){
	1 : sw_314_manual_livery_decider ; 
	sw_314_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_314_t_livery_choice_decider, livery_choice){
	1 : sw_314_t_manual_livery_decider ; 
	sw_314_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_315_livery_choice_decider, livery_choice){
	1 : sw_315_manual_livery_decider ; 
	sw_315_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_315_t_livery_choice_decider, livery_choice){
	1 : sw_315_t_manual_livery_decider ; 
	sw_315_t_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_508_livery_choice_decider, livery_choice){
	1 : sw_508_manual_livery_decider ; 
	sw_508_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_508_t_livery_choice_decider, livery_choice){
	1 : sw_508_t_manual_livery_decider ; 
	sw_508_t_livery_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_livery_choice_decider ; 
	0..256: sw_508_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_t_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_t_livery_choice_decider ; 
	0..256: sw_508_t_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_314_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_livery_choice_decider ; 
	0..256: sw_315_livery_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_314_t_final_livery_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_t_livery_choice_decider ; 
	0..256: sw_315_t_livery_choice_decider ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_313_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_SILVERLINK);
	3: return string(STR_LIVERY_WAGN);
	4: return string(STR_LIVERY_FCC);
	5: return string(STR_LIVERY_SOUTHERN);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_314_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE_SPT);
	1: return string(STR_LIVERY_SPT_ORANGE);
	2: return string(STR_LIVERY_SPT_CARMINE_CREAM);
	3: return string(STR_LIVERY_SCOTRAIL);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_315_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_WAGN);
	3: return string(STR_LIVERY_FGE);
	4: return string(STR_LIVERY_ONE_ANGLIA);
	5: return string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	6: return string(STR_LIVERY_TFL);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_508_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_MERSEYRAIL);
	2: return string(STR_LIVERY_CONNEX);
	3: return string(STR_LIVERY_SE_YELLOW);
	4: return string(STR_LIVERY_SE_BLUE);
	5: return string(STR_LIVERY_SILVERLINK);
	6: return string(STR_LIVERY_MERSEYRAIL_REFERB);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, PARENT, sw_313_refit_text_class_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_refit_text ; 
	0..256: sw_508_refit_text ;
}

switch(FEAT_TRAINS, PARENT, sw_314_refit_text_class_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_refit_text ; 
	0..256: sw_315_refit_text ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_313_refit_text_decider, livery_choice){
	1 : sw_313_refit_text_class_decider ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_314_refit_text_decider, livery_choice){
	1 : sw_314_refit_text_class_decider ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_313_purchase, current_year){
	1971 .. 1982: spriteset_313_brb_purchase;
	1983 .. 1995: spriteset_313_nse_purchase;
	1996 .. 2005: spriteset_313_slk_purchase;
	2006 .. 2010: spriteset_313_fcc_purchase;
	spriteset_313_stn_purchase;
}

switch(FEAT_TRAINS, SELF, sw_314_purchase, current_year){
	1971 .. 1982: spriteset_313_brb_purchase;
	1983 .. 1995: spriteset_313_spc_purchase;
	1996 .. 2005: spriteset_313_spn_purchase;
	2006 .. 2010: spriteset_313_scr_purchase;
	spriteset_313_scr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_313_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_313_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_313_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_313_t_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_314_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_314_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_314_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_314_t_final_livery_choice_decider;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_313_brb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
 }

random_switch(FEAT_TRAINS, SELF, sw_313_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_313_slk_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_se_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_313_mr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_YELLOW, COLOUR_GREY);
}

random_switch(FEAT_TRAINS, SELF, sw_313_wgw_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_WHITE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_wgp_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_PURPLE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN)  ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_fge_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_one_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_BLUE, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_aga_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, company_colour2) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_tfl_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_ORANGE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_scr_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_313_spn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, COLOUR_BROWN) ;
}

random_switch(FEAT_TRAINS, PARENT, sw_313_wgn_colour_mapping){
	1: return sw_313_wgw_colour_mapping ;
	1: return sw_313_wgp_colour_mapping;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_313_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_nse_colour_mapping;
	1996 .. 2005: sw_313_slk_colour_mapping;
	2006 .. 2010: sw_313_fcc_colour_mapping;
	sw_313_stn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_314_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_spn_colour_mapping;
	1996 .. 2005: sw_313_spn_colour_mapping;
	2006 .. 2010: sw_313_scr_colour_mapping;
	sw_313_scr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_315_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_nse_colour_mapping;
	1996 .. 2000: sw_313_wgn_colour_mapping;
	2001 .. 2005: sw_313_one_colour_mapping;
	2006 .. 2010: sw_313_aga_colour_mapping;
	sw_313_tfl_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_508_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_313_brb_colour_mapping;
	1983 .. 1995: sw_313_mr_colour_mapping;
	1996 .. 2005: sw_313_mr_colour_mapping;
	sw_313_mr_colour_mapping;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_313_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_slk_colour_mapping;
	3: sw_313_wgn_colour_mapping;
	4: sw_313_fcc_colour_mapping;
	5: sw_313_stn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_314_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_spn_colour_mapping;
	2: sw_313_spn_colour_mapping;
	3: sw_313_scr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_315_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_nse_colour_mapping;
	2: sw_313_wgn_colour_mapping;
	3: sw_313_fge_colour_mapping;
	4: sw_313_one_colour_mapping;
	5: sw_313_aga_colour_mapping;
	6: sw_313_tfl_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_508_manual_colour_mapping_decider, cargo_subtype){
	0: sw_313_brb_colour_mapping;
	1: sw_313_mr_colour_mapping;
	2: sw_313_se_colour_mapping;
	3: sw_313_se_colour_mapping;
	4: sw_313_se_colour_mapping;
	5: sw_313_slk_colour_mapping;
	6: sw_313_mr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_313_colour_mapping_choice_decider, livery_choice){
	1 : sw_313_manual_colour_mapping_decider ; 
	sw_313_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_314_colour_mapping_choice_decider, livery_choice){
	1 : sw_314_manual_colour_mapping_decider ; 
	sw_314_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_315_colour_mapping_choice_decider, livery_choice){
	1 : sw_315_manual_colour_mapping_decider ; 
	sw_315_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, SELF, sw_508_colour_mapping_choice_decider, livery_choice){
	1 : sw_508_manual_colour_mapping_decider ; 
	sw_508_colour_mapping_year_decider ;
}


switch(FEAT_TRAINS, PARENT, sw_313_final_colour_mapping_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_313)))){
	-256..-1: sw_313_colour_mapping_choice_decider ; 
	0..256: sw_508_colour_mapping_choice_decider ;
}


switch(FEAT_TRAINS, PARENT, sw_314_final_colour_mapping_choice_decider, ((count_veh_id(item_Mk2))-(count_veh_id(item_314)))){
	-256..-1: sw_314_colour_mapping_choice_decider ; 
	0..256: sw_315_colour_mapping_choice_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_313_colour_mapping_decider, colour_scheme_1){
	1 : sw_313_final_colour_mapping_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, PARENT, sw_314_colour_mapping_decider, colour_scheme_1){
	1 : sw_314_final_colour_mapping_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_313, 313) {
	property {
		name: 							string(STR_NAME_313);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1978, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					45;
		running_cost_factor:			32;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							880 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					74;
		weight:							35 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.8;
		air_drag_coefficient:			0.2;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_313_coupling_restrictions;
		default: 							sw_313_default;
		purchase:							sw_313_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_313_refit_text_decider ;
		colour_mapping:						sw_313_colour_mapping_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_313_colour_mapping_choice_decider;
}
		livery_override (item_Mk2) {
		cargo_capacity: 85;
		default: sw_313_default_t;
		colour_mapping:	sw_313_colour_mapping_decider;
		cargo_subtype_text: sw_313_refit_text_decider ;
		weight: 30;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_313, 313){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_313, 313){
	property{
		name                           : string(STR_NAME_313_ALT) ;
	}
}
}


item (FEAT_TRAINS, item_314, 314) {
	property {
		name: 							string(STR_NAME_314);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1978, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					40;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						ELRL;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							880 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					74;
		weight:							35 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.8;
		air_drag_coefficient:			0.2;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_313_coupling_restrictions;
		default: 							sw_314_default;
		purchase:							sw_314_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_314_refit_text_decider ;
		colour_mapping:						sw_314_colour_mapping_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_314_colour_mapping_choice_decider;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
}
		livery_override (item_Mk2) {
		cargo_capacity: 85;
		default: sw_314_default_t;
		colour_mapping:	sw_314_colour_mapping_decider;
		cargo_subtype_text: sw_314_refit_text_decider ;
		weight: 30;
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_314, 314){
	property{
		name                           : string(STR_NAME_314_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
//#include "src/EMU/class_317.pnml"
# 1 "src/EMU/class_319.pnml" 1
//Front Cars
spriteset(spriteset_319_f_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_319_f_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_319_f_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 200)}
spriteset(spriteset_319_f_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_319_f_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_319_f_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_319_f_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 500)}
spriteset(spriteset_319_f_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 650)}
spriteset(spriteset_319_f_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 800)}
spriteset(spriteset_319_f_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 800)}
//Rear Cars
spriteset(spriteset_319_r_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 75)}
spriteset(spriteset_319_r_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 225)}
spriteset(spriteset_319_r_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 225)}
spriteset(spriteset_319_r_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 675)}
spriteset(spriteset_319_r_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 375)}
spriteset(spriteset_319_r_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 525)}
spriteset(spriteset_319_r_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_319_r_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 675)}
spriteset(spriteset_319_r_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 825)}
spriteset(spriteset_319_r_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 825)}
//Med Driving
spriteset(spriteset_319_o_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 100)}
spriteset(spriteset_319_o_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_319_o_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_319_o_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_319_o_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 400)}
spriteset(spriteset_319_o_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_319_o_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_319_o_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 700)}
spriteset(spriteset_319_o_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 850)}
spriteset(spriteset_319_o_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 850)}
//PMSO
spriteset(spriteset_319_m_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 25)}
spriteset(spriteset_319_m_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_319_m_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 175)}
spriteset(spriteset_319_m_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_319_m_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_319_m_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_319_m_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_319_m_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 625)}
spriteset(spriteset_319_m_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 775)}
spriteset(spriteset_319_m_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 775)}
//Trailer
spriteset(spriteset_319_t_ns1, "gfx/EMU/class_319.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_319_t_ns2, "gfx/EMU/class_319.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_319_t_tlb, "gfx/EMU/class_319.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_319_t_cnx, "gfx/EMU/class_319.png") {template_8_8_networker(0, 600)}
spriteset(spriteset_319_t_fcc, "gfx/EMU/class_319.png") {template_8_8_networker(0, 300)}
spriteset(spriteset_319_t_stn, "gfx/EMU/class_319.png") {template_8_8_networker(0, 450)}
spriteset(spriteset_319_t_gtr, "gfx/EMU/class_319.png") {template_8_8_networker(179, 450)}
spriteset(spriteset_319_t_lmi, "gfx/EMU/class_319.png") {template_8_8_networker(179, 600)}
spriteset(spriteset_319_t_nth, "gfx/EMU/class_319.png") {template_8_8_networker(0, 750)}
spriteset(spriteset_319_t_nra, "gfx/EMU/class_319.png") {template_8_8_networker(179, 750)}
//Purchase
spriteset(spriteset_319_purchase_ns1, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 125)}
spriteset(spriteset_319_purchase_ns2, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 275)}
spriteset(spriteset_319_purchase_tlb, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 275)}
spriteset(spriteset_319_purchase_cnx, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 725)}
spriteset(spriteset_319_purchase_fcc, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 425)}
spriteset(spriteset_319_purchase_stn, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 575)}
spriteset(spriteset_319_purchase_gtr, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 575)}
spriteset(spriteset_319_purchase_lmi, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 725)}
spriteset(spriteset_319_purchase_nth, "gfx/EMU/class_319.png") {template_dualhead_purchase(0, 875)}
spriteset(spriteset_319_purchase_nra, "gfx/EMU/class_319.png") {template_dualhead_purchase(179, 875)}

//Switches

//Power Car
switch(FEAT_TRAINS, SELF, sw_319_nsg_f, position_in_consist){
	0: spriteset_319_f_ns1; spriteset_319_o_ns1;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_select, position_in_consist_from_end){
	0: spriteset_319_r_ns1; sw_319_nsg_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsg_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nsw_f, position_in_consist){
	0: spriteset_319_f_ns2; spriteset_319_o_ns2;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_select, position_in_consist_from_end){
	0: spriteset_319_r_ns2; sw_319_nsw_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsw_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_tlb_f, position_in_consist){
	0: spriteset_319_f_tlb; spriteset_319_o_tlb;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_select, position_in_consist_from_end){
	0: spriteset_319_r_tlb; sw_319_tlb_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_tlb_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_cnx_f, position_in_consist){
	0: spriteset_319_f_cnx; spriteset_319_o_cnx;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_select, position_in_consist_from_end){
	0: spriteset_319_r_cnx; sw_319_cnx_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_cnx_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_fcc_f, position_in_consist){
	0: spriteset_319_f_fcc; spriteset_319_o_fcc;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_select, position_in_consist_from_end){
	0: spriteset_319_r_fcc; sw_319_fcc_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_fcc_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_stn_f, position_in_consist){
	0: spriteset_319_f_stn; spriteset_319_o_stn;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_select, position_in_consist_from_end){
	0: spriteset_319_r_stn; sw_319_stn_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_stn_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_gtr_f, position_in_consist){
	0: spriteset_319_f_gtr; spriteset_319_o_gtr;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_select, position_in_consist_from_end){
	0: spriteset_319_r_gtr; sw_319_gtr_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_gtr_select;}	
//
switch(FEAT_TRAINS, SELF, sw_319_lmi_f, position_in_consist){
	0: spriteset_319_f_lmi; spriteset_319_o_lmi;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_select, position_in_consist_from_end){
	0: spriteset_319_r_lmi; sw_319_lmi_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_lmi_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nth_f, position_in_consist){
	0: spriteset_319_f_nth; spriteset_319_o_nth;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_select, position_in_consist_from_end){
	0: spriteset_319_r_nth; sw_319_nth_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nth_select;}
//
switch(FEAT_TRAINS, SELF, sw_319_nra_f, position_in_consist){
	0: spriteset_319_f_nra; spriteset_319_o_nra;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_select, position_in_consist_from_end){
	0: spriteset_319_r_nra; sw_319_nra_f;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nra_select;}
	
//Trailer/Pan
switch(FEAT_TRAINS, SELF, sw_319_nsg_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_ns1; spriteset_319_t_ns1;
}
switch(FEAT_TRAINS, SELF, sw_319_nsg_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_ns1; spriteset_319_t_ns1;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_select_t, vehicle_is_reversed){
	0: sw_319_nsg_msb_f; 
	sw_319_nsg_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsg_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsg_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nsw_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_ns2; spriteset_319_t_ns2;
}
switch(FEAT_TRAINS, SELF, sw_319_nsw_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_ns2; spriteset_319_t_ns2;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_select_t, vehicle_is_reversed){
	0: sw_319_nsw_msb_f; 
	sw_319_nsw_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nsw_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nsw_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_tlb_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_tlb; spriteset_319_t_tlb;
}
switch(FEAT_TRAINS, SELF, sw_319_tlb_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_tlb; spriteset_319_t_tlb;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_select_t, vehicle_is_reversed){
	0: sw_319_tlb_msb_f; 
	sw_319_tlb_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_tlb_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_tlb_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_cnx_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_cnx; spriteset_319_t_cnx;
}
switch(FEAT_TRAINS, SELF, sw_319_cnx_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_cnx; spriteset_319_t_cnx;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_select_t, vehicle_is_reversed){
	0: sw_319_cnx_msb_f; 
	sw_319_cnx_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_cnx_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_cnx_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_fcc_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_fcc; spriteset_319_t_fcc;
}
switch(FEAT_TRAINS, SELF, sw_319_fcc_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_fcc; spriteset_319_t_fcc;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_select_t, vehicle_is_reversed){
	0: sw_319_fcc_msb_f; 
	sw_319_fcc_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_fcc_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_fcc_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_stn_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_stn; spriteset_319_t_stn;
}
switch(FEAT_TRAINS, SELF, sw_319_stn_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_stn; spriteset_319_t_stn;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_select_t, vehicle_is_reversed){
	0: sw_319_stn_msb_f; 
	sw_319_stn_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_stn_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_stn_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_gtr_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_gtr; spriteset_319_t_gtr;
}
switch(FEAT_TRAINS, SELF, sw_319_gtr_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_gtr; spriteset_319_t_gtr;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_select_t, vehicle_is_reversed){
	0: sw_319_gtr_msb_f; 
	sw_319_gtr_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_gtr_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_gtr_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_lmi_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_lmi; spriteset_319_t_lmi;
}
switch(FEAT_TRAINS, SELF, sw_319_lmi_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_lmi; spriteset_319_t_lmi;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_select_t, vehicle_is_reversed){
	0: sw_319_lmi_msb_f; 
	sw_319_lmi_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_lmi_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_lmi_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nth_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_nth; spriteset_319_t_nth;
}
switch(FEAT_TRAINS, SELF, sw_319_nth_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_nth; spriteset_319_t_nth;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_select_t, vehicle_is_reversed){
	0: sw_319_nth_msb_f; 
	sw_319_nth_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nth_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nth_select_t;}

switch(FEAT_TRAINS, SELF, sw_319_nra_msb_f, position_in_vehid_chain){
	0: spriteset_319_m_nra; spriteset_319_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_319_nra_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_319_m_nra; spriteset_319_t_nra;
}
switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_select_t, vehicle_is_reversed){
	0: sw_319_nra_msb_f; 
	sw_319_nra_msb_r;
}
random_switch(FEAT_TRAINS, SELF, sw_thameslink_classic_nra_t, TRIGGER_VEHICLE_SERVICE){1: sw_thameslink_classic_nra_select_t;}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_319_passenger_livery_decider, current_year){
	0 .. 1993: sw_thameslink_classic_nsg;
	1994 .. 1995: sw_thameslink_classic_nsw;
	1996 .. 1999: sw_thameslink_classic_tlb;
	2000..2002: sw_thameslink_classic_cnx;
	2003 .. 2014: sw_thameslink_classic_fcc;
	2015 .. 2017: sw_thameslink_classic_gtr;
	sw_thameslink_classic_nth;
}

switch(FEAT_TRAINS, SELF, sw_319_passenger_livery_decider_t, current_year){
	0 .. 1993: sw_thameslink_classic_nsg_t;
	1994 .. 1995: sw_thameslink_classic_nsw_t;
	1996 .. 1999: sw_thameslink_classic_tlb_t;
	2000..2002: sw_thameslink_classic_cnx_t;
	2003 .. 2014: sw_thameslink_classic_fcc_t;
	2015 .. 2017: sw_thameslink_classic_gtr_t;
	sw_thameslink_classic_nth_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_319_manual_livery_decider, cargo_subtype){
	0: sw_thameslink_classic_nsg;
	1: sw_thameslink_classic_nsw;
	2: sw_thameslink_classic_tlb;
	3: sw_thameslink_classic_cnx;
	4: sw_thameslink_classic_fcc;
	5: sw_thameslink_classic_stn;
	6: sw_thameslink_classic_gtr;
	7: sw_thameslink_classic_lmi;
	8: sw_thameslink_classic_nth;
	9: sw_thameslink_classic_nra;
}

switch(FEAT_TRAINS, SELF, sw_319_manual_livery_decider_t, cargo_subtype){
	0: sw_thameslink_classic_nsg_t;
	1: sw_thameslink_classic_nsw_t;
	2: sw_thameslink_classic_tlb_t;
	3: sw_thameslink_classic_cnx_t;
	4: sw_thameslink_classic_fcc_t;
	5: sw_thameslink_classic_stn_t;
	6: sw_thameslink_classic_gtr_t;
	7: sw_thameslink_classic_lmi_t;
	8: sw_thameslink_classic_nth_t;
	9: sw_thameslink_classic_nra_t;
}

switch(FEAT_TRAINS, SELF, sw_319_livery_choice_decider, livery_choice){
	1 : sw_319_manual_livery_decider ; 
	sw_319_passenger_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_319_livery_choice_decider_t, livery_choice){
	1 : sw_319_manual_livery_decider_t ; 
	sw_319_passenger_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_319_refit_text, cargo_subtype){
	0: string(STR_LIVERY_NSG);
	1: string(STR_LIVERY_NSW);
	2: string(STR_LIVERY_TLB);
	3: string(STR_LIVERY_CONNEX);
	4: string(STR_LIVERY_FCC);
	5: string(STR_LIVERY_SOUTHERN);
	6: string(STR_LIVERY_THAMESLINK);
	7: string(STR_LIVERY_LONDON_MIDLAND);
	8: string(STR_LIVERY_NORTHERN);
	9: string(STR_LIVERY_NORTHERN_ARRIVA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_319_refit_text_decider, livery_choice){
	1 : sw_319_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_319_purchase_1, current_year){
	0 .. 1993: spriteset_319_purchase_ns1;
	1994 .. 1995: spriteset_319_purchase_ns2;
	1996 .. 1999: spriteset_319_purchase_tlb;
	2000..2002: spriteset_319_purchase_cnx;
	2003 .. 2014: spriteset_319_purchase_fcc;
	2015 .. 2017: spriteset_319_purchase_gtr;
	spriteset_319_purchase_nth;
}

switch(FEAT_TRAINS, PARENT, sw_319_purchase, livery_choice){
	1 : sw_319_purchase_1 ;
	spriteset_319_purchase_ns1 ;
}

switch(FEAT_TRAINS, SELF, sw_319_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_319_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_319_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_319_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_319_nsg_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_319_nsw_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_tlb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_319_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_LIGHT_BLUE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_lmi_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_nth_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_PURPLE, COLOUR_MAUVE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_319_nra_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;
}
//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_319_colour_mapping_auto, current_year){
	0 .. 1993: sw_319_nsg_colour_mapping;
	1994 .. 1995: sw_319_nsw_colour_mapping;
	1996 .. 1999: sw_319_tlb_colour_mapping;
	2000..2002: sw_319_cnx_colour_mapping;
	2003 .. 2014: sw_319_fcc_colour_mapping;
	2015 .. 2017: sw_319_gtr_colour_mapping;
	sw_319_nth_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_319_colour_mapping_manual, cargo_subtype){
	0: sw_319_nsg_colour_mapping;
	1: sw_319_nsw_colour_mapping;
	2: sw_319_tlb_colour_mapping;
	3: sw_319_cnx_colour_mapping;
	4: sw_319_fcc_colour_mapping;
	5: sw_319_stn_colour_mapping;
	6: sw_319_gtr_colour_mapping;
	7: sw_319_lmi_colour_mapping;
	8: sw_319_nth_colour_mapping;
	9: sw_319_nra_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_319_colour_mapping_manual_check, livery_choice){
	1 : sw_319_colour_mapping_manual ;
	sw_319_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_319_colour_mapping_decider, colour_scheme_1){
	1 : sw_319_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_319_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	319: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_319_NO_COUPLE);
}

item (FEAT_TRAINS, item_319, 319) {
	property {
		name: 							string(STR_NAME_319);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1987, 1, 1);
		model_life:						40;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					32;
		cost_factor:					45;
		running_cost_factor:			31;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1438 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							30 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_319_coupling_restrictions;
		default: 							sw_319_default;
		purchase:							sw_319_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_319_refit_text_decider ;
		colour_mapping:						sw_319_colour_mapping_decider;
		purchase_colour_mapping: 			sw_319_colour_mapping_decider;
		running_cost_factor: return(current_speed == 0 ? 8 : 31) ;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9030) {
		cargo_capacity: 85;
		default: sw_319_default_t;
		colour_mapping:	sw_319_colour_mapping_decider;
		cargo_subtype_text: sw_319_refit_text_decider ;
}
}

if (vehicle_selection < 3){
item (FEAT_TRAINS, item_319, 319){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_319, 319){
	property{
		name                           : string(STR_NAME_319_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_325.pnml" 1
spriteset(spriteset_x65_nse_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 0)}

spriteset(spriteset_x65_nse_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 25)}

spriteset(spriteset_x65_nse_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 150)}

spriteset(spriteset_x65_nse_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 175)}

spriteset(spriteset_x65_nse_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 200)}

spriteset(spriteset_x65_cnx_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 225)}

spriteset(spriteset_x65_cnx_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 250)}

spriteset(spriteset_x65_cnx_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 375)}

spriteset(spriteset_x65_cnx_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 400)}

spriteset(spriteset_x65_cnx_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 425)}

spriteset(spriteset_x65_seb_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 225)}

spriteset(spriteset_x65_seb_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 250)}

spriteset(spriteset_x65_seb_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 375)}

spriteset(spriteset_x65_seb_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 400)}

spriteset(spriteset_x65_seb_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 425)}

spriteset(spriteset_x65_sey_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_x65_sey_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 475)}

spriteset(spriteset_x65_sey_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 600)}

spriteset(spriteset_x65_sey_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 625)}

spriteset(spriteset_x65_sey_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(0, 650)}

spriteset(spriteset_325_t, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 450)}

spriteset(spriteset_325_p, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 475)}

spriteset(spriteset_325_f, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 600)}

spriteset(spriteset_325_r, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 625)}

spriteset(spriteset_325_o, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker(179, 650)}

//Reverse Pans

spriteset(spriteset_x65_nse_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 25)}

spriteset(spriteset_x65_cnx_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 250)}

spriteset(spriteset_x65_seb_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(179, 250)}

spriteset(spriteset_x65_sey_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(0, 475)}

spriteset(spriteset_325_pr, "gfx/UNUSED & MIXED/networkers.png") {template_8_8_networker_reverse(179, 475)}

//Purchase Sprites
spriteset(spriteset_325_nse_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 500)}

spriteset(spriteset_325_cnx_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 525)}

spriteset(spriteset_325_seb_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 550)}

spriteset(spriteset_325_sey_purchase, "gfx/UNUSED & MIXED/networkers.png") {template_dualhead_purchase(179, 575)}

//Switches

//trailer vfx

switch(FEAT_TRAINS, SELF, sw_325_t_vfx_f, position_in_vehid_chain){
	0: vfx_ohle_only; 
	return 0;
}
 
switch(FEAT_TRAINS, SELF, sw_325_t_vfx_r, position_in_vehid_chain_from_end){
	0: vfx_ohle_only; 
	return 0;
}

switch(FEAT_TRAINS, SELF, sw_325_t_vfx, vehicle_is_reversed){
	0: sw_325_t_vfx_f;
	1: sw_325_t_vfx_r;
} 
 
//Coupling

switch(FEAT_TRAINS, SELF, sw_325_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_325: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_325_NO_COUPLE);
}

//Power Car
 switch(FEAT_TRAINS, SELF, sw_325_nse_f, position_in_consist){
	0: spriteset_x65_nse_f; 
	spriteset_x65_nse_o;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_nse, position_in_consist_from_end){
	0: spriteset_x65_nse_r; 
	sw_325_nse_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_cnx_f, position_in_consist){
	0: spriteset_x65_cnx_f; 
	spriteset_x65_cnx_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx, position_in_consist_from_end){
	0: spriteset_x65_cnx_r; 
	sw_325_cnx_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_seb_f, position_in_consist){
	0: spriteset_x65_seb_f; 
	spriteset_x65_seb_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_seb, position_in_consist_from_end){
	0: spriteset_x65_seb_r; 
	sw_325_seb_f;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_sey_f, position_in_consist){
	0: spriteset_x65_sey_f; 
	spriteset_x65_sey_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325_sey, position_in_consist_from_end){
	0: spriteset_x65_sey_r; 
	sw_325_sey_f;
 }


//Trailer/Pan

switch(FEAT_TRAINS, SELF, sw_325_nse_t, position_in_vehid_chain){
	0: spriteset_x65_nse_p; 
	spriteset_x65_nse_t;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx_t, position_in_vehid_chain){
	0: spriteset_x65_cnx_p; 
	spriteset_x65_cnx_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_seb_t, position_in_vehid_chain){
	0: spriteset_x65_seb_p; 
	spriteset_x65_seb_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_sey_t, position_in_vehid_chain){
	0: spriteset_x65_sey_p; 
	spriteset_x65_sey_t;
 }
 
//Trailer/Pan reverse 
 
switch(FEAT_TRAINS, SELF, sw_325_nse_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_nse_pr; 
	spriteset_x65_nse_t;
 }

 switch(FEAT_TRAINS, SELF, sw_325_cnx_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_cnx_pr; 
	spriteset_x65_cnx_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_seb_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_seb_pr; 
	spriteset_x65_seb_t;
 }
 
switch(FEAT_TRAINS, SELF, sw_325_sey_t_re, position_in_vehid_chain_from_end){
	0: spriteset_x65_sey_pr; 
	spriteset_x65_sey_t;
 } 
 
//Mail

switch(FEAT_TRAINS, SELF, sw_325_t_f, position_in_vehid_chain){
	0: spriteset_325_p; 
	spriteset_325_t;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_t_re, position_in_vehid_chain){
	0: spriteset_325_pr; 
	spriteset_325_t;
 }
 
 switch(FEAT_TRAINS, SELF, sw_325_t, vehicle_is_reversed){
	0: sw_325_t_f;
	1: sw_325_t_re;
}
 
 switch(FEAT_TRAINS, SELF, sw_325_f, position_in_consist){
	0: spriteset_325_f; 
	spriteset_325_o;
 }

 switch(FEAT_TRAINS, SELF, sw_325, position_in_consist_from_end){
	0: spriteset_325_r; 
	sw_325_f;
 } 
 
//NSE or CNX random_switch

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse){ 
	8 : sw_325_cnx;
	1 : sw_325_nse;
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse_t){ 
	dependent : sw_325_cnx_nse;
	8 : sw_325_cnx_t;
	1 : sw_325_nse_t;
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_nse_t_re){ 
	dependent : sw_325_cnx_nse;
	8 : sw_325_cnx_t_re;
	1 : sw_325_nse_t_re;
}
 
//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_325_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325 ;
 }
 
//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_325_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb_t ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_t_f_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_t ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_nse_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_nse_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_cnx_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_cnx_nse_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_sey_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_sey_t_re ;
 }
 
 random_switch(FEAT_TRAINS, SELF, sw_325_seb_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_seb_t_re ;
 }
 
  random_switch(FEAT_TRAINS, SELF, sw_325_mail_t_re_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_325_t_re ;
 }
 
//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider, current_year){
	1983 .. 1995: sw_325_nse_select;
	1996 .. 2005: sw_325_cnx_select;
	2006 .. 2012: sw_325_sey_select;
	sw_325_seb_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t_f, current_year){
	1983 .. 1995: sw_325_nse_t_select;
	1996 .. 2005: sw_325_cnx_t_select;
	2006 .. 2012: sw_325_sey_t_select;
	sw_325_seb_t_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t_re, current_year){
	1983 .. 1995: sw_325_nse_t_re_select;
	1996 .. 2005: sw_325_cnx_t_re_select;
	2006 .. 2012: sw_325_sey_t_re_select;
	sw_325_seb_t_re_select;
}

switch(FEAT_TRAINS, SELF, sw_325_passenger_livery_decider_t, vehicle_is_reversed){
	0: sw_325_passenger_livery_decider_t_f;
	1: sw_325_passenger_livery_decider_t_re;
}

switch(FEAT_TRAINS, SELF, sw_325_t_select, vehicle_is_reversed){
	0: sw_325_mail_t_f_select;
	1: sw_325_mail_t_re_select;
}
 
 switch(FEAT_TRAINS, SELF, sw_325_livery_decider, cargo_classes){
	CC_PASSENGERS: sw_325_passenger_livery_decider;
	CC_MAIL: sw_325_passenger_livery_decider;
	sw_325_mail_select;
}

 switch(FEAT_TRAINS, PARENT, sw_325_livery_decider_t, cargo_classes){
	CC_PASSENGERS: sw_325_passenger_livery_decider_t;
	CC_MAIL: sw_325_passenger_livery_decider_t;
	sw_325_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider, cargo_subtype){
	0: sw_325_nse_select;
	1: sw_325_cnx_select;
	2: sw_325_sey_select;
	3: sw_325_seb_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider;
	CC_MAIL: sw_325_manual_livery_decider;
	sw_325_mail_select;
}

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t, cargo_subtype){
	0: sw_325_nse_t_select;
	1: sw_325_cnx_t_select;
	2: sw_325_sey_t_select;
	3: sw_325_seb_t_select;
}

switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_re, cargo_subtype){
	0: sw_325_nse_t_re_select;
	1: sw_325_cnx_t_re_select;
	2: sw_325_sey_t_re_select;
	3: sw_325_seb_t_re_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider_t;
	CC_MAIL: sw_325_manual_livery_decider_t;
	sw_325_mail_t_f_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_re_b, cargo_classes){
	CC_PASSENGERS: sw_325_manual_livery_decider_t_re;
	CC_MAIL: sw_325_manual_livery_decider_t_re;
	sw_325_mail_t_re_select;
}

 switch(FEAT_TRAINS, SELF, sw_325_manual_livery_decider_t_c, vehicle_is_reversed){
	0: sw_325_manual_livery_decider_t_b;
	1: sw_325_manual_livery_decider_t_re_b;
}

switch(FEAT_TRAINS, SELF, sw_325_livery_choice_decider, livery_choice){
	1 : sw_325_manual_livery_decider_b ; 
	sw_325_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_325_livery_choice_decider_t, livery_choice){
	1 : sw_325_manual_livery_decider_t_c ; 
	sw_325_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_325_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_SE_YELLOW);
	3: return string(STR_LIVERY_SE_BLUE);
	return CB_RESULT_NO_TEXT ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_325_refit_text_b, cargo_classes){
	CC_PASSENGERS: sw_325_refit_text;
	CC_MAIL: sw_325_refit_text;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_325_refit_text_decider, livery_choice){
	1 : sw_325_refit_text_b ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_325_purchase, current_year){
	1983 .. 1995: spriteset_325_nse_purchase;
	1996 .. 2005: spriteset_325_cnx_purchase;
	2006 .. 2012: spriteset_325_sey_purchase;
	spriteset_325_seb_purchase;
}

switch(FEAT_TRAINS, SELF, sw_325_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_325_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_325_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_325_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_325_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_325_cnx_a_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_325_south_eastern_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_325_mail_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, PARENT, sw_325_cnx_colour_mapping){ 
	dependent : sw_325_cnx_nse;
	5 : sw_325_cnx_a_colour_mapping;
	2 : sw_325_nse_colour_mapping;
}

//Recolour Switches

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_auto_pass, current_year){
	1983 .. 1995 : sw_325_nse_colour_mapping ;
	1996 .. 2005 : sw_325_cnx_colour_mapping ;
	sw_325_south_eastern_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_auto, cargo_classes){
	CC_PASSENGERS: sw_325_colour_mapping_auto_pass;
	CC_MAIL: sw_325_colour_mapping_auto_pass;
	sw_325_mail_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual_pass, cargo_subtype){
	0 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
	2..3 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual, cargo_classes){
	CC_PASSENGERS: sw_325_colour_mapping_manual_pass;
	CC_MAIL: sw_325_colour_mapping_manual_pass;
	sw_325_mail_colour_mapping ;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_manual_check, livery_choice){
	1 : sw_325_colour_mapping_manual ;
	sw_325_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_325_colour_mapping_decider, colour_scheme_1){
	1 : sw_325_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_325, 325) {
	property {
		name: 							string(STR_NAME_325);
		climates_available: 			NO_CLIMATE;
		introduction_date:				date(1990, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS, CC_MAIL, CC_ARMOURED);
		cargo_allow_refit:				[PASS, TOUR, MAIL, VALU, GOLD, DIAM];
		loading_speed:					35;
		cost_factor:					55;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					105;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.4;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_325_coupling_restrictions;
		default: 							sw_325_default;
		purchase:							sw_325_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_325_refit_text_decider ;
		colour_mapping:						sw_325_colour_mapping_decider ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 11 : 45) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 110;
		default: sw_325_default_t;
		colour_mapping:	sw_325_colour_mapping_decider;
		create_effect: sw_325_t_vfx;
		cargo_subtype_text: sw_325_refit_text_decider ;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_325, 325){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_325, 325){
	property{
		name                           : string(STR_NAME_325_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
//#include "src/EMU/class_334.pnml"
# 1 "src/EMU/class_411.pnml" 1
//Front Cars
spriteset(spriteset_421_f_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 25)}
spriteset(spriteset_421_f_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 100)}
spriteset(spriteset_421_f_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 175)}
spriteset(spriteset_421_f_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 250)}
spriteset(spriteset_421_f_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 325)}
spriteset(spriteset_421_f_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 400)}
spriteset(spriteset_421_f_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 400)}
//Rear Cars
spriteset(spriteset_421_r_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 50)}
spriteset(spriteset_421_r_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 125)}
spriteset(spriteset_421_r_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 200)}
spriteset(spriteset_421_r_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 275)}
spriteset(spriteset_421_r_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 350)}
spriteset(spriteset_421_r_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 425)}
spriteset(spriteset_421_r_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 425)}
//Med Driving
spriteset(spriteset_421_o_brg, "gfx/EMU/class_309.png") {template_8_8_networker(537, 0)}
spriteset(spriteset_421_o_brb, "gfx/EMU/class_309.png") {template_8_8_networker(537, 75)}
spriteset(spriteset_421_o_nse, "gfx/EMU/class_309.png") {template_8_8_networker(537, 150)}
spriteset(spriteset_421_o_swt, "gfx/EMU/class_309.png") {template_8_8_networker(537, 225)}
spriteset(spriteset_421_o_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(537, 300)}
spriteset(spriteset_421_o_stn, "gfx/EMU/class_309.png") {template_8_8_networker(537, 375)}
spriteset(spriteset_421_o_htg, "gfx/EMU/class_309.png") {template_8_8_networker(179, 375)}
//MSB
spriteset(spriteset_421_m_brg, "gfx/EMU/class_309.png") {template_8_8_networker(358, 25)}
spriteset(spriteset_421_m_brb, "gfx/EMU/class_309.png") {template_8_8_networker(358, 100)}
spriteset(spriteset_421_m_nse, "gfx/EMU/class_309.png") {template_8_8_networker(358, 175)}
spriteset(spriteset_421_m_swt, "gfx/EMU/class_309.png") {template_8_8_networker(358, 250)}
spriteset(spriteset_421_m_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(358, 325)}
spriteset(spriteset_421_m_stn, "gfx/EMU/class_309.png") {template_8_8_networker(358, 400)}
spriteset(spriteset_421_m_htg, "gfx/EMU/class_309.png") {template_8_8_networker(0, 400)}
//MSB Reverse
spriteset(spriteset_421_mr_brg, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 25)}
spriteset(spriteset_421_mr_brb, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 100)}
spriteset(spriteset_421_mr_nse, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 175)}
spriteset(spriteset_421_mr_swt, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 250)}
spriteset(spriteset_421_mr_cnx, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 325)}
spriteset(spriteset_421_mr_stn, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(358, 400)}
spriteset(spriteset_421_mr_htg, "gfx/EMU/class_309.png") {template_8_8_networker_reverse(0, 400)}
//Trailer
spriteset(spriteset_421_t_brg, "gfx/EMU/class_309.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_421_t_brb, "gfx/EMU/class_309.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_421_t_nse, "gfx/EMU/class_309.png") {template_8_8_networker(358, 150)}
spriteset(spriteset_421_t_swt, "gfx/EMU/class_309.png") {template_8_8_networker(358, 225)}
spriteset(spriteset_421_t_cnx, "gfx/EMU/class_309.png") {template_8_8_networker(358, 300)}
spriteset(spriteset_421_t_stn, "gfx/EMU/class_309.png") {template_8_8_networker(358, 375)}
spriteset(spriteset_421_t_htg, "gfx/EMU/class_309.png") {template_8_8_networker(0, 375)}
//Purchase
spriteset(spriteset_421_purchase_brg, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 50)}
spriteset(spriteset_421_purchase_brb, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 125)}
spriteset(spriteset_421_purchase_nse, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 200)}
spriteset(spriteset_421_purchase_swt, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 275)}
spriteset(spriteset_421_purchase_cnx, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 350)}
spriteset(spriteset_421_purchase_stn, "gfx/EMU/class_309.png") {template_dualhead_purchase(358, 425)}
spriteset(spriteset_421_purchase_htg, "gfx/EMU/class_309.png") {template_dualhead_purchase(0, 425)}

//Switches

//Power Car
switch(FEAT_TRAINS, SELF, sw_411_green_f, position_in_consist){
	0: spriteset_421_f_brg; spriteset_421_o_brg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_green_select, position_in_consist_from_end){
	0: spriteset_421_r_brg; sw_411_green_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_green, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_green_select;}

switch(FEAT_TRAINS, SELF, sw_421_blue_grey_f, position_in_consist){
	0: spriteset_421_f_brb; spriteset_421_o_brb;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_select, position_in_consist_from_end){
	0: spriteset_421_r_brb; sw_421_blue_grey_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_blue_grey_select;}

switch(FEAT_TRAINS, SELF, sw_421_nse_f, position_in_consist){
	0: spriteset_421_f_nse; spriteset_421_o_nse;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_select, position_in_consist_from_end){
	0: spriteset_421_r_nse; sw_421_nse_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_nse, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_nse_select;}

switch(FEAT_TRAINS, SELF, sw_421_swt_f, position_in_consist){
	0: spriteset_421_f_swt; spriteset_421_o_swt;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_select, position_in_consist_from_end){
	0: spriteset_421_r_swt; sw_421_swt_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_swt, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_swt_select;}

switch(FEAT_TRAINS, SELF, sw_421_cnx_f, position_in_consist){
	0: spriteset_421_f_cnx; spriteset_421_o_cnx;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_select, position_in_consist_from_end){
	0: spriteset_421_r_cnx; sw_421_cnx_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_cnx_select;}

switch(FEAT_TRAINS, SELF, sw_421_stn_f, position_in_consist){
	0: spriteset_421_f_stn; spriteset_421_o_stn;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_select, position_in_consist_from_end){
	0: spriteset_421_r_stn; sw_421_stn_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_stn, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_stn_select;}

switch(FEAT_TRAINS, SELF, sw_421_heritage_f, position_in_consist){
	0: spriteset_421_f_htg; spriteset_421_o_htg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage_select, position_in_consist_from_end){
	0: spriteset_421_r_htg; sw_421_heritage_f;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_heritage_select;}

	
//Trailer/Pan
switch(FEAT_TRAINS, SELF, sw_421_green_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_brg; spriteset_421_t_brg;
}switch(FEAT_TRAINS, SELF, sw_421_green_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_brg; spriteset_421_t_brg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_green_select_t, vehicle_is_reversed){
	0: sw_421_green_msb_f; 
	sw_421_green_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_green_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_green_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_blue_grey_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_brb; spriteset_421_t_brb;
}switch(FEAT_TRAINS, SELF, sw_421_blue_grey_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_brb; spriteset_421_t_brb;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_select_t, vehicle_is_reversed){
	0: sw_421_blue_grey_msb_f; 
	sw_421_blue_grey_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_blue_grey_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_blue_grey_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_nse_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_nse; spriteset_421_t_nse;
}switch(FEAT_TRAINS, SELF, sw_421_nse_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_nse; spriteset_421_t_nse;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_select_t, vehicle_is_reversed){
	0: sw_421_nse_msb_f; 
	sw_421_nse_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_nse_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_nse_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_swt_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_swt; spriteset_421_t_swt;
}switch(FEAT_TRAINS, SELF, sw_421_swt_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_swt; spriteset_421_t_swt;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_select_t, vehicle_is_reversed){
	0: sw_421_swt_msb_f; 
	sw_421_swt_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_swt_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_swt_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_cnx_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_cnx; spriteset_421_t_cnx;
}switch(FEAT_TRAINS, SELF, sw_421_cnx_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_cnx; spriteset_421_t_cnx;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_select_t, vehicle_is_reversed){
	0: sw_421_cnx_msb_f; 
	sw_421_cnx_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_cnx_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_cnx_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_stn_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_stn; spriteset_421_t_stn;
}switch(FEAT_TRAINS, SELF, sw_421_stn_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_stn; spriteset_421_t_stn;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_select_t, vehicle_is_reversed){
	0: sw_421_stn_msb_f; 
	sw_421_stn_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_stn_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_stn_select_t;}

switch(FEAT_TRAINS, SELF, sw_421_htg_msb_f, position_in_vehid_chain){
	0: spriteset_421_m_htg; spriteset_421_t_htg;
}switch(FEAT_TRAINS, SELF, sw_421_htg_msb_r, position_in_vehid_chain_from_end){
	0: spriteset_421_mr_htg; spriteset_421_t_htg;
}switch(FEAT_TRAINS, SELF, sw_southern_slam_htg_select_t, vehicle_is_reversed){
	0: sw_421_htg_msb_f; 
	sw_421_htg_msb_r;
}random_switch(FEAT_TRAINS, SELF, sw_southern_slam_heritage_t, TRIGGER_VEHICLE_SERVICE){1: sw_southern_slam_htg_select_t;}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_411_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_slam_green;
	1964 .. 1982: sw_southern_slam_blue_grey;
	1983 .. 1995: sw_southern_slam_nse;
	1996 .. 2004: sw_southern_slam_swt;
	2005 .. 2008: sw_southern_slam_cnx;
	sw_southern_slam_heritage;
}

switch(FEAT_TRAINS, SELF, sw_411_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_slam_green_t;
	1964 .. 1982: sw_southern_slam_blue_grey_t;
	1983 .. 1995: sw_southern_slam_nse_t;
	1996 .. 2004: sw_southern_slam_swt_t;
	2005 .. 2008: sw_southern_slam_cnx_t;
	sw_southern_slam_heritage_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_411_manual_livery_decider, cargo_subtype){
	0: sw_southern_slam_green;
	1: sw_southern_slam_blue_grey;
	2: sw_southern_slam_nse;
	3: sw_southern_slam_swt;
	4: sw_southern_slam_cnx;
	5: sw_southern_slam_stn;
	6: sw_southern_slam_heritage;
}

switch(FEAT_TRAINS, SELF, sw_411_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_slam_green_t;
	1: sw_southern_slam_blue_grey_t;
	2: sw_southern_slam_nse_t;
	3: sw_southern_slam_swt_t;
	4: sw_southern_slam_cnx_t;
	5: sw_southern_slam_stn_t;
	6: sw_southern_slam_heritage_t;
}

switch(FEAT_TRAINS, SELF, sw_411_livery_choice_decider, livery_choice){
	1 : sw_411_manual_livery_decider ; 
	sw_411_passenger_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_411_livery_choice_decider_t, livery_choice){
	1 : sw_411_manual_livery_decider_t ; 
	sw_411_passenger_livery_decider_t ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_411_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_NSE);
	3: string(STR_LIVERY_SWT);
	4: string(STR_LIVERY_CONNEX);
	5: string(STR_LIVERY_SOUTHERN);
	6: string(STR_LIVERY_SWT_HERITAGE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_411_refit_text_decider, livery_choice){
	1 : sw_411_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_411_purchase, current_year){
	0 .. 1963: spriteset_421_purchase_brg;
	1964 .. 1982: spriteset_421_purchase_brb;
	1983 .. 1995: spriteset_421_purchase_nse;
	1996 .. 2004: spriteset_421_purchase_swt;
	2005 .. 2008: spriteset_421_purchase_cnx;
	spriteset_421_purchase_htg;
}

switch(FEAT_TRAINS, SELF, sw_411_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_411_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_411_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_411_livery_choice_decider_t;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_411_green_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_411_blue_grey_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}
 
random_switch(FEAT_TRAINS, SELF, sw_411_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_heritage_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_411_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_411_colour_mapping_auto, current_year){
	0 .. 1963: sw_411_green_colour_mapping;
	1964 .. 1982: sw_411_blue_grey_colour_mapping;
	1983 .. 1995: sw_411_nse_colour_mapping;
	1996 .. 2004: sw_411_swt_colour_mapping;
	2005 .. 2008: sw_411_cnx_colour_mapping;
	sw_411_heritage_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_411_colour_mapping_manual, cargo_subtype){
	0: sw_411_green_colour_mapping;
	1: sw_411_blue_grey_colour_mapping;
	2: sw_411_nse_colour_mapping;
	3: sw_411_swt_colour_mapping;
	4: sw_411_cnx_colour_mapping;
	5: sw_411_stn_colour_mapping;
	6: sw_411_heritage_colour_mapping;
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, PARENT, sw_411_colour_mapping_manual_check, livery_choice){
	1 : sw_411_colour_mapping_manual ;
	sw_411_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_411_colour_mapping_decider, colour_scheme_1){
	1 : sw_411_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_411_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	411: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_411_NO_COUPLE);
}

item (FEAT_TRAINS, item_411, 411) {
	property {
		name: 							string(STR_NAME_411);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1956, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					27;
		cost_factor:					40;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							90 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					90;
		weight:							30 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_411_coupling_restrictions;
		default: 							sw_411_default;
		purchase:							sw_411_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_411_refit_text_decider ;
		colour_mapping:						sw_411_colour_mapping_decider;
		purchase_colour_mapping: 			sw_411_colour_mapping_decider;
		running_cost_factor:				return(current_speed == 0 ? 5 : 25) ;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 90;
		default: sw_411_default_t;
		colour_mapping:	sw_411_colour_mapping_decider;
		cargo_subtype_text: sw_411_refit_text_decider ;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_411, 411){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}



if (alt_names == 1){
item (FEAT_TRAINS, item_411, 411){
	property{
		name                           : string(STR_NAME_411_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_415.pnml" 1
//415 SR (415/1) DMBSO
spriteset(spriteset_415_1_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 0)}
spriteset(spriteset_415_1_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(358, 75)}
spriteset(spriteset_415_1_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 150)}
spriteset(spriteset_415_1_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(358, 225)}

//415 SR (415/1) TS
spriteset(spriteset_415_1_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(358, 25)}
spriteset(spriteset_415_1_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(358, 100)}
spriteset(spriteset_415_1_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(358, 175)}
spriteset(spriteset_415_1_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(358, 250)}

//415 SR (415/1) DTS
spriteset(spriteset_415_1_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 50)}
spriteset(spriteset_415_1_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(358, 125)}
spriteset(spriteset_415_1_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(358, 200)}
spriteset(spriteset_415_1_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(358, 275)}

//415 BR (415/2) DMBSO
spriteset(spriteset_415_2_m_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_415_2_m_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_415_2_m_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 150)}
spriteset(spriteset_415_2_m_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 225)}

//415 BR (415/2) TS
spriteset(spriteset_415_2_t_brg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 50)}
spriteset(spriteset_415_2_t_brb, "gfx/EMU/class_415.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_415_2_t_bbg, "gfx/EMU/class_415.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_415_2_t_nse, "gfx/EMU/class_415.png") {template_8_4_networker(0, 275)}

//415 BR (415/2) DTCL
spriteset(spriteset_415_2_dt_brg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_415_2_dt_brb, "gfx/EMU/class_415.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_415_2_dt_bbg, "gfx/EMU/class_415.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_415_2_dt_nse, "gfx/EMU/class_415.png") {template_8_8_networker(0, 250)}

//Headcodes etc
spriteset(spriteset_415_headcode_f, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_415_headcode_r, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_415_guards_end_triangle, "gfx/FIXTURES/class_205_headcodes.png") {template_8_8_networker(0, 100)}

//purchase
spriteset(spriteset_415_brg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(0, 300)}
spriteset(spriteset_415_brb_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 300)}
spriteset(spriteset_415_bbg_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(0, 312)}
spriteset(spriteset_415_nse_purchase, "gfx/EMU/class_415.png") {template_dualhead_purchase(90, 312)}



//br green
switch(FEAT_TRAINS, SELF, sw_416_brg_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_brg; spriteset_415_1_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_416_brg_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_brg; spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_416_brg, vehicle_is_reversed){0: sw_416_brg_f; sw_416_brg_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_brg_select_2, count_veh_id(9010)){0: sw_416_brg; spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brg_select_1, position_in_articulated_veh){0..1: sw_416_brg; 3: spriteset_415_1_m_brg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brg_select, num_vehs_in_vehid_chain){3: sw_sr_epb_brg_select_1; sw_sr_epb_brg_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_brg_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_brg; spriteset_415_2_dt_brg;}
switch(FEAT_TRAINS, SELF, sw_414_brg_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_brg; spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, PARENT, sw_414_brg, vehicle_is_reversed){0: sw_414_brg_f; sw_414_brg_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_brg_select_2, count_veh_id(9010)){0: sw_414_brg; spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brg_select_1, position_in_articulated_veh){0..1: sw_414_brg; 3: spriteset_415_2_m_brg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brg_select, num_vehs_in_vehid_chain){3: sw_br_epb_brg_select_1; sw_br_epb_brg_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brg){26: sw_sr_epb_brg_select; 7: sw_br_epb_brg_select;}

//br blue
switch(FEAT_TRAINS, SELF, sw_416_brb_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_brb; spriteset_415_1_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_416_brb_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_brb; spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_416_brb, vehicle_is_reversed){0: sw_416_brb_f; sw_416_brb_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_brb_select_2, count_veh_id(9010)){0: sw_416_brb; spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brb_select_1, position_in_articulated_veh){0..1: sw_416_brb; 3: spriteset_415_1_m_brb;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_brb_select, num_vehs_in_vehid_chain){3: sw_sr_epb_brb_select_1; sw_sr_epb_brb_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_brb_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_brb; spriteset_415_2_dt_brb;}
switch(FEAT_TRAINS, SELF, sw_414_brb_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_brb; spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, PARENT, sw_414_brb, vehicle_is_reversed){0: sw_414_brb_f; sw_414_brb_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_brb_select_2, count_veh_id(9010)){0: sw_414_brb; spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brb_select_1, position_in_articulated_veh){0..1: sw_414_brb; 3: spriteset_415_2_m_brb;}
switch(FEAT_TRAINS, SELF, sw_br_epb_brb_select, num_vehs_in_vehid_chain){3: sw_br_epb_brb_select_1; sw_br_epb_brb_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brb){26: sw_sr_epb_brb_select; 7: sw_br_epb_brb_select;}

//br bluegrey
switch(FEAT_TRAINS, SELF, sw_416_bbg_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_bbg; spriteset_415_1_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_416_bbg_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_bbg; spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_416_bbg, vehicle_is_reversed){0: sw_416_bbg_f; sw_416_bbg_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_bbg_select_2, count_veh_id(9010)){0: sw_416_bbg; spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_bbg_select_1, position_in_articulated_veh){0..1: sw_416_bbg; 3: spriteset_415_1_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_bbg_select, num_vehs_in_vehid_chain){3: sw_sr_epb_bbg_select_1; sw_sr_epb_bbg_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_bbg_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_bbg; spriteset_415_2_dt_bbg;}
switch(FEAT_TRAINS, SELF, sw_414_bbg_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_bbg; spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, PARENT, sw_414_bbg, vehicle_is_reversed){0: sw_414_bbg_f; sw_414_bbg_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_bbg_select_2, count_veh_id(9010)){0: sw_414_bbg; spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_bbg_select_1, position_in_articulated_veh){0..1: sw_414_bbg; 3: spriteset_415_2_m_bbg;}
switch(FEAT_TRAINS, SELF, sw_br_epb_bbg_select, num_vehs_in_vehid_chain){3: sw_br_epb_bbg_select_1; sw_br_epb_bbg_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_bbg){26: sw_sr_epb_bbg_select; 7: sw_br_epb_bbg_select;}

//nse
switch(FEAT_TRAINS, SELF, sw_416_nse_f, (count_veh_id(415)+1)%2){1: spriteset_415_1_m_nse; spriteset_415_1_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_416_nse_r, (count_veh_id(415)+1)%2){1: spriteset_415_1_dt_nse; spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_416_nse, vehicle_is_reversed){0: sw_416_nse_f; sw_416_nse_r;}

switch(FEAT_TRAINS, PARENT, sw_sr_epb_nse_select_2, count_veh_id(9010)){0: sw_416_nse; spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_nse_select_1, position_in_articulated_veh){0..1: sw_416_nse; 3: spriteset_415_1_m_nse;}
switch(FEAT_TRAINS, SELF, sw_sr_epb_nse_select, num_vehs_in_vehid_chain){3: sw_sr_epb_nse_select_1; sw_sr_epb_nse_select_2;}

switch(FEAT_TRAINS, SELF, sw_414_nse_f, (count_veh_id(415)+1)%2){1: spriteset_415_2_m_nse; spriteset_415_2_dt_nse;}
switch(FEAT_TRAINS, SELF, sw_414_nse_r, (count_veh_id(415)+1)%2){1: spriteset_415_2_dt_nse; spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, PARENT, sw_414_nse, vehicle_is_reversed){0: sw_414_nse_f; sw_414_nse_r;}

switch(FEAT_TRAINS, PARENT, sw_br_epb_nse_select_2, count_veh_id(9010)){0: sw_414_nse; spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, SELF, sw_br_epb_nse_select_1, position_in_articulated_veh){0..1: sw_414_nse; 3: spriteset_415_2_m_nse;}
switch(FEAT_TRAINS, SELF, sw_br_epb_nse_select, num_vehs_in_vehid_chain){3: sw_br_epb_nse_select_1; sw_br_epb_nse_select_2;}
	
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_nse){26: sw_sr_epb_nse_select; 7: sw_br_epb_nse_select;}

random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brg_t){dependent: sw_southern_compartment_brg; 26: spriteset_415_1_t_brg; 7: spriteset_415_2_t_brg;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_brb_t){dependent: sw_southern_compartment_brb; 26: spriteset_415_1_t_brb; 7: spriteset_415_2_t_brb;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_bbg_t){dependent: sw_southern_compartment_bbg; 26: spriteset_415_1_t_bbg; 7: spriteset_415_2_t_bbg;}
random_switch(FEAT_TRAINS, PARENT, sw_southern_compartment_nse_t){dependent: sw_southern_compartment_nse; 26: spriteset_415_1_t_nse; 7: spriteset_415_2_t_nse;}

switch(FEAT_TRAINS, SELF, sw_415_passenger_livery_decider, current_year){
	0 .. 1963: sw_southern_compartment_brg;
	1964 .. 1975: sw_southern_compartment_brb;
	1976 .. 1982: sw_southern_compartment_bbg;
	1983 .. 1995: sw_southern_compartment_nse;
	sw_southern_compartment_brb;
}

switch(FEAT_TRAINS, SELF, sw_415_passenger_livery_decider_t, current_year){
	0 .. 1963: sw_southern_compartment_brg_t;
	1964 .. 1975: sw_southern_compartment_brb_t;
	1976 .. 1982: sw_southern_compartment_bbg_t;
	1983 .. 1995: sw_southern_compartment_nse_t;
	sw_southern_compartment_brb_t;
}

switch(FEAT_TRAINS, SELF, sw_415_manual_livery_decider, cargo_subtype){
	0: sw_southern_compartment_brg;
	1: sw_southern_compartment_brb;
	2: sw_southern_compartment_bbg;
	3: sw_southern_compartment_nse;
}

switch(FEAT_TRAINS, SELF, sw_415_manual_livery_decider_t, cargo_subtype){
	0: sw_southern_compartment_brg_t;
	1: sw_southern_compartment_brb_t;
	2: sw_southern_compartment_bbg_t;
	3: sw_southern_compartment_nse_t;
}

switch(FEAT_TRAINS, SELF, sw_415_livery_choice_decider, livery_choice){1 : sw_415_manual_livery_decider ; sw_415_passenger_livery_decider;}
switch(FEAT_TRAINS, SELF, sw_415_livery_choice_decider_t, livery_choice){1 : sw_415_manual_livery_decider_t ; sw_415_passenger_livery_decider_t ;}

switch(FEAT_TRAINS, SELF, sw_415_refit_text, cargo_subtype){
	0: string(STR_LIVERY_BRGREEN);
	1: string(STR_LIVERY_BRBLUE);
	2: string(STR_LIVERY_BRBLUEGREY);
	3: string(STR_LIVERY_NSE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_415_refit_text_decider, livery_choice){
	1 : sw_415_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_415_purchase, current_year){
	0 .. 1963: spriteset_415_brg_purchase;
	1964 .. 1975: spriteset_415_brb_purchase;
	1976 .. 1982: spriteset_415_bbg_purchase;
	1983 .. 1995: spriteset_415_nse_purchase;
}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_415_headcode, position_in_consist){0: spriteset_415_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_415_headcode_2, position_in_consist_from_end){0: spriteset_415_headcode_r; sw_415_headcode;}

switch(FEAT_TRAINS, SELF, sw_416_triangle_f, (count_veh_id(415)+1)%2){1: spriteset_415_guards_end_triangle; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_416_triangle_r, (count_veh_id(415)+1)%2){1: gfx_blank; spriteset_415_guards_end_triangle;}
switch(FEAT_TRAINS, PARENT, sw_416_triangle, vehicle_is_reversed){0: sw_416_triangle_f; sw_416_triangle_r;}

switch(FEAT_TRAINS, PARENT, sw_traingle_select_2, count_veh_id(9010)){0: sw_416_triangle; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_traingle_select_1, position_in_articulated_veh){0..1: sw_416_triangle; 3: gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_traingle_select, num_vehs_in_vehid_chain){3: sw_traingle_select_1; sw_traingle_select_2;}

switch(FEAT_TRAINS, SELF, sw_415_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_415_livery_choice_decider;
	1 : return sw_415_headcode_2;
	2 : return sw_traingle_select;
}

//references the 205's colour mapping
switch(FEAT_TRAINS, SELF, sw_415_colour_mapping_auto, current_year){
	0 .. 1963: sw_205_green_colour_mapping;
	1964 .. 1975: sw_205_blue_grey_colour_mapping;
	1976 .. 1982: sw_205_blue_grey_colour_mapping;
	1983 .. 1995: sw_205_nse_colour_mapping;
	sw_205_blue_grey_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_415_colour_mapping_manual, cargo_subtype){
	0: sw_205_green_colour_mapping;
	1: sw_205_blue_grey_colour_mapping;
	2: sw_205_blue_grey_colour_mapping;
	3: sw_205_nse_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_415_colour_mapping_manual_check, livery_choice){
	1 : sw_415_colour_mapping_manual ;
	sw_415_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_415_colour_mapping_decider, colour_scheme_1){
	1 : sw_415_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_415_coupling_restrictions, vehicle_type_id) {
    9010: return CB_RESULT_ATTACH_ALLOW;
	415: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_415_NO_COUPLE);
}


item (FEAT_TRAINS, item_415, 415) {
	property {
		name: 							string(STR_NAME_415);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1950, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					45;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					40;
		cost_factor:					30;
		running_cost_factor:			25;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							500 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					85;
		weight:							40 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_415_coupling_restrictions;
		default: 							sw_415_default;
		purchase:							sw_415_purchase;
		create_effect:						vfx_3rd;
		cargo_subtype_text:					sw_415_refit_text_decider ;
		purchase_colour_mapping:			sw_415_colour_mapping_auto;
		colour_mapping:						sw_415_colour_mapping_decider;
		running_cost_factor:				return(current_speed == 0 ? 8 : 25) ;
		sound_effect:						sw_sfx_emu_gec ;
}
		livery_override (9010) {
		cargo_capacity: 105;
		default: sw_415_livery_choice_decider_t;
		power: 250;
		colour_mapping: sw_415_colour_mapping_decider;
		cargo_subtype_text: sw_415_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_415, 415){
	property{
		name                           : string(STR_NAME_415_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_442.pnml" 1
//442 Driving
spriteset(spriteset_442_d_nse, "gfx/EMU/class_442.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_442_d_swt, "gfx/EMU/class_442.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_442_d_gax, "gfx/EMU/class_442.png") {template_8_8_networker(0, 150)}
//442 Trailer
spriteset(spriteset_442_t_nse, "gfx/EMU/class_442.png") {template_8_4_networker(0, 75)}
spriteset(spriteset_442_t_swt, "gfx/EMU/class_442.png") {template_8_4_networker(0, 125)}
spriteset(spriteset_442_t_gax, "gfx/EMU/class_442.png") {template_8_4_networker(0, 175)}
//Purchase
spriteset(spriteset_442_nse_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 75)}
spriteset(spriteset_442_swt_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 125)}
spriteset(spriteset_442_gax_purchase, "gfx/EMU/class_442.png") {template_dualhead_purchase(90, 175)}
//Headlights
spriteset(spriteset_442_headcode_f, "gfx/EMU/class_442.png") {template_8_8_networker(179, 0)}
spriteset(spriteset_442_headcode_r, "gfx/EMU/class_442.png") {template_8_8_networker(179, 25)}


//Switches
	
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_nse, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_nse;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_swt, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_swt;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_gax, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_d_gax;}
//Trailers
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_nse_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_nse;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_swt_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_swt;}
random_switch(FEAT_TRAINS, SELF, sw_plastic_pig_gax_t, TRIGGER_VEHICLE_SERVICE){1: spriteset_442_t_gax;}

//Livery Switches
switch(FEAT_TRAINS, SELF, sw_442_passenger_livery_decider, current_year){
	1983 .. 1995: sw_plastic_pig_nse;
	1996 .. 2004: sw_plastic_pig_swt;
	2005 .. 4096: sw_plastic_pig_gax;
	sw_plastic_pig_gax;
}

switch(FEAT_TRAINS, SELF, sw_442_passenger_livery_decider_t, current_year){
	1983 .. 1995: sw_plastic_pig_nse_t;
	1996 .. 2004: sw_plastic_pig_swt_t;
	2005 .. 4096: sw_plastic_pig_gax_t;
	sw_plastic_pig_gax_t;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_442_manual_livery_decider, cargo_subtype){
	0: sw_plastic_pig_nse;
	1: sw_plastic_pig_swt;
	2: sw_plastic_pig_gax;
}

switch(FEAT_TRAINS, SELF, sw_442_manual_livery_decider_t, cargo_subtype){
	0: sw_plastic_pig_nse_t;
	1: sw_plastic_pig_swt_t;
	2: sw_plastic_pig_gax_t;
}

switch(FEAT_TRAINS, SELF, sw_442_livery_choice_decider, livery_choice){1 : sw_442_manual_livery_decider ; sw_442_passenger_livery_decider ;}
switch(FEAT_TRAINS, SELF, sw_442_livery_choice_decider_t, livery_choice){1 : sw_442_manual_livery_decider_t ; sw_442_passenger_livery_decider_t ;}

//Refit text

switch(FEAT_TRAINS, SELF, sw_442_refit_text, cargo_subtype){
	0: string(STR_LIVERY_NSE);
	1: string(STR_LIVERY_SWT);
	2: string(STR_LIVERY_GATEX);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_442_refit_text_decider, livery_choice){
	1 : sw_442_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_442_purchase, current_year){
	1983 .. 1995: spriteset_442_nse_purchase;
	1996 .. 2004: spriteset_442_swt_purchase;
	2005 .. 4096: spriteset_442_gax_purchase;
	spriteset_442_gax_purchase;
}

//Headcodes
switch(FEAT_TRAINS, SELF, sw_442_headcode, position_in_consist){0: spriteset_442_headcode_f; gfx_blank;}
switch(FEAT_TRAINS, SELF, sw_442_headcode_2, position_in_consist_from_end){0: spriteset_442_headcode_r; sw_442_headcode;}


switch(FEAT_TRAINS, SELF, sw_442_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_442_livery_choice_decider;
	1 : return sw_442_headcode_2;
}

switch(FEAT_TRAINS, SELF, sw_442_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_442_livery_choice_decider_t;
}
//Recolour
random_switch(FEAT_TRAINS, SELF, sw_442_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;}
random_switch(FEAT_TRAINS, SELF, sw_442_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_442_gax_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_442_colour_mapping_auto, current_year){
	1983 .. 1995: sw_442_nse_colour_mapping;
	1996 .. 2004: sw_442_swt_colour_mapping;
	2005 .. 4096: sw_442_gax_colour_mapping;
	sw_442_gax_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_442_colour_mapping_manual, cargo_subtype){
	0: sw_442_nse_colour_mapping;
	1: sw_442_swt_colour_mapping;
	2: sw_442_gax_colour_mapping;
}

switch(FEAT_TRAINS, PARENT, sw_442_colour_mapping_manual_check, livery_choice){
	1 : sw_442_colour_mapping_manual ;
	sw_442_colour_mapping_auto ;
}

switch(FEAT_TRAINS, PARENT, sw_442_colour_mapping_decider, colour_scheme_1){
	1 : sw_442_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_442_coupling_restrictions, vehicle_type_id) {
    9030: return CB_RESULT_ATTACH_ALLOW;
	442: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_442_NO_COUPLE);
}

item (FEAT_TRAINS, item_442, 442) {
	property {
		name: 							string(STR_NAME_442);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1988, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					20;
		cost_factor:					49;
		running_cost_factor:			35;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1608 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					64;
		weight:							40 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_442_coupling_restrictions;
		default: 							sw_442_default;
		purchase:							sw_442_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_442_refit_text_decider ;
		colour_mapping:						sw_442_colour_mapping_decider;
		purchase_colour_mapping: 			sw_442_colour_mapping_decider;
		sound_effect:						sw_sfx_emu_gec ;
		running_cost_factor:				return(current_speed == 0 ? 9 : 35) ;
}
		livery_override (9030) {
		cargo_capacity: 62;
		default: sw_442_default_t;
		colour_mapping:	sw_442_colour_mapping_decider;
		cargo_subtype_text: sw_442_refit_text_decider ;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_442, 442){
	property{
		name                           : string(STR_NAME_442_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_450.pnml" 1
spriteset(spriteset_444_swt, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 50)
}

spriteset(spriteset_444_swt_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 75)
}

spriteset(spriteset_450_swt, "gfx/EMU/class_450.png") {
	template_8_8_networker(0, 0)
}
spriteset(spriteset_450_swt_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(90, 25)
}

spriteset(spriteset_444_purchase, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(0, 25)
}

spriteset(spriteset_444_tail_lights, "gfx/EMU/class_450.png") {
	template_8_8_networker(179, 0)
}

spriteset(spriteset_444_no_lights, "gfx/EMU/class_450.png") {
	template_8_8_networker(179, 25)
}

//Switches

switch(FEAT_TRAINS, SELF, sw_450_front, position_in_consist){
	0: gfx_blank;
	spriteset_444_tail_lights;
}
switch(FEAT_TRAINS, SELF, sw_450_swt_select, position_in_consist_from_end){
	0: spriteset_444_tail_lights;
	return sw_450_front;
}

//How the livery is selected

switch(FEAT_TRAINS, PARENT, sw_444_livery_selection_auto, ((count_veh_id(item_MU90)+1)/count_veh_id(item_444))){
	0..1: spriteset_450_swt;
	 spriteset_444_swt;
} 

switch(FEAT_TRAINS, PARENT, sw_444_livery_selection_auto_t, ((count_veh_id(item_MU90)+1)/count_veh_id(item_444))){
	0..1: spriteset_450_swt_t;
	 spriteset_444_swt_t;
} 

switch(FEAT_TRAINS, SELF, sw_444_livery_selection_manual, cargo_subtype){
	0: spriteset_450_swt;
	1: spriteset_444_swt;
} 

switch(FEAT_TRAINS, PARENT, sw_444_livery_selection_manual_t, cargo_subtype){
	0: spriteset_450_swt_t;
	1: spriteset_444_swt_t;
} 

switch(FEAT_TRAINS, SELF, sw_444_livery_selection, livery_choice){
	1: sw_444_livery_selection_manual;
	sw_444_livery_selection_auto;
}

switch(FEAT_TRAINS, SELF, sw_444_livery_selection_t, livery_choice){
	1: sw_444_livery_selection_manual_t;
	sw_444_livery_selection_auto_t;
}

switch(FEAT_TRAINS, SELF, sw_444_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_444_livery_selection;
	1 : return sw_450_swt_select;
}

switch(FEAT_TRAINS, SELF, sw_444_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_444_livery_selection_t;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_444_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SWT_STR, string(STR_450));
	1: string(STR_LIVERY_SWT_STR, string(STR_444));
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_444_refit_text_decider, livery_choice){
	1 : sw_444_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour options

random_switch(FEAT_TRAINS, SELF, sw_450_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_444_recolour_selection_auto, (count_veh_id(item_MU90)/count_veh_id(item_444))){
	0..1: sw_450_colour_mapping;
	 sw_450_colour_mapping;
} 

switch(FEAT_TRAINS, SELF, sw_444_recolour_selection_manual, cargo_subtype){
	0: sw_450_colour_mapping;
	1: sw_450_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_444_recolour_livery_selection, livery_choice){
	1: sw_444_recolour_selection_manual;
	sw_444_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_444_colour_mapping, colour_scheme_1){
	1 : sw_444_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_444_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_444: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_444_NO_COUPLE);
}

item (FEAT_TRAINS, item_444, 444) {
	property {
		name: 							string(STR_NAME_444);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2002, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					75;
		running_cost_factor:			60;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							48 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_444_coupling_restrictions;
		default: 							sw_444_default;
		purchase:							spriteset_444_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_444_colour_mapping;
		cargo_subtype_text:					sw_444_refit_text_decider;
		purchase_colour_mapping:			sw_444_colour_mapping;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 18 : 60) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 75;
		default: sw_444_trailer;
		weight:	34;
		colour_mapping:	sw_444_colour_mapping;
		cargo_subtype_text: sw_444_refit_text_decider;
}
}


if (vehicle_selection < 1){
item (FEAT_TRAINS, item_444, 444){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_444, 444){
	property{
		name                           : string(STR_NAME_444_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_350.pnml" 1
spriteset(spriteset_350_slv, "gfx/EMU/class_450.png") {
	template_8_8_networker(359, 25)
}

spriteset(spriteset_350_slv_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(449, 50)
}

spriteset(spriteset_350_slv_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 0)
}

spriteset(spriteset_350_lml, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 25)
}

spriteset(spriteset_350_lml_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(539, 75)
}

spriteset(spriteset_350_lml_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(539, 50)
}

spriteset(spriteset_350_ftp, "gfx/EMU/class_450.png") {
	template_8_8_networker(718, 0)
}

spriteset(spriteset_350_ftp_t, "gfx/EMU/class_450.png") {
	template_8_4_networker(629, 75)
}

spriteset(spriteset_350_ftp_t_p, "gfx/EMU/class_450.png") {
	template_8_8_networker(718, 25)
}


spriteset(spriteset_350_purchase_slv, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 50)
}

spriteset(spriteset_350_purchase_lml, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 63)
}

spriteset(spriteset_350_purchase_tpe, "gfx/EMU/class_450.png") {
	template_dualhead_purchase(718, 76)
}

//Switches

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_svl_f, position_in_vehid_chain){
	0 : spriteset_350_slv_t_p ;
	spriteset_350_slv_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_svl_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_slv_t_p ;
	spriteset_350_slv_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_svl, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_svl_b ;
	sw_350_t_panto_decider_svl_f ;
}


switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_lml_f, position_in_vehid_chain){
	0 : spriteset_350_lml_t_p ;
	spriteset_350_lml_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_lml_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_lml_t_p ;
	spriteset_350_lml_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_lml, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_lml_b ;
	sw_350_t_panto_decider_lml_f ;
}


switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_ftp_f, position_in_vehid_chain){
	0 : spriteset_350_ftp_t_p ;
	spriteset_350_ftp_t ;
}

switch(FEAT_TRAINS, SELF, sw_350_t_panto_decider_ftp_b, position_in_vehid_chain_from_end){
	0 : spriteset_350_ftp_t_p ;
	spriteset_350_ftp_t ;
}

switch(FEAT_TRAINS, PARENT, sw_350_t_panto_decider_ftp, vehicle_is_reversed){
	1 : sw_350_t_panto_decider_ftp_b ;
	sw_350_t_panto_decider_ftp_f ;
}

//How the livery is selected

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_auto, current_year){
	2004..2006 : spriteset_350_slv ;
	2007..2013 : spriteset_350_lml ;
	spriteset_350_ftp ;
}

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_auto_t, current_year){
	2004..2006 : sw_350_t_panto_decider_svl ;
	2007..2013 : sw_350_t_panto_decider_lml ;
	sw_350_t_panto_decider_ftp ;
}



switch(FEAT_TRAINS, SELF, sw_350_livery_selection_manual, cargo_subtype){
	0: spriteset_350_slv ;
	1: spriteset_350_lml ;
	spriteset_350_ftp ;
} 

switch(FEAT_TRAINS, PARENT, sw_350_livery_selection_manual_t, cargo_subtype){
	0: sw_350_t_panto_decider_svl;
	1: sw_350_t_panto_decider_lml;
	sw_350_t_panto_decider_ftp ;
} 

switch(FEAT_TRAINS, SELF, sw_350_livery_selection, livery_choice){
	1: sw_350_livery_selection_manual;
	sw_350_livery_selection_auto;
}

switch(FEAT_TRAINS, SELF, sw_350_livery_selection_t, livery_choice){
	1: sw_350_livery_selection_manual_t;
	sw_350_livery_selection_auto_t;
}

switch(FEAT_TRAINS, SELF, sw_350_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_350_livery_selection;
	1 : return sw_450_swt_select;
}

switch(FEAT_TRAINS, SELF, sw_350_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_350_livery_selection_t;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_350_refit_text, cargo_subtype){
	0: string(STR_LIVERY_SILVERLINK);
	1: string(STR_LIVERY_LONDON_MIDLAND);
	2: string(STR_LIVERY_FIRST_TPE);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_350_refit_text_decider, livery_choice){
	1 : sw_350_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_350_recolour_selection_auto, current_year){
	2004..2006 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	2007..2013 : palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
} 

switch(FEAT_TRAINS, SELF, sw_350_recolour_selection_manual, cargo_subtype){
	0: palette_2cc(COLOUR_DARK_BLUE, COLOUR_GREY) ;
	1: palette_2cc(COLOUR_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;
}

switch(FEAT_TRAINS, SELF, sw_350_recolour_livery_selection, livery_choice){
	1: sw_350_recolour_selection_manual;
	sw_350_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_350_colour_mapping, colour_scheme_1){
	1 : sw_350_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_350_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_350: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_350_NO_COUPLE);
}

//Purchase sprite_id

switch(FEAT_TRAINS, SELF, sw_350_purchase_sprite, current_year){
	2004..2006 : spriteset_350_purchase_slv ;
	2007..2013 : spriteset_350_purchase_lml ;
	spriteset_350_purchase_tpe ;
}

switch(FEAT_TRAINS, SELF, sw_350_purchase_colours_check, colour_scheme_1){
	1 : sw_350_recolour_selection_auto ;
	palette_2cc(company_colour1, company_colour2) ;
}


item (FEAT_TRAINS, item_350, 350) {
	property {
		name: 							string(STR_NAME_350);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2004, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					75;
		running_cost_factor:			60;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							110 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							2000 kW;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							48 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_350_coupling_restrictions;
		default: 							sw_350_default;
		purchase:							sw_350_purchase_sprite;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_350_colour_mapping;
		cargo_subtype_text:					sw_350_refit_text_decider;
		purchase_colour_mapping:			sw_350_purchase_colours_check;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 15 : 60) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 75;
		default: sw_350_trailer;
		weight:	34;
		colour_mapping:	sw_350_colour_mapping;
		cargo_subtype_text: sw_350_refit_text_decider;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_350, 350){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_350, 350){
	property{
		name                           : string(STR_NAME_350_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_375.pnml" 1
//Power car
spriteset(spriteset_375_f_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_377_f_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 125)}
spriteset(spriteset_375_f_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 200)}
spriteset(spriteset_375_f_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 275)}
spriteset(spriteset_375_f_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_375_f_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 425)}
spriteset(spriteset_377_f_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 500)}
spriteset(spriteset_387_f_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 575)}
spriteset(spriteset_387_f_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 650)}
spriteset(spriteset_379_f_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 725)}
//Trailer car
spriteset(spriteset_375_t_cnx, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 0)}
spriteset(spriteset_377_t_stn, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 75)}
spriteset(spriteset_375_t_sxs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 150)}
spriteset(spriteset_375_t_sgs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 225)}
spriteset(spriteset_375_t_sbs, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 300)}
spriteset(spriteset_375_t_ser, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 375)}
spriteset(spriteset_377_t_fcc, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 450)}
spriteset(spriteset_387_t_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 525)}
spriteset(spriteset_387_t_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 600)}
spriteset(spriteset_379_t_gan, "gfx/EMU/leccystar3.png") {template_8_4_networker(0, 675)}
//Pan car
spriteset(spriteset_375_p_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_377_p_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 100)}
spriteset(spriteset_375_p_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 175)}
spriteset(spriteset_375_p_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_375_p_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 325)}
spriteset(spriteset_375_p_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 400)}
spriteset(spriteset_377_p_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 475)}
spriteset(spriteset_387_p_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_387_p_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 625)}
spriteset(spriteset_379_p_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker(0, 700)}
spriteset(spriteset_375_pr_cnx, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 25)}
spriteset(spriteset_377_pr_stn, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 100)}
spriteset(spriteset_375_pr_sxs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 175)}
spriteset(spriteset_375_pr_sgs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 250)}
spriteset(spriteset_375_pr_sbs, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 325)}
spriteset(spriteset_375_pr_ser, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 400)}
spriteset(spriteset_377_pr_fcc, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 475)}
spriteset(spriteset_387_pr_gtr_c2c, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 550)}
spriteset(spriteset_387_pr_gax_gwr, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 625)}
spriteset(spriteset_379_pr_gan, "gfx/EMU/leccystar3.png") {template_8_8_networker_reverse(0, 700)}
//Fixtures
spriteset(spriteset_375_f_lights, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 0)}
spriteset(spriteset_375_r_lights, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 25)}
spriteset(spriteset_375_pan_up, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_375_pan_down, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 75)}
spriteset(spriteset_375_pan_up_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 50)}
spriteset(spriteset_375_pan_down_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 75)}
//Purchase
spriteset(spriteset_375_cnx_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 300)}
spriteset(spriteset_375_sxs_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 325)}
spriteset(spriteset_375_sgs_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 350)}
spriteset(spriteset_375_ser_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 375)}
spriteset(spriteset_375_gtr_purchase, "gfx/EMU/leccystar3.png") {template_dualhead_purchase(179, 400)}

switch(FEAT_TRAINS, SELF, sw_electrostar_front_auto, current_year){
0 .. 2000: spriteset_375_f_cnx;
2001 .. 2003: spriteset_375_f_sxs;
2004 .. 2009: spriteset_375_f_sgs;
2010 .. 2016: spriteset_375_f_ser;
spriteset_387_f_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_purchase, current_year){
0 .. 2000: spriteset_375_cnx_purchase;
2001 .. 2003: spriteset_375_sxs_purchase;
2004 .. 2009: spriteset_375_sgs_purchase;
2010 .. 2016: spriteset_375_ser_purchase;
spriteset_375_gtr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_front_man, cargo_subtype){
0: spriteset_375_f_cnx;
1: spriteset_377_f_stn;
2: spriteset_375_f_sxs;
3: spriteset_375_f_sgs;
4: spriteset_375_f_sbs;
5: spriteset_375_f_ser;
6: spriteset_377_f_fcc;
7..8: spriteset_387_f_gtr_c2c;
9..10: spriteset_387_f_gax_gwr;
11: spriteset_379_f_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_trailer_man, cargo_subtype){
0: spriteset_375_t_cnx;
1: spriteset_377_t_stn;
2: spriteset_375_t_sxs;
3: spriteset_375_t_sgs;
4: spriteset_375_t_sbs;
5: spriteset_375_t_ser;
6: spriteset_377_t_fcc;
7..8: spriteset_387_t_gtr_c2c;
9..10: spriteset_387_t_gax_gwr;
11: spriteset_379_t_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_pan_man_f, cargo_subtype){
0: spriteset_375_p_cnx;
1: spriteset_377_p_stn;
2: spriteset_375_p_sxs;
3: spriteset_375_p_sgs;
4: spriteset_375_p_sbs;
5: spriteset_375_p_ser;
6: spriteset_377_p_fcc;
7..8: spriteset_387_p_gtr_c2c;
9..10: spriteset_387_p_gax_gwr;
11: spriteset_379_p_gan;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_pan_man_r, cargo_subtype){
0: spriteset_375_pr_cnx;
1: spriteset_377_pr_stn;
2: spriteset_375_pr_sxs;
3: spriteset_375_pr_sgs;
4: spriteset_375_pr_sbs;
5: spriteset_375_pr_ser;
6: spriteset_377_pr_fcc;
7..8: spriteset_387_pr_gtr_c2c;
9..10: spriteset_387_pr_gax_gwr;
11: spriteset_379_pr_gan;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_man, vehicle_is_reversed){
0: sw_electrostar_pan_man_f;
sw_electrostar_pan_man_r;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_t_auto, current_year){
0 .. 2000: spriteset_375_t_cnx;
2001 .. 2003: spriteset_375_t_sxs;
2004 .. 2009: spriteset_375_t_sgs;
2010 .. 2016: spriteset_375_t_ser;
spriteset_387_t_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_p_auto_f, current_year){
0 .. 2000: spriteset_375_p_cnx;
2001 .. 2003: spriteset_375_p_sxs;
2004 .. 2009: spriteset_375_p_sgs;
2010 .. 2016: spriteset_375_p_ser;
spriteset_387_p_gtr_c2c;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_p_auto_r, current_year){
0 .. 2000: spriteset_375_pr_cnx;
2001 .. 2003: spriteset_375_pr_sxs;
2004 .. 2009: spriteset_375_pr_sgs;
2010 .. 2016: spriteset_375_pr_ser;
spriteset_387_pr_gtr_c2c;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_p_auto, vehicle_is_reversed){
0: sw_electrostar_p_auto_f;
sw_electrostar_p_auto_r;
}

switch(FEAT_TRAINS, SELF, sw_375_livery_param, livery_choice){1 : sw_electrostar_front_man ; sw_electrostar_front_auto ;}
switch(FEAT_TRAINS, SELF, sw_375_p_livery_param, livery_choice){1 : sw_electrostar_pan_man ; sw_electrostar_p_auto ;}
switch(FEAT_TRAINS, SELF, sw_375_t_livery_param, livery_choice){1 : sw_electrostar_trailer_man ; sw_electrostar_t_auto ;}

switch(FEAT_TRAINS, SELF, sw_electrostar_headlights_1, position_in_consist){
0: spriteset_375_f_lights;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_headlights, position_in_consist_from_end){
0: spriteset_375_r_lights;
sw_electrostar_headlights_1;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_f, current_railtype){
ELRL: spriteset_375_pan_up;
spriteset_375_pan_down;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan_r, current_railtype){
ELRL: spriteset_375_pan_up_r;
spriteset_375_pan_down_r;
}

switch(FEAT_TRAINS, PARENT, sw_electrostar_pan, vehicle_is_reversed){
0: sw_electrostar_pan_f;
sw_electrostar_pan_r;
}

switch(FEAT_TRAINS, SELF, sw_375_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_375_livery_param;
	1: return sw_electrostar_headlights;
}

switch(FEAT_TRAINS, SELF, sw_375_nd_livery_param_1, position_in_vehid_chain){
0: sw_375_p_livery_param;
sw_375_t_livery_param;
}

switch(FEAT_TRAINS, SELF, sw_375_nd_livery_param_2, position_in_vehid_chain_from_end){
0: sw_375_p_livery_param;
sw_375_t_livery_param;
}

switch(FEAT_TRAINS, PARENT, sw_375_nd_livery_param, vehicle_is_reversed){
0: sw_375_nd_livery_param_1;
sw_375_nd_livery_param_2;
}

switch(FEAT_TRAINS, SELF, sw_375_ndf_pan_switch, position_in_vehid_chain){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, SELF, sw_375_ndr_pan_switch, position_in_vehid_chain_from_end){
0: sw_electrostar_pan;
gfx_blank;
}

switch(FEAT_TRAINS, PARENT, sw_375_nd_pan_switch, vehicle_is_reversed){
0: sw_375_ndf_pan_switch;
sw_375_ndr_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_375_t_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0: return sw_375_nd_livery_param;
	1: return sw_375_nd_pan_switch;
}

switch(FEAT_TRAINS, SELF, sw_375_refit_text, cargo_subtype){
	0: string(STR_LIVERY_CONNEX);
	1: string(STR_LIVERY_SOUTHERN);
	2: string(STR_LIVERY_SE_YELLOW);
	3: string(STR_LIVERY_SE_YELLOW_GREY);
	4: string(STR_LIVERY_SE_BLUE);
	5: string(STR_LIVERY_SE_REFURB);
	6: string(STR_LIVERY_FCC);
	7: string(STR_LIVERY_GTR);
	8: string(STR_LIVERY_C2C);
	9: string(STR_LIVERY_FIRST_GWR);
	10: string(STR_LIVERY_GATEX);
	11: string(STR_LIVERY_ABELLIO_GREATER_ANGLIA);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_375_livery_decider, livery_choice){
	1: sw_375_refit_text;
	return CB_RESULT_NO_TEXT;
}

random_switch(FEAT_TRAINS, SELF, sw_375_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_WHITE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_377_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sxs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_YELLOW, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sgs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_YELLOW, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_sbs_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_375_ser_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_BLUE) ;}
random_switch(FEAT_TRAINS, SELF, sw_377_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_c2c_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gwr_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_GREEN, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_387_gatex_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_RED, COLOUR_GREY) ;}
random_switch(FEAT_TRAINS, SELF, sw_379_gan_colour_mapping, TRIGGER_VEHICLE_SERVICE){1: palette_2cc(COLOUR_DARK_BLUE, company_colour2) ;}

switch(FEAT_TRAINS, SELF, sw_electrostar_colour_auto, current_year){
0 .. 2000: sw_375_cnx_colour_mapping;
2001 .. 2003: sw_375_sxs_colour_mapping;
2004 .. 2009: sw_375_sgs_colour_mapping;
2010 .. 2016: sw_375_ser_colour_mapping;
sw_387_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_electrostar_colour_man, cargo_subtype){
	0: sw_375_cnx_colour_mapping;
	1: sw_377_stn_colour_mapping;
	2: sw_375_sxs_colour_mapping;
	3: sw_375_sgs_colour_mapping;
	4: sw_375_sbs_colour_mapping;
	5: sw_375_ser_colour_mapping;
	6: sw_377_fcc_colour_mapping;
	7: sw_387_gtr_colour_mapping;
	8: sw_387_c2c_colour_mapping;
	9: sw_387_gwr_colour_mapping;
	10: sw_387_gatex_colour_mapping;
	11: sw_379_gan_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_375_colour_livery_decider, livery_choice){
	1: sw_electrostar_colour_man;
	sw_electrostar_colour_auto;
}

switch(FEAT_TRAINS, SELF, sw_375_recolour, colour_scheme_1){
	1: sw_375_colour_livery_decider;
	palette_2cc(company_colour1, company_colour2);
}

switch(FEAT_TRAINS, SELF, sw_375_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	375: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_375_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_375_speed, current_year) {
    0 .. 2015: 160;
	176;
}

item (FEAT_TRAINS, item_375, 375) {
	property {
		name: 							string(STR_NAME_375);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1998, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					35;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							950 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					60;
		weight:							40 ton;
		tractive_effort_coefficient:	0.49;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
		engine_class:					ENGINE_CLASS_ELECTRIC;
	}
	graphics {
		can_attach_wagon:					sw_375_coupling_restrictions;
		default: 							sw_375_default;
		purchase:							sw_electrostar_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_375_livery_decider ;
		colour_mapping:						sw_375_recolour;
		purchase_colour_mapping: 			sw_375_recolour;
		speed:								sw_375_speed;
		running_cost_factor:				return(current_speed == 0 ? 8 : 30) ;
		sound_effect:						sw_sfx_electric_loco_modern ;
}
		livery_override (9090) {
		cargo_capacity: 85;
		default: sw_375_t_default;
		colour_mapping:	sw_375_recolour;
		cargo_subtype_text: sw_375_livery_decider ;
	speed:								sw_375_speed;
	power:				580;
}
}


if (vehicle_selection < 3){
item (FEAT_TRAINS, item_375, 375){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_375, 375){
	property{
		name                           : string(STR_NAME_375_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_455.pnml" 1
//BR Blue/grey
spriteset(spriteset_455_brb_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 25)}
spriteset(spriteset_455_brb_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 75)}
spriteset(spriteset_455_brb_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 100)}
spriteset(spriteset_455_brb_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 125)}
spriteset(spriteset_455_brb_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(539, 150)}

//NSE
spriteset(spriteset_455_nse_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 200)}
spriteset(spriteset_455_nse_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 250)}
spriteset(spriteset_455_nse_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 275)}
spriteset(spriteset_455_nse_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 300)}
spriteset(spriteset_455_nse_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 325)}

//SWt Old
spriteset(spriteset_455_swo_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 200)}
spriteset(spriteset_455_swo_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 250)}
spriteset(spriteset_455_swo_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 275)}
spriteset(spriteset_455_swo_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 300)}
spriteset(spriteset_455_swo_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(539, 325)}

//CoNneX
spriteset(spriteset_455_cnx_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 375)}
spriteset(spriteset_455_cnx_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 425)}
spriteset(spriteset_455_cnx_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 450)}
spriteset(spriteset_455_cnx_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 475)}
spriteset(spriteset_455_cnx_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 500)}

//SouTherN
spriteset(spriteset_455_stn_t, "gfx/EMU/class_508.png") {template_8_8_networker(539, 375)}
spriteset(spriteset_455_stn_f, "gfx/EMU/class_508.png") {template_8_8_networker(539, 425)}
spriteset(spriteset_455_stn_r, "gfx/EMU/class_508.png") {template_8_8_networker(539, 450)}
spriteset(spriteset_455_stn_o, "gfx/EMU/class_508.png") {template_8_8_networker(539, 475)}
spriteset(spriteset_455_stn_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 500)}

//SWT
spriteset(spriteset_455_swt_t, "gfx/EMU/class_508.png") {template_8_8_networker(360, 550)}
spriteset(spriteset_455_swt_f, "gfx/EMU/class_508.png") {template_8_8_networker(360, 600)}
spriteset(spriteset_455_swt_r, "gfx/EMU/class_508.png") {template_8_8_networker(360, 625)}
spriteset(spriteset_455_swt_o, "gfx/EMU/class_508.png") {template_8_8_networker(360, 650)}
spriteset(spriteset_455_swt_purchase, "gfx/EMU/class_508.png") {template_dualhead_purchase(360, 675)}

//Switches

//Coupling

switch(FEAT_TRAINS, SELF, sw_455_coupling_restrictions, vehicle_type_id) {
    item_Mk2: return CB_RESULT_ATTACH_ALLOW;
	item_455: return CB_RESULT_ATTACH_ALLOW;
	456: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_455_NO_COUPLE);
}

//Power Car
switch(FEAT_TRAINS, SELF, sw_455_brb_f, position_in_consist){0: spriteset_455_brb_f; spriteset_455_brb_o;}
switch(FEAT_TRAINS, SELF, sw_455_brb, position_in_consist_from_end){0: spriteset_455_brb_r; sw_455_brb_f;}

switch(FEAT_TRAINS, SELF, sw_455_nse_f, position_in_consist){0: spriteset_455_nse_f; spriteset_455_nse_o;}
switch(FEAT_TRAINS, SELF, sw_455_nse, position_in_consist_from_end){0: spriteset_455_nse_r; sw_455_nse_f;}

switch(FEAT_TRAINS, SELF, sw_455_swo_f, position_in_consist){0: spriteset_455_swo_f; spriteset_455_swo_o;}
switch(FEAT_TRAINS, SELF, sw_455_swo, position_in_consist_from_end){0: spriteset_455_swo_r; sw_455_swo_f;}

switch(FEAT_TRAINS, SELF, sw_455_swt_f, position_in_consist){0: spriteset_455_swt_f; spriteset_455_swt_o;}
switch(FEAT_TRAINS, SELF, sw_455_swt, position_in_consist_from_end){0: spriteset_455_swt_r; sw_455_swt_f;}


switch(FEAT_TRAINS, SELF, sw_455_cnx_f, position_in_consist){0: spriteset_455_cnx_f; spriteset_455_cnx_o;}
switch(FEAT_TRAINS, SELF, sw_455_cnx, position_in_consist_from_end){0: spriteset_455_cnx_r; sw_455_cnx_f;}

switch(FEAT_TRAINS, SELF, sw_455_stn_f, position_in_consist){0: spriteset_455_stn_f; spriteset_455_stn_o;}
switch(FEAT_TRAINS, SELF, sw_455_stn, position_in_consist_from_end){0: spriteset_455_stn_r; sw_455_stn_f;}

//Livery Application Switches

random_switch(FEAT_TRAINS, SELF, sw_455_brb_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_brb ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_nse_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_nse ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swo_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_swo ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swt_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_swt ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_cnx_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_cnx ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_select, TRIGGER_VEHICLE_SERVICE){
	1: return sw_455_stn ;
}
//And for the trailers

random_switch(FEAT_TRAINS, SELF, sw_455_brb_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_brb_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_nse_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_nse_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swo_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_swo_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_swt_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_swt_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_stn_t ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_cnx_t_select, TRIGGER_VEHICLE_SERVICE){
	1: return spriteset_455_cnx_t ;
}

//Livery Switches 
 
switch(FEAT_TRAINS, SELF, sw_455_livery_decider, current_year){
	1971 .. 1982: sw_455_brb_select;
	1983 .. 1995: sw_455_nse_select;
	1996 .. 2005: sw_455_swo_select;
	2006 .. 2010: sw_455_swt_select;
	sw_455_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_455_t_livery_decider, current_year){
	1971 .. 1982: sw_455_brb_t_select;
	1983 .. 1995: sw_455_nse_t_select;
	1996 .. 2005: sw_455_swo_t_select;
	2006 .. 2010: sw_455_swt_t_select;
	sw_455_stn_t_select;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_455_manual_livery_decider, cargo_subtype){
	0: sw_455_brb_select;
	1: sw_455_nse_select;
	2: sw_455_swo_select;
	3: sw_455_swt_select;
	4: sw_455_cnx_select;
	5: sw_455_stn_select;
}

switch(FEAT_TRAINS, SELF, sw_455_t_manual_livery_decider, cargo_subtype){
	0: sw_455_brb_t_select;
	1: sw_455_nse_t_select;
	2: sw_455_swo_t_select;
	3: sw_455_swt_t_select;
	4: sw_455_cnx_t_select;
	5: sw_455_stn_t_select;
}

switch(FEAT_TRAINS, SELF, sw_455_final_livery_choice_decider, livery_choice){
	1 : sw_455_manual_livery_decider ; 
	sw_455_livery_decider ;
}

switch(FEAT_TRAINS, SELF, sw_455_t_final_livery_choice_decider, livery_choice){
	1 : sw_455_t_manual_livery_decider ; 
	sw_455_t_livery_decider ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_455_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_BRBLUE);
	1: return string(STR_LIVERY_NSE);
	2: return string(STR_LIVERY_SWT);
	3: return string(STR_LIVERY_SWT_REFURB);
	4: return string(STR_LIVERY_CONNEX);
	5: return string(STR_LIVERY_SOUTHERN);
	return CB_RESULT_NO_TEXT ;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_455_refit_text_decider, livery_choice){
	1 : sw_455_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Purchase sprite decider
switch(FEAT_TRAINS, SELF, sw_455_purchase, current_year){
	1971 .. 1982: spriteset_455_brb_purchase;
	1983 .. 1995: spriteset_455_nse_purchase;
	1996 .. 2005: spriteset_455_swo_purchase;
	2006 .. 2010: spriteset_455_swt_purchase;
	spriteset_455_stn_purchase;
}

switch(FEAT_TRAINS, SELF, sw_455_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_455_final_livery_choice_decider;
}

switch(FEAT_TRAINS, SELF, sw_455_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_455_t_final_livery_choice_decider;
}

//Recolour

random_switch(FEAT_TRAINS, SELF, sw_455_brb_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE) ;
 }

random_switch(FEAT_TRAINS, SELF, sw_455_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_455_swt_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_455_se_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW);
}

random_switch(FEAT_TRAINS, SELF, sw_455_stn_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
}

//Recolour Switches

switch(FEAT_TRAINS, SELF, sw_455_colour_mapping_year_decider, current_year){
	1971 .. 1982: sw_455_brb_colour_mapping;
	1983 .. 1995: sw_455_nse_colour_mapping;
	1996 .. 2005: sw_455_nse_colour_mapping;
	2006 .. 2010: sw_455_swt_colour_mapping;
	sw_455_stn_colour_mapping;
}

//Manual liveries

switch(FEAT_TRAINS, SELF, sw_455_manual_colour_mapping_decider, cargo_subtype){
	0: sw_455_brb_colour_mapping;
	1: sw_455_nse_colour_mapping;
	2: sw_455_nse_colour_mapping;
	3: sw_455_swt_colour_mapping;
	4: sw_455_se_colour_mapping;
	5: sw_455_stn_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_455_colour_mapping_mode_choice_decider, livery_choice){
	1 : sw_455_manual_colour_mapping_decider ; 
	sw_455_colour_mapping_year_decider ;
}

switch(FEAT_TRAINS, PARENT, sw_455_colour_mapping_choice_decider, colour_scheme_1){
	1 : sw_455_colour_mapping_mode_choice_decider ;
	palette_2cc(company_colour1, company_colour2) ;
}

item (FEAT_TRAINS, item_455, 455) {
	property {
		name: 							string(STR_NAME_455);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1982, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					38;
		cost_factor:					43;
		running_cost_factor:			30;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					80;
		weight:							30 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.85;
		air_drag_coefficient:			0.34;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				185;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_455_coupling_restrictions;
		default: 							sw_455_default;
		purchase:							sw_455_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_455_refit_text_decider ;
		colour_mapping:						sw_455_colour_mapping_choice_decider ;
		sound_effect:						sw_sfx_emu_gec ;
		purchase_colour_mapping:			sw_455_colour_mapping_choice_decider;
		running_cost_factor:				return(current_speed == 0 ? 7 : 30) ;
}
		livery_override (item_Mk2) {
		cargo_capacity: 85;
		default: sw_455_default_t;
		colour_mapping:	sw_455_colour_mapping_choice_decider;
		cargo_subtype_text: sw_455_refit_text_decider ;
		weight: 35;
}
}

if (vehicle_selection < 1){
item (FEAT_TRAINS, item_455, 455){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_455, 455){
	property{
		name                           : string(STR_NAME_455_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/EMU/class_700.pnml" 1
spriteset(spriteset_700_tl_f, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 200)
}

spriteset(spriteset_700_tl_r, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 225)
}

spriteset(spriteset_700_tl_o, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 250)
}

spriteset(spriteset_700_tl_t, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 150)
}

spriteset(spriteset_700_tl_p, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 175)
}

spriteset(spriteset_700_swt_f, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 350)
}

spriteset(spriteset_700_swt_r, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 375)
}

spriteset(spriteset_700_swt_o, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 400)
}

spriteset(spriteset_700_swt_t, "gfx/EMU/class_707.png") {
	template_8_8_networker(0, 300)
}

spriteset(spriteset_700_purchase, "gfx/EMU/class_707.png") {
	template_dualhead_purchase(0, 275)
}

//Switches


switch(FEAT_TRAINS, SELF, sw_700_front, position_in_consist){
	0: spriteset_700_tl_f;
	spriteset_700_tl_o;
}
switch(FEAT_TRAINS, SELF, sw_700_tl_select, position_in_consist_from_end){
	0: spriteset_700_tl_r;
	return sw_700_front;
}
switch(FEAT_TRAINS, SELF, sw_700_tl_t_select, position_in_vehid_chain){
	0: spriteset_700_tl_p;
	spriteset_700_tl_t;
}
random_switch(FEAT_TRAINS, SELF, sw_700, TRIGGER_VEHICLE_SERVICE){1:sw_700_tl_select;}
random_switch(FEAT_TRAINS, SELF, sw_700_t, TRIGGER_VEHICLE_SERVICE){1: sw_700_tl_t_select;}

switch(FEAT_TRAINS, SELF, sw_707_front, position_in_consist){
	0: spriteset_700_swt_f;
	spriteset_700_swt_o;
}
switch(FEAT_TRAINS, SELF, sw_707_swt_select, position_in_consist_from_end){
	0: spriteset_700_swt_r;
	return sw_707_front;
}
switch(FEAT_TRAINS, SELF, sw_707_swt_t_select, position_in_vehid_chain){
	0: spriteset_700_swt_t;
	spriteset_700_swt_t;
}
random_switch(FEAT_TRAINS, SELF, sw_707, TRIGGER_VEHICLE_SERVICE){1:sw_707_swt_select;}
random_switch(FEAT_TRAINS, SELF, sw_707_t, TRIGGER_VEHICLE_SERVICE){1: sw_707_swt_t_select;}

//How the livery is selected

switch(FEAT_TRAINS, PARENT, sw_700_livery_selection_auto, (count_veh_id(item_MU90)/count_veh_id(item_700))){
	0..1: sw_707;
	 sw_700;
} 

switch(FEAT_TRAINS, PARENT, sw_700_livery_selection_auto_t, (count_veh_id(item_MU90)/count_veh_id(item_700))){
	0..1: sw_707_t;
	 sw_700_t;
} 

switch(FEAT_TRAINS, SELF, sw_700_livery_selection_manual, cargo_subtype){
	0: sw_700;
	1: sw_707;
} 

switch(FEAT_TRAINS, PARENT, sw_700_livery_selection_manual_t, cargo_subtype){
	0: sw_700_t;
	1: sw_707_t;
} 

switch(FEAT_TRAINS, SELF, sw_700_livery_selection, livery_choice){
	1: sw_700_livery_selection_manual;
	sw_700_livery_selection_auto;
}

switch(FEAT_TRAINS, SELF, sw_700_livery_selection_t, livery_choice){
	1: sw_700_livery_selection_manual_t;
	sw_700_livery_selection_auto_t;
}

switch(FEAT_TRAINS, SELF, sw_700_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_700_livery_selection;
}

switch(FEAT_TRAINS, SELF, sw_700_trailer, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_700_livery_selection_t;
}

//Refit text

switch(FEAT_TRAINS, SELF, sw_700_refit_text, cargo_subtype){
	0: string(STR_LIVERY_THAMESLINK);
	1: string(STR_LIVERY_SWT);
	return CB_RESULT_NO_TEXT;
}

switch(FEAT_TRAINS, SELF, sw_700_refit_text_decider, livery_choice){
	1 : sw_700_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

//Recolour options

random_switch(FEAT_TRAINS, SELF, sw_707_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE) ;
}

random_switch(FEAT_TRAINS, SELF, sw_700_tl_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_LIGHT_BLUE, company_colour2) ;
}

//Recolour decicsion

switch(FEAT_TRAINS, PARENT, sw_700_recolour_selection_auto, (count_veh_id(item_MU90)/count_veh_id(item_700))){
	0..1: sw_707_colour_mapping;
	 sw_700_tl_colour_mapping;
} 

switch(FEAT_TRAINS, SELF, sw_700_recolour_selection_manual, cargo_subtype){
	0: sw_700_tl_colour_mapping;
	1: sw_707_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_700_recolour_livery_selection, livery_choice){
	1: sw_700_recolour_selection_manual;
	sw_700_recolour_selection_auto;
}

switch(FEAT_TRAINS, PARENT, sw_700_colour_mapping, colour_scheme_1){
	1 : sw_700_recolour_livery_selection ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_700_coupling_restrictions, vehicle_type_id) {
    item_MU90: return CB_RESULT_ATTACH_ALLOW;
	item_700: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_700_NO_COUPLE);
}

item (FEAT_TRAINS, item_700, 700) {
	property {
		name: 							string(STR_NAME_700);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(2015, 1, 1);
		model_life:						15;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		CC_PASSENGERS;
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					75;
		running_cost_factor:			60;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							4425 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					90;
		weight:							34 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.11;
		air_drag_coefficient:			0.06;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
	}
	graphics {
		can_attach_wagon:					sw_700_coupling_restrictions;
		default: 							sw_700_default;
		purchase:							spriteset_700_purchase;
		create_effect:						vfx_dual_voltage;
		colour_mapping:						sw_700_colour_mapping;
		cargo_subtype_text:					sw_700_refit_text_decider;
		purchase_colour_mapping:			sw_700_colour_mapping;
		sound_effect:						sw_sfx_emu_desiro;
		running_cost_factor:				return(current_speed == 0 ? 19 : 60) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 90;
		power: 200;
		default: sw_700_trailer;
		weight:	34;
		colour_mapping:	sw_700_colour_mapping;
		cargo_subtype_text: sw_700_refit_text_decider;
}
}


if (alt_names == 1){
item (FEAT_TRAINS, item_700, 700){
	property{
		name                           : string(STR_NAME_700_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/STEAM_LOCO/narrow_garratt.pnml" 1
//Narrow Garrat

//Graphics

//Spritesets

spriteset(gfx_nrwgarratt_coal       , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 ,  0 ,  8 , 14 , -3 , -11] //North
	[ 10 ,  0 , 12 , 13 , -3 , -9 ] //North East
	[ 28 ,  0 , 17 , 13 ,  0 , -8 ] //East
	[ 54 ,  0 , 12 , 13 ,  2 , -5 ] //South East
	[ 72 ,  0 ,  8 , 14 , -3 , -3 ] //South
	[ 82 ,  0 , 12 , 13 , -14, -4 ] //South West
	[100 ,  0 , 17 , 13 , -17, -8 ] //West
	[126 ,  0 , 12 , 13 , -7 , -9 ] //North West
}
spriteset(gfx_nrwgarratt_coal_rev   , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 ,  0 ,  8 , 14 , -3 , -11] //North
	[ 82 ,  0 , 12 , 13 , -6 , -8 ] //North East
	[100 ,  0 , 17 , 13 , -1 , -8 ] //East
	[126 ,  0 , 12 , 13 ,  1 , -5 ] //South East
	[  0 ,  0 ,  8 , 14 , -3 , -3 ] //South
	[ 10 ,  0 , 12 , 13 , -11, -5 ] //South West
	[ 28 ,  0 , 17 , 13 , -16, -8 ] //West
	[ 54 ,  0 , 12 , 13 , -6 , -9 ] //North West
}




spriteset(gfx_nrwgarratt_water      , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 , 35 ,  8 , 14 , -3 , -11] //North
	[ 82 , 35 , 12 , 13 , -4 , -9 ] //North East
	[100 , 35 , 17 , 13 , -1 , -8 ] //East
	[126 , 35 , 12 , 13 ,  1 , -5 ] //South East
	[  0 , 35 ,  8 , 14 , -3 , -3 ] //South
	[ 10 , 35 , 12 , 13 , -13, -4 ] //South West
	[ 28 , 35 , 17 , 13 , -16, -8 ] //West
	[ 54 , 35 , 12 , 13 , -6 , -9 ] //North West
}
spriteset(gfx_nrwgarratt_water_rev  , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 , 35 ,  8 , 14 , -3 , -11] //North
	[ 10 , 35 , 12 , 13 , -5 , -8 ] //North East
	[ 28 , 35 , 17 , 13 ,  0 , -8 ] //East
	[ 54 , 35 , 12 , 13 ,  2 , -5 ] //South East
	[ 72 , 35 ,  8 , 14 , -3 , -3 ] //South
	[ 82 , 35 , 12 , 13 , -12, -5 ] //South West
	[100 , 35 , 17 , 13 , -17, -8 ] //West
	[126 , 35 , 12 , 13 , -7 , -9 ] //North West
}




spriteset(gfx_nrwgarratt_boiler     , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[ 72 , 15 ,  8 , 19 , -3 , -13] //North
	[ 82 , 15 , 16 , 15 , -7 , -10] //North East
	[100 , 15 , 24 , 13 , -6 , -8 ] //East
	[126 , 15 , 16 , 15 , -1 , -6 ] //South East
	[  0 , 15 ,  8 , 19 , -3 , -7 ] //South
	[ 10 , 15 , 16 , 15 , -15, -5 ] //South West
	[ 28 , 15 , 24 , 13 , -18, -8 ] //West
	[ 54 , 15 , 16 , 15 , -7 , -10] //North West
}
spriteset(gfx_nrwgarratt_boiler_rev , "gfx/STEAM_LOCO/narrow_garrat.png"){
	[  0 , 15 ,  8 , 19 , -3 , -13] //North
	[ 10 , 15 , 16 , 15 , -9 , -8 ] //North East
	[ 28 , 15 , 24 , 13 , -6 , -8 ] //East
	[ 54 , 15 , 16 , 15 , -1 , -7 ] //South East
	[ 72 , 15 ,  8 , 19 , -3 , -7 ] //South
	[ 82 , 15 , 16 , 15 , -13, -7 ] //South West
	[100 , 15 , 24 , 13 , -18, -8 ] //West
	[126 , 15 , 16 , 15 , -7 , -9 ] //North West
}

spriteset(gfx_nrwgarratt_purchase  , "gfx/STEAM_LOCO/narrow_garrat.png"){ template_purchase(218,50) }

switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_tender_front_check_one, vehicle_is_reversed){ 1 : gfx_nrwgarratt_coal   ; gfx_nrwgarratt_water_rev  ; }
switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_tender_front_check_two, vehicle_is_reversed){ 1 : gfx_nrwgarratt_water  ; gfx_nrwgarratt_coal_rev   ; }
switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_boiler_front_check    , vehicle_is_reversed){ 1 : gfx_nrwgarratt_boiler ; gfx_nrwgarratt_boiler_rev ; }

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_gfx_decider, ( position_in_vehid_chain + 1 ) % 3){
	1 : sw_nrwgarratt_tender_front_check_two ;
	2 : sw_nrwgarratt_boiler_front_check ;
	sw_nrwgarratt_tender_front_check_one ;
}



//Switches

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_articulated, extra_callback_info1){
	1 : item_nrwgarratt;
	2 : item_nrwgarratt ;
	CB_RESULT_NO_MORE_ARTICULATED_PARTS;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_length, ( position_in_vehid_chain + 1 ) % 3){
	2 : 5 ;
	4 ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_vfx_check, ( position_in_vehid_chain + 1 ) % 3){
	2 : vfx_steam ;
	return 0 ;
}

//Cargo refit text

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_refit_text, cargo_subtype){
	0 : string(STR_COLOUR_DKBLUE) ;
	1 : string(STR_COLOUR_RED) ;
	2 : string(STR_COLOUR_GREEN) ;
	3 : string(STR_COLOUR_GREY) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_refit_text_check, livery_choice && colour_scheme_1){
	1 : sw_nrwgarratt_refit_text ;
	CB_RESULT_NO_TEXT ;
}

//Colours 

random_switch(FEAT_TRAINS, PARENT, sw_nrwgarratt_random_colours){
	1 : palette_1cc(COLOUR_DARK_BLUE) ;
	1 : palette_1cc(COLOUR_RED) ;
	1 : palette_1cc(COLOUR_GREEN) ;
	1 : palette_1cc(COLOUR_GREY) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_manual, cargo_subtype){
	1 : palette_1cc(COLOUR_RED) ;
	2 : palette_1cc(COLOUR_GREEN) ;
	3 : palette_1cc(COLOUR_GREY) ; 
	palette_1cc(COLOUR_DARK_BLUE) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_colours_manual_check, livery_choice){
	1 : sw_nrwgarratt_manual ;
	sw_nrwgarratt_random_colours ;
}

switch(FEAT_TRAINS, SELF, sw_nrwgarratt_2cc_check, colour_scheme_1){
	1 : sw_nrwgarratt_colours_manual_check ;
	palette_1cc(company_colour1) ;
}


//Main item

item(FEAT_TRAINS, item_nrwgarratt, 1000){
	property{
		name                           : string(STR_NAME_NRWGARRATT) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1937,1,1) ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : 0 ;
		cargo_allow_refit              : [GOOD] ;
		cargo_capacity                 : 1 ;
		model_life                     : 20 ;
		vehicle_life                   : 45 ;
		reliability_decay              : 10 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 60 ;
		speed                          : 50 mph ;
		track_type                     : NAAN ;
		power                          : 600 kW ;
		weight                         : 60 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.2 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 4 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : sw_nrwgarratt_gfx_decider ;
		colour_mapping                 : sw_nrwgarratt_2cc_check ;
		purchase                       : gfx_nrwgarratt_purchase ;
		sound_effect                   : sw_sfx_steam ;
		cargo_subtype_text             : sw_nrwgarratt_refit_text_check ;
		purchase_cargo_capacity        : 0 ;
		cargo_capacity                 : return 0 ;
		can_attach_wagon               : sw_all_but_MU90 ;
		articulated_part               : sw_nrwgarratt_articulated ;
		length                         : sw_nrwgarratt_length ;
		create_effect                  : sw_nrwgarratt_vfx_check ;
		running_cost_factor            : return(current_speed == 0 ? 8 : 20) ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/STEAM_LOCO/fairlie.pnml" 1
//Fairlie


//Sprite sets

spriteset(fairlie          , "gfx/STEAM_LOCO/fairlie.png" ){ template_narrow_6_4(  0 , 43 ) }
spriteset(fairlie_purchase , "gfx/STEAM_LOCO/fairlie.png" ){ template_purchase_short(  0 , 63 ) }


//Switches
random_switch(FEAT_TRAINS, SELF, sw_fairlie_random_colours){
	1 : palette_2cc(COLOUR_RED, COLOUR_YELLOW) ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_YELLOW) ;
}

switch(FEAT_TRAINS, SELF, sw_fairlie_colours, colour_scheme_1){
	1 : sw_fairlie_random_colours ;
	palette_2cc(company_colour1, company_colour2) ;
}

//switch(FEAT_TRAINS, SELF, 

//Item

item(FEAT_TRAINS, item_fairlie, 1001){
	property{
		name                           : string(STR_NAME_FAIRLIE) ;  
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date(1870,1,1) ;
		refittable_cargo_classes       : 0 ;
		model_life                     : 65 ;
		vehicle_life                   : 50 ;
		reliability_decay              : 7 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_STEAM ;
		running_cost_factor            : 34 ;
		speed                          : 35 mph ;
		track_type                     : NAAN ;
		power                          : 350 kW ;
		weight                         : 35 ton ;
		engine_class                   : ENGINE_CLASS_STEAM ;
		tractive_effort_coefficient    : 0.25 ;
		air_drag_coefficient           : 0.1 ;
		length                         : 6 ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		effect_spawn_model_and_powered : EFFECT_SPAWN_MODEL_STEAM ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		dual_headed                    : 0 ;
	}
	graphics{
		default                        : fairlie ;
		colour_mapping                 : sw_fairlie_colours ;
		purchase                       : fairlie_purchase ;
		sound_effect                   : sw_sfx_steam ;
		can_attach_wagon               : sw_all_but_MU90 ;
		create_effect                  : vfx_steam ;
		running_cost_factor            : return(current_speed == 0 ? 8 : 20) ;
	}
}

# 1 "rukts.pnml" 2
# 1 "src/WAGON/narrow_coach_one.pnml" 1
//Narrow coach one

//Spritesets

spriteset(gfx_nrwcoachone_1tone   , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 0)      }
spriteset(gfx_nrwcoachone_2tone   , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 23)     }
spriteset(gfx_nrwcoachone_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(63, 0) }

//Switches

//Switches

random_switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_auto){
	1 : gfx_nrwcoachone_1tone ;
	2 : gfx_nrwcoachone_2tone ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_manual, cargo_subtype){
	1 : gfx_nrwcoachone_1tone ;
	gfx_nrwcoachone_2tone ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_gfx_manual_check, livery_choice){
	1 : sw_nrwcoachone_gfx_manual ;
	sw_nrwcoachone_gfx_auto ;
}


//Refit text

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_refit_text, cargo_subtype){
	0 : string(STR_LIVERY_NRW_2TONE) ;
	1 : string(STR_LIVERY_NRW_1TONE) ;
	CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_refit_text_check, livery_choice){
	1 : sw_nrwcoachone_refit_text ;
	CB_RESULT_NO_TEXT ;
}


//Colour mapping

random_switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_auto){
	dependent : sw_nrwcoachone_gfx_auto ;
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	2 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_manual, cargo_subtype){
	1 : palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN) ;
	palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_manual_check, livery_choice){
	1 : sw_nrwcoachone_colour_manual ;
	sw_nrwcoachone_colour_auto ;
}

switch(FEAT_TRAINS, SELF, sw_nrwcoachone_colour_2cc_check, colour_scheme_1){
	1 : sw_nrwcoachone_colour_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}


item(FEAT_TRAINS, item_nrwcoachone, 9060){
	property{
		name						   : string(STR_NAME_NRWCOACHONE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 4 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1870, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 60 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 28 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 15 ;
		loading_speed                  : 10 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 6 ton ;
	}
	graphics{
		default                 : sw_nrwcoachone_gfx_manual_check ;
		purchase                : gfx_nrwcoachone_purchase ;
		purchase_colour_mapping : palette_2cc(COLOUR_CREAM, COLOUR_RED) ;
		cargo_subtype_text      : sw_nrwcoachone_refit_text_check ;
		colour_mapping          : sw_nrwcoachone_colour_2cc_check ;
	}
}


//Bristol Carriage

spriteset(gfx_brstcoach,          "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4(    0, 150) }
spriteset(gfx_brstcoach_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(0, 170) }

//Colour mapping

switch(FEAT_TRAINS, SELF, sw_brstcoach_colours, colour_scheme_1){
	1 : palette_2cc(COLOUR_WHITE, COLOUR_RED) ;
	palette_2cc(company_colour1, company_colour2) ;
}

//Item

item(FEAT_TRAINS, item_brstcoach, 9061){
	property{
		name						   : string(STR_NAME_NRWCOACHTWO) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 6 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1900, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 43 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 30 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_PASSENGERS ;
		cargo_allow_refit              : [PASS, TOUR] ;
		cargo_capacity                 : 40 ;
		loading_speed                  : 15 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 10 ton ;
	}
	graphics{
		default                 : gfx_brstcoach ;
		purchase                : gfx_brstcoach_purchase ;
		colour_mapping          : sw_brstcoach_colours ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/narrow_slate_wagon.pnml" 1
//Slate wagon

//Spritesets

spriteset(gfx_slatewgn_base      , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 50)   }
spriteset(gfx_slatewgn_coal_h    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 75)   }
spriteset(gfx_slatewgn_coal_f    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(57, 75)   }
spriteset(gfx_slatewgn_generic_h , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(114, 75) }
spriteset(gfx_slatewgn_generic_f , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(114, 75) }
spriteset(gfx_slatewgn_iron_h    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(0, 91)   }
spriteset(gfx_slatewgn_iron_f    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_4_4(57, 91)   }


spriteset(gfx_slatewgn_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(63, 50) }

//Switches


//Graphics switches

switch(FEAT_TRAINS, SELF, sw_slatewgn_coal_load_check, cargo_count){
	1..4  : gfx_slatewgn_coal_h ;
	5..8  : gfx_slatewgn_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_slatewgn_iron_load_check, cargo_count){
	1..4  : gfx_slatewgn_iron_h ;
	5..8  : gfx_slatewgn_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_slatewgn_generic_load_check, cargo_count){
	1..4  : gfx_slatewgn_generic_h ;
	5..8  : gfx_slatewgn_generic_f ;
}


switch(FEAT_TRAINS, PARENT, sw_gfx_slatewgn_cargo_decider, most_common_cargo_type){
	COAL : sw_slatewgn_coal_load_check ;
	IORE : sw_slatewgn_iron_load_check ;
	CORE : sw_slatewgn_iron_load_check ;
	COPR : sw_slatewgn_iron_load_check ;
	AORE : sw_slatewgn_iron_load_check ;
	sw_slatewgn_generic_load_check ;
}


switch(FEAT_TRAINS, SELF, sw_slatewgn_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : gfx_slatewgn_base ;
	2 : sw_gfx_slatewgn_cargo_decider ;
}


//Item

item(FEAT_TRAINS, item_slatewgn, 10003){
	property{
		name						   : string(STR_NAME_NRWSLATE) ;
		misc_flags                     : bitmask(TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 4 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1870, 1, 1) ;
		model_life                     : 50 ;
		vehicle_life                   : 60 ;
		cost_factor                    : 12 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 32 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_BULK ;
		non_refittable_cargo_classes   : bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE) ;
		cargo_allow_refit              : [COAL, GOLD, IORE, CORE, DIAM, AORE, PORE, COPR] ;
		cargo_capacity                 : 8 ;
		loading_speed                  : 7 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 5 ton ;
	}
	graphics{
		default                 : sw_slatewgn_spr_stack ;
		purchase                : gfx_slatewgn_purchase ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/WAGON/narrow_plank_wagon.pnml" 1
//Narrow bulk wagon

//Sprite sets

spriteset(gfx_nrwplank_base    , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4(   0, 107) }
spriteset(gfx_nrwplank_coal_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 107) }
spriteset(gfx_nrwplank_coal_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 107) }
spriteset(gfx_nrwplank_iron_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 127) }
spriteset(gfx_nrwplank_iron_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 127) }
spriteset(gfx_nrwplank_gnrc_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 147) }
spriteset(gfx_nrwplank_gnrc_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 147) }
spriteset(gfx_nrwplank_sand_h  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 114, 167) }
spriteset(gfx_nrwplank_sand_f  , "gfx/WAGON/narrow_coach_one.png"){ template_narrow_6_4( 187, 167) }

spriteset(gfx_nrwplank_purchase, "gfx/WAGON/narrow_coach_one.png"){ template_purchase_short(0,127) }


//Switches

//Graphics switches

switch(FEAT_TRAINS, SELF, sw_nrwplank_coal_load_check, cargo_count){
	1..6   : gfx_nrwplank_coal_h ;
	7..15  : gfx_nrwplank_coal_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_iron_load_check, cargo_count){
	1..6   : gfx_nrwplank_iron_h ;
	7..15  : gfx_nrwplank_iron_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_gnrc_load_check, cargo_count){
	1..6   : gfx_nrwplank_gnrc_h ;
	7..15  : gfx_nrwplank_gnrc_f ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_sand_load_check, cargo_count){
	1..6   : gfx_nrwplank_sand_h ;
	7..15  : gfx_nrwplank_sand_f ;
}


switch(FEAT_TRAINS, PARENT, sw_gfx_nrwplank_cargo_decider, most_common_cargo_type){
	COAL : sw_nrwplank_coal_load_check ;
	IORE : sw_nrwplank_iron_load_check ;
	CORE : sw_nrwplank_iron_load_check ;
	COPR : sw_nrwplank_iron_load_check ;
	PORE : sw_nrwplank_iron_load_check ;
	AORE : sw_nrwplank_iron_load_check ;
	SAND : sw_nrwplank_sand_load_check ;
	WHEA : sw_nrwplank_sand_load_check ;
	GOLD : sw_nrwplank_sand_load_check ;
	CERA : sw_nrwplank_sand_load_check ;
	sw_nrwplank_gnrc_load_check ;
}



switch(FEAT_TRAINS, SELF, sw_nrwplank_spr_stack, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	1 : gfx_nrwplank_base ;
	2 : sw_gfx_nrwplank_cargo_decider ;
}

//Colour mapping

random_switch(FEAT_TRAINS, PARENT, sw_nrwplank_random_colours){
	1 : palette_1cc(COLOUR_GREY) ;
	1 : palette_1cc(COLOUR_WHITE) ;
	1 : palette_1cc(COLOUR_RED) ;
}

switch(FEAT_TRAINS, SELF, sw_nrwplank_colours_2cc_check, colour_scheme_1){
	1 : sw_nrwplank_random_colours ;
	palette_1cc(company_colour2) ;
}

//Item

item(FEAT_TRAINS, item_nrwplank, 10004){
	property{
		name						   : string(STR_NAME_NRWPLANK) ;
		misc_flags                     : bitmask(TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK) ;
		sprite_id                      : SPRITE_ID_NEW_TRAIN ;
		length                         : 6 ;
		climates_available             : ALL_CLIMATES ;
		introduction_date              : date( 1920, 1, 1) ;
		model_life                     : 60 ;
		vehicle_life                   : 40 ;
		cost_factor                    : 20 ;
		running_cost_base              : RUNNING_COST_NONE ;
		running_cost_factor            : 50 ;
		refit_cost                     : 0 ;
		refittable_cargo_classes       : CC_BULK ;
		non_refittable_cargo_classes   : bitmask(CC_PASSENGERS, CC_MAIL, CC_EXPRESS, CC_ARMOURED, CC_BULK, CC_PIECE_GOODS, CC_LIQUID, CC_REFRIGERATED, CC_HAZARDOUS, CC_COVERED, CC_OVERSIZED, CC_POWDERIZED, CC_NON_POURABLE) ;
		cargo_allow_refit              : [COAL, GOLD, IORE, WHEA, CORE, DIAM, AORE, BDMT, SAND, CLAY, PORE, COPR, CERA] ;
		cargo_capacity                 : 15 ;
		loading_speed                  : 10 ;
		track_type                     : NAAN ;
		power                          : 0 hp ;
		weight                         : 7 ton ;
	}
	graphics{
		default                 : sw_nrwplank_spr_stack ;
		purchase                : gfx_nrwplank_purchase ;
		colour_mapping          : sw_nrwplank_colours_2cc_check ;
	}
}
# 1 "rukts.pnml" 2
# 1 "src/DMU/class_165.pnml" 1
spriteset(spriteset_465_nse_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 150)}
spriteset(spriteset_465_nse_t, "gfx/EMU/networker2.png") {template_8_4_networker(179, 0)}
spriteset(spriteset_465_cnx_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 350)}
spriteset(spriteset_465_cnx_t, "gfx/EMU/networker2.png") {template_8_4_networker(0, 200)}
spriteset(spriteset_465_sey_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 350)}
spriteset(spriteset_465_sey_t, "gfx/EMU/networker2.png") {template_8_4_networker(179, 200)}
spriteset(spriteset_465_seb_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 550)}
spriteset(spriteset_465_seb_t, "gfx/EMU/networker2.png") {template_8_4_networker(0, 400)}

spriteset(spriteset_365_nse_p, "gfx/EMU/networker2.png") {template_8_8_networker(179, 50)}
spriteset(spriteset_365_cnx_p, "gfx/EMU/networker2.png") {template_8_8_networker(0, 250)}
spriteset(spriteset_365_fcc_d, "gfx/EMU/networker2.png") {template_8_8_networker(179, 375)}
spriteset(spriteset_365_fcc_t, "gfx/EMU/networker2.png") {template_8_4_networker(269, 200)}
spriteset(spriteset_365_fcc_p, "gfx/EMU/networker2.png") {template_8_8_networker(179, 250)}
spriteset(spriteset_365_gtr_d, "gfx/EMU/networker2.png") {template_8_8_networker(0, 575)}
spriteset(spriteset_365_gtr_t, "gfx/EMU/networker2.png") {template_8_4_networker(90, 400)}
spriteset(spriteset_365_gtr_p, "gfx/EMU/networker2.png") {template_8_8_networker(0, 450)}

spriteset(spriteset_365_nse_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(179, 50)}
spriteset(spriteset_365_cnx_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(0, 250)}
spriteset(spriteset_365_fcc_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(179, 250)}
spriteset(spriteset_365_gtr_p_r, "gfx/EMU/networker2.png") {template_8_8_networker_reverse(0, 450)}

spriteset(spriteset_365_pan_up, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker(0, 50)}
spriteset(spriteset_365_pan_up_r, "gfx/FIXTURES/class_375_lights.png") {template_8_8_networker_reverse(0, 50)}

spriteset(spriteset_465_headlights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 525)}
spriteset(spriteset_465_taillights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 550)}
spriteset(spriteset_365_headlights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 475)}
spriteset(spriteset_365_taillights, "gfx/EMU/networker2.png") {template_8_8_networker(179, 500)}

spriteset(spriteset_465_nse_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 400)}
spriteset(spriteset_465_cnx_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 413)}
spriteset(spriteset_465_sey_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 426)}
spriteset(spriteset_465_seb_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(179, 439)}
spriteset(spriteset_365_fcc_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(259, 413)}
spriteset(spriteset_365_gtr_purchase, "gfx/EMU/networker2.png") {template_dualhead_purchase(259, 426)}

switch(FEAT_TRAINS, SELF, sw_465_purchase, current_year){
	1983 .. 1995: spriteset_465_nse_purchase;
	1996 .. 2005: spriteset_465_cnx_purchase;
	2006 .. 2012: spriteset_465_sey_purchase;
	spriteset_465_seb_purchase;
}

switch(FEAT_TRAINS, SELF, sw_365_purchase, current_year){
	1983 .. 1995: spriteset_465_nse_purchase;
	1996 .. 2005: spriteset_465_cnx_purchase;
	2006 .. 2012: spriteset_365_fcc_purchase;
	spriteset_365_gtr_purchase;
}

switch(FEAT_TRAINS, SELF, sw_365_pantograph_livery, cargo_subtype){
	0:spriteset_365_nse_p;
	1:spriteset_365_cnx_p;
	2:spriteset_365_fcc_p;
	3:spriteset_365_gtr_p;
}

switch(FEAT_TRAINS, SELF, sw_365_pantograph_livery_r, cargo_subtype){
	0:spriteset_365_nse_p_r;
	1:spriteset_365_cnx_p_r;
	2:spriteset_365_fcc_p_r;
	3:spriteset_365_gtr_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_d_livery, cargo_subtype){
	0:spriteset_465_nse_d;
	1:spriteset_465_cnx_d;
	2:spriteset_365_fcc_d;
	3:spriteset_365_gtr_d;
}

switch(FEAT_TRAINS, SELF, sw_365_t_livery, cargo_subtype){
	0:spriteset_465_nse_t;
	1:spriteset_465_cnx_t;
	2:spriteset_365_fcc_t;
	3:spriteset_365_gtr_t;
}

switch(FEAT_TRAINS, SELF, sw_465_d_livery, cargo_subtype){
	0:spriteset_465_nse_d;
	1:spriteset_465_cnx_d;
	2:spriteset_465_sey_d;
	3:spriteset_465_seb_d;
}

switch(FEAT_TRAINS, SELF, sw_465_t_livery, cargo_subtype){
	0:spriteset_465_nse_t;
	1:spriteset_465_cnx_t;
	2:spriteset_465_sey_t;
	3:spriteset_465_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_decider_d, current_year){
	1983 .. 1995: spriteset_465_nse_d;
	1996 .. 2005: spriteset_465_cnx_d;
	2006 .. 2012: spriteset_465_sey_d;
	spriteset_465_seb_d;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_d, current_year){
	1983 .. 1995: spriteset_465_nse_d;
	1996 .. 2005: spriteset_465_cnx_d;
	2006 .. 2012: spriteset_365_fcc_d;
	spriteset_365_gtr_d;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_465_nse_t;
	1996 .. 2005: spriteset_465_cnx_t;
	2006 .. 2012: spriteset_465_sey_t;
	spriteset_465_seb_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_t, current_year){
	1983 .. 1995: spriteset_465_nse_t;
	1996 .. 2005: spriteset_465_cnx_t;
	2006 .. 2012: spriteset_365_fcc_t;
	spriteset_365_gtr_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_p, current_year){
	1983 .. 1995: spriteset_365_nse_p;
	1996 .. 2005: spriteset_365_cnx_p;
	2006 .. 2012: spriteset_365_fcc_p;
	spriteset_365_gtr_p;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_decider_p_r, current_year){
	1983 .. 1995: spriteset_365_nse_p_r;
	1996 .. 2005: spriteset_365_cnx_p_r;
	2006 .. 2012: spriteset_365_fcc_p_r;
	spriteset_365_gtr_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_d, livery_choice){
	1: sw_365_d_livery;
	sw_365_passenger_livery_decider_d;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_t, livery_choice){
	1: sw_365_t_livery;
	sw_365_passenger_livery_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_auto_decider_d, livery_choice){
	1: sw_465_d_livery;
	sw_465_passenger_livery_decider_d;
}

switch(FEAT_TRAINS, SELF, sw_465_passenger_livery_auto_decider_t, livery_choice){
	1: sw_465_t_livery;
	sw_465_passenger_livery_decider_t;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_p, livery_choice){
	1: sw_365_pantograph_livery;
	sw_365_passenger_livery_decider_p;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_livery_auto_decider_p_r, livery_choice){
	1: sw_365_pantograph_livery_r;
	sw_365_passenger_livery_decider_p_r;
}

switch(FEAT_TRAINS, SELF, sw_365_livery_t, position_in_vehid_chain){
	0: sw_365_passenger_livery_auto_decider_p;
	sw_365_passenger_livery_auto_decider_t;
}
	
switch(FEAT_TRAINS, SELF, sw_365_livery_t_r, position_in_vehid_chain_from_end){
	0: sw_365_passenger_livery_auto_decider_p_r;
	sw_365_passenger_livery_auto_decider_t;
}

switch(FEAT_TRAINS, PARENT, sw_365_stack_t, vehicle_is_reversed){
	0: sw_365_livery_t;
	sw_365_livery_t_r;
}

switch(FEAT_TRAINS, SELF, sw_365_livery_t_p, position_in_vehid_chain){
	0: spriteset_365_pan_up;
}
	
switch(FEAT_TRAINS, SELF, sw_365_livery_t_r_p, position_in_vehid_chain_from_end){
	0: spriteset_365_pan_up_r;
}

switch(FEAT_TRAINS, PARENT, sw_365_stack_t_p, vehicle_is_reversed){
	0: sw_365_livery_t_p;
	sw_365_livery_t_r_p;
}

switch(FEAT_TRAINS, SELF, sw_465_lights_f, position_in_consist){
	0: spriteset_465_headlights;
}
	
switch(FEAT_TRAINS, SELF, sw_465_lights, position_in_consist_from_end){
	0: spriteset_465_taillights;
	sw_465_lights_f;
}

switch(FEAT_TRAINS, SELF, sw_365_lights_f, position_in_consist){
	0: spriteset_365_headlights;
}
	
switch(FEAT_TRAINS, SELF, sw_365_lights, position_in_consist_from_end){
	0: spriteset_365_taillights;
	sw_365_lights_f;
}

switch(FEAT_TRAINS, SELF, sw_365_lights_decider, cargo_subtype){
	0:sw_465_lights;
	1:sw_465_lights;
	2:sw_365_lights;
	3:sw_365_lights;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_lights_decider, current_year){
	1983 .. 1995: sw_465_lights;
	1996 .. 2005: sw_465_lights;
	2006 .. 2012: sw_365_lights;
	sw_365_lights;
}

switch(FEAT_TRAINS, SELF, sw_365_passenger_lights_auto_decider, livery_choice){
	1: sw_365_lights_decider;
	sw_365_passenger_lights_decider;
}

switch(FEAT_TRAINS, SELF, sw_365_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_365_passenger_livery_auto_decider_d;
	1 : sw_365_passenger_lights_auto_decider;
}

switch(FEAT_TRAINS, SELF, sw_365_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_365_stack_t;
	1 : sw_365_stack_t_p;
}

switch(FEAT_TRAINS, SELF, sw_465_default, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_465_passenger_livery_auto_decider_d;
	1 : sw_465_lights;
}

switch(FEAT_TRAINS, SELF, sw_465_default_t, [STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), getbits(extra_callback_info1, 8, 8)]){
	0 : return sw_465_passenger_livery_auto_decider_t;
}

random_switch(FEAT_TRAINS, SELF, sw_465_nse_colour_mapping, TRIGGER_VEHICLE_SERVICE){
	1: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED) ;
 }
 
random_switch(FEAT_TRAINS, SELF, sw_465_cnx_colour_mapping, TRIGGER_VEHICLE_SERVICE){ 
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_YELLOW) ;
}

random_switch(FEAT_TRAINS, SELF, sw_365_fcc_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_PINK);
}

random_switch(FEAT_TRAINS, SELF, sw_365_gtr_colour_mapping, TRIGGER_VEHICLE_SERVICE){  
	1 : palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE);
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_auto, current_year){
	1983 .. 1995: sw_465_nse_colour_mapping;
	1996 .. 2005: sw_465_cnx_colour_mapping;
	2006 .. 2012: sw_365_fcc_colour_mapping;
	sw_365_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_auto, cargo_classes){
	1983 .. 1995: sw_465_nse_colour_mapping;
	sw_465_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_manual, cargo_subtype){
	0 : sw_465_nse_colour_mapping;
	1 : sw_465_cnx_colour_mapping;
	2 : sw_365_fcc_colour_mapping;
	3 : sw_365_gtr_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_manual, cargo_subtype){
	0 : sw_465_nse_colour_mapping;
	1..3 : sw_465_cnx_colour_mapping;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_manual_check, livery_choice){
	1 : sw_365_colour_mapping_manual ;
	sw_365_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_365_colour_mapping_decider, colour_scheme_1){
	1 : sw_365_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_manual_check, livery_choice){
	1 : sw_465_colour_mapping_manual ;
	sw_465_colour_mapping_auto ;
}

switch(FEAT_TRAINS, SELF, sw_465_colour_mapping_decider, colour_scheme_1){
	1 : sw_465_colour_mapping_manual_check ;
	palette_2cc(company_colour1, company_colour2) ;
}

switch(FEAT_TRAINS, SELF, sw_365_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	365: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_365_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_465_coupling_restrictions, vehicle_type_id) {
    9090: return CB_RESULT_ATTACH_ALLOW;
	465: return CB_RESULT_ATTACH_ALLOW;
	37 : return CB_RESULT_ATTACH_ALLOW;
    return string(STR_365_NO_COUPLE);
}

switch(FEAT_TRAINS, SELF, sw_365_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_FCC);
	3: return string(STR_LIVERY_GTR);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_365_refit_text_decider, livery_choice){
	1 : sw_365_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_465_refit_text, cargo_subtype){
	0: return string(STR_LIVERY_NSE);
	1: return string(STR_LIVERY_CONNEX);
	2: return string(STR_LIVERY_SE_YELLOW);
	3: return string(STR_LIVERY_SE_BLUE);
	return CB_RESULT_NO_TEXT ;
}

switch(FEAT_TRAINS, SELF, sw_465_refit_text_decider, livery_choice){
	1 : sw_465_refit_text ;
	return CB_RESULT_NO_TEXT ;
}

item (FEAT_TRAINS, item_365, 365) {
	property {
		name: 							string(STR_NAME_365);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1994, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					35;
		cost_factor:					55;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							100 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAAZ;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							1680 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					68;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.4;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				190;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_365_coupling_restrictions;
		default: 							sw_365_default;
		purchase:							sw_365_purchase;
		cargo_subtype_text:					sw_365_refit_text_decider ;
		colour_mapping:						sw_365_colour_mapping_decider ;
		purchase_colour_mapping:			sw_365_colour_mapping_auto ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 11 : 45) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 66;
		default: sw_365_default_t;
		colour_mapping:	sw_365_colour_mapping_decider;
		cargo_subtype_text: sw_365_refit_text_decider ;
}
}

if (vehicle_selection < 2){
item (FEAT_TRAINS, item_365, 365){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
}

if (alt_names == 1){
item (FEAT_TRAINS, item_365, 365){
	property{
		name                           : string(STR_NAME_365_ALT) ;
	}
}
}



item (FEAT_TRAINS, item_465, 465) {
	property {
		name: 							string(STR_NAME_465);
		climates_available: 			ALL_CLIMATES;
		introduction_date:				date(1990, 1, 1);
		model_life:						30;
		retire_early:					1;
		vehicle_life:					50;
		reliability_decay:				7;
		refittable_cargo_classes:		bitmask(CC_PASSENGERS);
		cargo_allow_refit:				[PASS, TOUR];
		loading_speed:					40;
		cost_factor:					50;
		running_cost_factor:			45;
		sprite_id:						SPRITE_ID_NEW_TRAIN;
		speed:							75 mph;
		misc_flags:						bitmask(TRAIN_FLAG_MU, TRAIN_FLAG_2CC, TRAIN_FLAG_SPRITE_STACK);
		refit_cost:						0;
		track_type:						SAA3;
		ai_special_flag:				AI_FLAG_CARGO;
		power:							3000 hp;
		running_cost_base:				RUNNING_COST_ELECTRIC;
		dual_headed:					1;
		default_cargo_type:				PASS;
		cargo_capacity:					90;
		weight:							40 ton;
		engine_class:					ENGINE_CLASS_ELECTRIC;
		tractive_effort_coefficient:	0.4;
		air_drag_coefficient:			0.1;
		length:							8;
		effect_spawn_model_and_powered:	EFFECT_SPAWN_MODEL_ELECTRIC;
		bitmask_vehicle_info:			0;
		cargo_age_period:				165;
		default_cargo_type:				PASS;
	}
	graphics {
		can_attach_wagon:					sw_465_coupling_restrictions;
		default: 							sw_465_default;
		purchase:							sw_465_purchase;
		create_effect:						vfx_3rd_only;
		cargo_subtype_text:					sw_465_refit_text_decider ;
		colour_mapping:						sw_465_colour_mapping_decider ;
		purchase_colour_mapping:			sw_465_colour_mapping_auto ;
		sound_effect:						sw_sfx_electric_loco_modern ;
		running_cost_factor:				return(current_speed == 0 ? 11 : 45) ;
}
		livery_override (item_MU90) {
		cargo_capacity: 100;
		default: sw_465_default_t;
		colour_mapping:	sw_465_colour_mapping_decider;
		cargo_subtype_text: sw_465_refit_text_decider ;
}
}
/* 
if (vehicle_selection < 3){
item (FEAT_TRAINS, item_465, 465){
	property{
		climates_available             : NO_CLIMATE ;
	}
}
} */


if (alt_names == 1){
item (FEAT_TRAINS, item_465, 465){
	property{
		name                           : string(STR_NAME_465_ALT) ;
	}
}
}
# 1 "rukts.pnml" 2
# 1 "src/CODE/sort_purchase.pnml" 1
sort(FEAT_TRAINS,[
14,
20,
37,
40,
50,
31,
46,
70,
68,
86,
87,
92,
88,
91,
101,
142,
205,
150,
153,
155,
158,
165,
168,
43,
220,
415,
313,
314,
455,
411,
319,
321,
442,
321,
325,
465,
365,
375,
444,
350,
700,
10000,
10001,
10002,
9010,
9020,
9025,
9030,
9035,
9040,
9050,
9090,
1001,
1000,
9060,
9061,
10003,
10004
]);
# 1 "rukts.pnml" 2
